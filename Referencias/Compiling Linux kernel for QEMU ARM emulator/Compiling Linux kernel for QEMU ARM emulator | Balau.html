<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
<title>Compiling Linux kernel for QEMU ARM emulator | Balau</title>
<link rel="pingback" href="http://balau82.wordpress.com/xmlrpc.php">
<link rel="alternate" type="application/rss+xml" title="Balau » Feed" href="http://balau82.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Balau » Comments Feed" href="http://balau82.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Balau » Compiling Linux kernel for QEMU ARM&nbsp;emulator Comments Feed" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/feed/">
<script type="text/javascript" async="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/quant.js"></script><script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" id="all-css-0" href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a.css" type="text/css" media="all">
<!--[if lte IE 8]>
<link rel='stylesheet' id='inuittypes-ie-css'  href='http://s2.wp.com/wp-content/themes/pub/inuit-types/css/ie.css?ver=3.6-beta2-24176' type='text/css' media='all' />
<![endif]-->
<!--[if lte IE 6]>
<link rel='stylesheet' id='inuittypes-ie6-css'  href='http://s2.wp.com/wp-content/themes/pub/inuit-types/css/ie6.css?ver=3.6-beta2-24176' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="print-css-4" href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/global-print.css" type="text/css" media="print">
<link rel="stylesheet" id="all-css-4" href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a_002.css" type="text/css" media="all">
<script type="text/javascript">
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a_002.js"></script>
<link rel="stylesheet" id="all-css-0" href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/style.css" type="text/css" media="all">
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563g&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://balau82.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://balau82.wordpress.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Scratchbox on&nbsp;Ubuntu" href="http://balau82.wordpress.com/2010/03/14/scratchbox-on-ubuntu/">
<link rel="next" title="Busybox for ARM on&nbsp;QEMU" href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/">
<meta name="generator" content="WordPress.com">
<link rel="canonical" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/">
<link rel="shortlink" href="http://wp.me/psbTy-6W">
<link rel="alternate" type="application/json+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=json&amp;url=http%3A%2F%2Fbalau82.wordpress.com%2F2010%2F03%2F22%2Fcompiling-linux-kernel-for-qemu-arm-emulator%2F&amp;for=wpcom-auto-discovery"><link rel="alternate" type="application/xml+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=xml&amp;url=http%3A%2F%2Fbalau82.wordpress.com%2F2010%2F03%2F22%2Fcompiling-linux-kernel-for-qemu-arm-emulator%2F&amp;for=wpcom-auto-discovery">
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="Compiling Linux kernel for QEMU ARM emulator">
<meta property="og:url" content="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/">
<meta property="og:description" content="How to compile a vanilla Linux kernel for the Versatile ARM platform, and run it using QEMU.">
<meta property="og:site_name" content="Balau">
<meta property="og:image" content="http://1.gravatar.com/blavatar/bb5b906eefc5bd598f0e9dab79bb274f?s=200">
<meta name="twitter:site" content="@wordpressdotcom">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@wordpressdotcom">
<meta property="fb:app_id" content="249643311490">
<link rel="shortcut icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/bceebb08f0947a4e4055391017cb5c2a?s=16" sizes="16x16">
<link rel="icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/bceebb08f0947a4e4055391017cb5c2a?s=16" sizes="16x16">
<link rel="apple-touch-icon-precomposed" href="http://1.gravatar.com/blavatar/bb5b906eefc5bd598f0e9dab79bb274f?s=114">
<link rel="openid.server" href="http://balau82.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://balau82.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://balau82.wordpress.com/osd.xml" title="Balau">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
		<style>
		/* <![CDATA[ */
		/* Block: reblog */
		
		.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
		.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
		.reblogger-note-content            { margin: 0 0 20px; }
		.reblog-post .wpcom-enhanced-excerpt-content { border-left: 3px solid #eee; padding-left: 15px; }
		.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
		.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
		.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
		.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
		
		.reblog-post .wpcom-enhanced-excerpt { clear: both; }
		
		.reblog-post .wpcom-enhanced-excerpt address,
		.reblog-post .wpcom-enhanced-excerpt li,
		.reblog-post .wpcom-enhanced-excerpt h1,
		.reblog-post .wpcom-enhanced-excerpt h2,
		.reblog-post .wpcom-enhanced-excerpt h3,
		.reblog-post .wpcom-enhanced-excerpt h4,
		.reblog-post .wpcom-enhanced-excerpt h5,
		.reblog-post .wpcom-enhanced-excerpt h6,
		.reblog-post .wpcom-enhanced-excerpt p { font-size: 100% !important; }
		
		.reblog-post .wpcom-enhanced-excerpt blockquote,
		.reblog-post .wpcom-enhanced-excerpt pre,
		.reblog-post .wpcom-enhanced-excerpt code,
		.reblog-post .wpcom-enhanced-excerpt q { font-size: 98% !important; }
		

		/* ]]> */
		</style>
		
<meta name="geo.position" content="45.447224;8.599690">
<meta name="ICBM" content="45.447224, 8.599690">
<meta name="application-name" content="Balau"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Freedom Embedded"><meta name="msapplication-task" content="name=Subscribe;action-uri=http://balau82.wordpress.com/feed/;icon-uri=http://1.gravatar.com/blavatar/bceebb08f0947a4e4055391017cb5c2a?s=16"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="title" content="Compiling Linux kernel for QEMU ARM&nbsp;emulator | Balau on WordPress.com">
<meta name="description" content="How to compile a vanilla Linux kernel for the Versatile ARM platform, and run it using QEMU.">

<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/google_service.js">
</script>
<script type="text/javascript">
if ( typeof GS_googleAddAdSenseService == 'function' ) { GS_googleAddAdSenseService("ca-pub-3443918307802676"); }
if ( typeof GS_googleEnableAllServices == 'function' ) { GS_googleEnableAllServices() };
</script><script src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/google_ads.js"></script>
<script type="text/javascript">
if ( typeof GA_googleAddSlot == 'function' ) { GA_googleAddSlot("ca-pub-3443918307802676", "wpcom_below_post_adsafe"); }
</script>
<script type="text/javascript">
if ( typeof GA_googleFetchAds == 'function' ) { GA_googleFetchAds(); }
</script>

<script type="text/javascript">
var wpcom_ads = { bid: 6718912, pt: 'permalink', wa: 0, as: 1, domain: 'balau82.wordpress.com', url: 'http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/', gid: '', };
</script>
<link href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/shCore.css" type="text/css" rel="stylesheet"><link href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/shThemeDefault.css" type="text/css" rel="stylesheet"><style id="syntaxhighlighteranchor"></style>
<script type="text/javascript"> 
	window.google_analytics_uacct = "UA-52447-2"; 
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script><script src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/ga.js" async="" type="text/javascript"></script>
<script src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/osd.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/services.css"></head>

<body class="single single-post postid-430 single-format-standard highlander-enabled highlander-light">

	<div class="wrapper">
	
	<div id="main_menu" class="top_menu">

		<div class="fl">

			<div class="menu"><ul><li class="page_item page-item-2"><a href="http://balau82.wordpress.com/about-me/">About&nbsp;Me</a></li><li class="page_item page-item-491"><a href="http://balau82.wordpress.com/about-the-blog/">About the&nbsp;Blog</a></li><li class="page_item page-item-1169"><a href="http://balau82.wordpress.com/resources/">Resources</a></li><li class="page_item page-item-611"><a href="http://balau82.wordpress.com/archive/">Archives</a></li></ul></div>

		</div>


		<div class="fr">

			<span class="subscribe">

			<a href="http://balau82.wordpress.com/feed/"><span class="rss-button">RSS</span></a> &nbsp;Subscribe:&nbsp;

			<a href="http://balau82.wordpress.com/feed/">RSS feed</a>

			</span>

		</div>

	</div><!-- #main_menu -->


		<div id="container" class="container">

			<div id="inuit-content" class="content content_left">

								<div id="header">

						<div class="blog-title"><a href="http://balau82.wordpress.com/">Balau</a></div>

						<div class="blog-description">Freedom Embedded</div>

				</div>

		
			
				<div id="post-430" class="post-430 post type-post status-publish format-standard hentry category-embedded-software tag-arm tag-codesourcery tag-gcc tag-gnu tag-initramfs tag-kernel tag-linux tag-open-source tag-qemu single-post">

					<div id="header-about">

	                <h1>Compiling Linux kernel for QEMU ARM&nbsp;emulator </h1>

	                </div>

					<div class="date-comments">

				    <p class="fl">


					    <em>Posted on 2010/03/22</em>

					    
					</p>

				    <p class="fr"><span class="comments">

					    
		                      <a href="#comments">210</a>

						
					</span></p>

			        </div>

					<div class="clear"></div>

					<br>

					<div class="entry">

	                	
						<p><em>[EDIT] I have written a new updated version of this post <a href="http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/">here</a>.</em></p>
<p>Last time I experimented on <a href="http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/">compiling bare-metal ARM</a> programs and <a href="http://balau82.wordpress.com/2010/03/10/u-boot-for-arm-on-qemu/">U-Boot</a>;
 now I want to compile a Linux kernel for an ARM architecture from 
scratch. I don’t have a physical ARM device handy, so I’m using QEMU 
instead, as I’ve already done before.</p>
<p>Both the mainline kernel and QEMU support the <a href="http://infocenter.arm.com/help/topic/com.arm.doc.dui0224i/index.html">VersatilePB</a> platform, so that’s the target I chose for my tests. The toolchain I’ll be using is the <a href="http://www.codesourcery.com/sgpp/lite/arm/portal/subscription?@template=lite">CodeSourcery ARM EABI toolchain</a>.
 [edit] From version 2010q1 of the toolchain, the manual explicitly says
 that the compiler is not intended for Linux kernel development; it is 
anyway possible to use the GNU/Linux toolchain for the same scope. 
[/edit]</p>
<p>The vanilla kernel can be downloaded from <a href="http://kernel.org/">kernel.org</a>; I took the latest at the moment (<a href="http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.33.tar.bz2">version 2.6.33</a>) and extracted it in a folder. From that folder I ran:</p>
<div><div id="highlighter_226167" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">make ARCH=arm versatile_defconfig</code></div></div></td></tr></tbody></table></div></div>
<p>This command sets a predefined configuration, used in compilation, 
that is capable of building a kernel targeted to run inside the 
VersatilePB board. I wanted to tweak it a little bit, so I ran:</p>
<div><div id="highlighter_52137" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">make ARCH=arm menuconfig</code></div></div></td></tr></tbody></table></div></div>
<p>I removed module support (for simplicity) and enabled EABI support as
 a binary format (allowing also old ABI). This is necessary to run 
software compiled with the CodeSourcery toolchain. I exited the menu and
 saved the configuration, then I ran:</p>
<div><div id="highlighter_451061" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">make ARCH=arm CROSS_COMPILE=arm-none-eabi- all</code></div></div></td></tr></tbody></table></div></div>
<p>[edit] If using the GNU/Linux toolchain, the command that must be used is, instead:</p>
<div><div id="highlighter_918395" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- all</code></div></div></td></tr></tbody></table></div></div>
<p>[/edit]</p>
<p>This will start the building of the kernel using the correct ARM 
compiler; the build will create, among other binaries, a compressed 
kernel in a file called <code>zImage</code> located in “<code>arch/arm/boot</code>“. This image can be run in QEMU using the following command (assuming that you are in the “<code>arch/arm/boot</code>” directory):</p>
<div><div id="highlighter_67152" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">qemu-system-arm -M versatilepb -m 128M -kernel zImage</code></div></div></td></tr></tbody></table></div></div>
<p>QEMU will execute the Linux image: the kernel will display many boot 
messages and then it will complain that it didn’t find a root 
filesystem. Let’s then create the simplest filesystem we can do: it 
consists of a single “Hello World” executable, that can be built using 
the <a href="http://www.codesourcery.com/sgpp/lite/arm/portal/subscription?@template=lite">CodeSourcery GNU/Linux toolchain</a>.</p>
<div><div id="highlighter_438943" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include &lt;stdio.h&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">main() {</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp functions bold">printf</code><code class="cpp plain">(</code><code class="cpp string">"Hello World!\n"</code><code class="cpp plain">);</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code><code class="cpp plain">(1);</code></div><div class="line number6 index5 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>Note: an infinite loop is introduced because when Linux executes the 
first program in the root filesystem, it expects that the program does 
not exit.</p>
<p>Having the GNU/Linux ARM toolchain installed (be aware that it is different from the bare EABI toolchain) I ran:</p>
<div><div id="highlighter_989104" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">arm-none-linux-gnueabi-gcc -static&nbsp;&nbsp;&nbsp; test.c&nbsp;&nbsp; -o test</code></div></div></td></tr></tbody></table></div></div>
<p>This creates an executable ELF program for ARM, statically linked 
(all the libraries that it needs are linked together in a single 
binary). We can now create a simple filesystem using the <code>cpio</code> tool as follows:</p>
<div><div id="highlighter_979228" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">echo test | cpio -o --format=newc &gt; rootfs</code></div></div></td></tr></tbody></table></div></div>
<p>The <code>cpio</code> tool takes a list of files and outputs an archive; the <code>newc</code> format is the format of the <code>initramfs</code> filesystem, that the Linux kernel recognizes. The <code>rootfs</code>
 file in our case is a binary image of a filesystem containing a single 
file, that is the test ELF program. QEMU can pass the filesystem binary 
image to the kernel using the <code>initrd</code> parameter; the kernel must also know that the root filesystem will be located in RAM (because that’s where QEMU writes the <code>initrd</code> binary) and that the program to launch is our <code>test</code> executable, so the command line becomes:</p>
<div><div id="highlighter_737446" class="syntaxhighlighter  plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append "root=/dev/ram rdinit=/test"</code></div></div></td></tr></tbody></table></div></div>
<p>The QEMU window will show the boot messages we saw before, but at the
 end of the execution a “Hello World!” will be displayed. The next step 
would be to create a working filesystem with a command shell and at 
least basic functionality.</p>
		<div id="geo-post-430" class="geo geo-post" style="display: none">
			<span class="latitude">45.447224</span>
			<span class="longitude">8.599690</span>
		</div>
<div class="wpa" style="position: relative; width:300px; text-align: center; padding: 0; margin: 10px auto; overflow: hidden; clear: both;">
<a style="position: absolute; text-align: left; display: block; font: 9px/1 sans-serif; text-decoration: underline;" href="http://en.wordpress.com/about-these-ads/" rel="nofollow">About these ads</a>
<script type="text/javascript">
		var wpcom_adclk_hovering = false;
		var wpcom_adclk_recorded = false;
		var wpcom_adclk_theme = "Inuit Types";
		var wpcom_adclk_slot = "wpcom_below_post_adsafe";
		var wpcom_adclk_network = ( typeof wpcom_adclk_network === "undefined" ) ? "" : wpcom_adclk_network ;

		jQuery(document).ready( function() {
			function wpcom_adclk_hover_yes() { wpcom_adclk_hovering = true; }
			function wpcom_adclk_hover_no() { wpcom_adclk_hovering = false; }
			jQuery(".wpa").click(wpcom_adclk_click);
			jQuery(".wpa iframe").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );
			jQuery(".wpa object").hover( wpcom_adclk_hover_yes, wpcom_adclk_hover_no );

			jQuery(window).blur( function() {
				if ( wpcom_adclk_hovering ) { wpcom_adclk_click(); }
			});
		});

		function wpcom_adclk_impression() {
			var stat_gif = document.location.protocol + "//stats.wordpress.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_imp_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_imp_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_imp_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_imp_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;
			new Image().src = stat_gif + "&baba=" + Math.random();
			return true;
		}

		function wpcom_adclk_click() {
			if (wpcom_adclk_recorded) { return true; } // no double counting
			var stat_gif = document.location.protocol + "//stats.wordpress.com/g.gif?v=wpcom-no-pv";
			stat_gif += "&x_ads_click_theme=" + wpcom_adclk_theme;
			stat_gif += "&x_ads_click_placement="+wpcom_adclk_slot;
			stat_gif += "&x_ads_click_network=" + wpcom_adclk_network;
			stat_gif += "&x_ads_click_theme_network="+wpcom_adclk_theme+"_"+wpcom_adclk_network;

			new Image().src = stat_gif + "&baba=" + Math.random();
			wpcom_adclk_recorded = true;
			var now=new Date(); var end=now.getTime()+250;
			while(true){now=new Date();if(now.getTime()>end){break;}}
			return true;
		}
	
if ( typeof GA_googleAddAttr == 'function' ) {
GA_googleAddAttr("AdOpt", "1");
GA_googleAddAttr("Origin", "other");
GA_googleAddAttr("LangId", "1");
GA_googleAddAttr("Domain", "balau82.wordpress.com");
GA_googleAddAttr("BlogId", "6718912");
GA_googleAddAttr("AdSafe", "1");
GA_googleAddAttr("Autotag", "technology");
GA_googleAddAttr("Tag", "embedded-software");
GA_googleAddAttr("Tag", "arm");
GA_googleAddAttr("Tag", "codesourcery");
GA_googleAddAttr("Tag", "gcc");
GA_googleAddAttr("Tag", "gnu");
GA_googleAddAttr("Tag", "initramfs");
GA_googleAddAttr("Tag", "kernel");
GA_googleAddAttr("Tag", "linux");
GA_googleAddAttr("Tag", "open-source");
GA_googleAddAttr("Tag", "qemu");
GA_googleAddAttr("Partner", "AOL");
GA_googleAddAttr("theme_bg", "ffffff");
GA_googleAddAttr("theme_text", "333333");
GA_googleAddAttr("theme_link", "222222");
GA_googleAddAttr("theme_border", "dddddd");
GA_googleAddAttr("theme_url", "346ba4");
GA_googleAddAdSensePageAttr("google_page_url", "http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/");
GA_googleFillSlot("wpcom_below_post_adsafe");
}
</script><script src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/ads"></script><div id="google_ads_div_wpcom_below_post_adsafe_ad_wrapper">
<div id="google_ads_div_wpcom_below_post_adsafe_ad_container" style="display:inline-block;">                                                                     
                                                                     
                                             


<!-- Struq v4.0.4-Tags: 1028-SirS_e5C4EKF4rQmfrxuog-300x250 -->
<script type="text/javascript">
(function(){
	var clickTrackerUrl="[UNENCODED.CLICK.MACRO]";
	var cacheBuster="1062225066";
	var rnd=parseInt(Math.random()*100000000000);
	var protocol=(document.location.protocol=="https:"?"https:":"http:");
	var furl=protocol+"//ads.struq.com/a/i/"+cacheBuster+"/SirS_e5C4EKF4rQmfrxuog/16454/"
	+"?v=4&rnd="+rnd
	+"&ct="+encodeURIComponent(clickTrackerUrl)
	+"&src="+encodeURIComponent(window.location)+"&sref="+encodeURIComponent(document.referrer)+"";
	document.write("<if"+"rame src='"+furl+"' width='300' height='250' "
	+"frameborder='0' marginheight='0' marginwidth='0' hspace='0' vspace='0' scrolling='no' style=''></if"+"rame>");
})();
</script><iframe src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a.html" marginheight="0" marginwidth="0" hspace="0" vspace="0" style="" frameborder="0" height="250" scrolling="no" width="300"></iframe>
<noscript>
<iframe 
 src='http://ads.struq.com/a/i/1062225066/SirS_e5C4EKF4rQmfrxuog/16454/?v=4&rnd=1062225066&ct=http://adclick.g.doubleclick.net/aclk?sa=L&ai=Bs3t_L5-JUdaoHubR0AHkloDgDuDFoKcDAAAAEAEgpO6fBjgAWLiRmeJFYM3w7oCsA7IBFWJhbGF1ODIud29yZHByZXNzLmNvbboBCWdmcF9pbWFnZcgBCdoBVWh0dHA6Ly9iYWxhdTgyLndvcmRwcmVzcy5jb20vMjAxMC8wMy8yMi9jb21waWxpbmctbGludXgta2VybmVsLWZvci1xZW11LWFybS1lbXVsYXRvci-YAsQTwAIC4AIA6gIXd3Bjb21fYmVsb3dfcG9zdF9hZHNhZmX4Av_RHpADnASYA6wCqAMB4AQBoAYW&num=0&sig=AOD64_3iIEyj7TWH4O3GGx4qGWcMbwnDFQ&client=ca-pub-3443918307802676&adurl='
 width='300' height='250' frameborder='0' marginheight='0' marginwidth='0' scrolling='no' style=''>
</iframe>
</noscript>
<!-- END TAG / DON'T PASTE COMMENTS TO NETWORK -->

<!-- ----------------------------------------------------------------------------------------------------------------- --><hr>



</div>
</div>

</div>
<style type="text/css">
div.wpa>div { margin-top: 1em; }
</style>
<script type="text/javascript">
jQuery( window ).load( function() {
    if ( jQuery(".wpa script[src*='shareth.ru']").length > 0 || jQuery(".wpa iframe[src*='boomvideo.tv']").length > 0 || jQuery(".wpa iframe[src*='viewablemedia.net']").length > 0 || jQuery(".wpa .sharethrough-placement").length > 0 ) {
        jQuery( '.wpa' ).css( 'width', '400px' );
    }
setTimeout(function(){if(typeof GS_googleAddAdSenseService !== 'function'){new Image().src=document.location.protocol+"//stats.wordpress.com/g.gif?v=wpcom-no-pv&x_noads=adblock&baba="+Math.random()}},100);
} );
</script>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><div class="sd-content"><ul><li class="share-google-plus-1"><a rel="nofollow" class="share-google-plus-1 sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=google-plus-1&amp;nb=1" target="_blank" title="Click to share on Google+" id="sharing-google-430"><span>Google +1</span></a></li><li class="share-twitter"><a rel="nofollow" class="share-twitter sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter" id="sharing-twitter-430"><span>Twitter<span class="share-count">4</span></span></a></li><li><a href="#" class="sharing-anchor sd-button share-more"><span>More</span></a></li><li class="share-end"></li></ul><div class="sharing-hidden"><div class="inner" style="display: none;"><ul><li class="share-reddit"><a rel="nofollow" class="share-reddit sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=reddit&amp;nb=1" target="_blank" title="Click to share on Reddit"><span>Reddit</span></a></li><li class="share-facebook"><a rel="nofollow" class="share-facebook sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=facebook&amp;nb=1" target="_blank" title="Share on Facebook" id="sharing-facebook-430"><span>Facebook<span class="share-count">21</span></span></a></li><li class="share-end"></li><li class="share-stumbleupon"><a rel="nofollow" class="share-stumbleupon sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=stumbleupon&amp;nb=1" target="_blank" title="Click to share on StumbleUpon"><span>StumbleUpon</span></a></li><li class="share-pinterest"><a rel="nofollow" class="share-pinterest sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=pinterest&amp;nb=1" target="_blank" title="Click to share on Pinterest"><span>Pinterest</span></a></li><li class="share-end"></li><li class="share-tumblr"><a rel="nofollow" class="share-tumblr sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=tumblr&amp;nb=1" target="_blank" title="Click to share on Tumblr"><span>Tumblr</span></a></li><li class="share-digg"><a rel="nofollow" class="share-digg sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=digg&amp;nb=1" target="_blank" title="Click to Digg this post"><span>Digg</span></a></li><li class="share-end"></li><li class="share-linkedin"><a rel="nofollow" class="share-linkedin sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=linkedin&amp;nb=1" target="_blank" title="Click to share on LinkedIn" id="sharing-linkedin-430"><span>LinkedIn<span class="share-count">3</span></span></a></li><li class="share-email share-service-visible"><a rel="nofollow" class="share-email sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/?share=email&amp;nb=1" target="_blank" title="Click to email this to a friend"><span>Email</span></a></li><li class="share-end"></li><li class="share-print"><a rel="nofollow" class="share-print sd-button share-icon" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#print" target="_blank" title="Click to print"><span>Print</span></a></li><li class="share-end"></li></ul></div></div></div></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-loaded" id="like-post-wrapper-6718912-430-51899f28872d8" data-src="http://widgets.wp.com/likes/#blog_id=6718912&amp;post_id=430&amp;origin=http://balau82.wordpress.com&amp;obj_id=6718912-430-51899f28872d8" data-name="like-post-frame-6718912-430-51899f28872d8"><h3 class="sd-title">Like this:</h3><div class="post-likes-widget-placeholder" style="height: 55px; display: none;"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></div><iframe style="display: inline;" class="post-likes-widget jetpack-likes-widget" name="like-post-frame-6718912-430-51899f28872d8" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a_002.html" frameborder="0" height="55px" width="100%"></iframe><span class="sd-text-color"></span><a class="sd-link-color"></a></div></div>
						
                        <div class="tags">Tagged: <em><a href="http://balau82.wordpress.com/tag/arm/" rel="tag">ARM</a>, <a href="http://balau82.wordpress.com/tag/codesourcery/" rel="tag">codesourcery</a>, <a href="http://balau82.wordpress.com/tag/gcc/" rel="tag">gcc</a>, <a href="http://balau82.wordpress.com/tag/gnu/" rel="tag">gnu</a>, <a href="http://balau82.wordpress.com/tag/initramfs/" rel="tag">initramfs</a>, <a href="http://balau82.wordpress.com/tag/kernel/" rel="tag">kernel</a>, <a href="http://balau82.wordpress.com/tag/linux/" rel="tag">linux</a>, <a href="http://balau82.wordpress.com/tag/open-source/" rel="tag">open source</a>, <a href="http://balau82.wordpress.com/tag/qemu/" rel="tag">qemu</a></em></div>
                        <div class="categories">Posted in: <em><a href="http://balau82.wordpress.com/category/software/embedded-software/" title="View all posts in Embedded" rel="category tag">Embedded</a></em></div>

					</div>

					<div id="nav-below" class="navigation">

						<div class="nav-previous"><a href="http://balau82.wordpress.com/2010/03/14/scratchbox-on-ubuntu/" rel="prev">← Scratchbox on&nbsp;Ubuntu</a></div>

						<div class="nav-next"><a href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/" rel="next">Busybox for ARM on&nbsp;QEMU →</a></div>

					</div><!-- #nav-below -->

					<div class="fix"></div>

				</div>

	            <div class="fix"></div>

				<div id="comments">

					

<!-- You can start editing here. -->



	
	<div class="commh2">210 Responses  “Compiling Linux kernel for QEMU ARM&nbsp;emulator” → </div>


			<div id="comment-nav-above" class="navigation">

				<div class="nav-previous"></div>

				<div class="nav-next"></div>

			</div>


	<ol class="commentlist snap_preview">

	
        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-185">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-76eeae24cee7550c539c038074f0a62c-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/76eeae24cee7550c539c038074f0a62c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Fabio<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-185">2010/03/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>I’ve been following your blog for some weeks. I am working on 
something related to your last posts. I am trying to get to run a 
profiler (e.g. gprof) under qemu simulating an ARM board. My idea is to 
compile my application using arm-none-eabi with -eg, then link it with 
the kernel, as you did with your Helloworld example. Have you ever tried
 something like that?</p>
<p>Regards.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-188">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-188">2010/03/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I never tried it on QEMU, yet. I know that gprof-compiled 
programs write a gmon.out log on execution, and this can’t be done in my
 example because everything happens in RAM. Instead of mounting a 
ramdisk you should mount a root filesystem from NFS, so that the 
gmon.out can be written on a real disk. <a href="http://909ers.apl.washington.edu/%7Edushaw/ARM/#NFS" rel="nofollow">This page</a> can help somehow to setup NFS for QEMU, but I already planned on doing a post on this topic to extend my examples.<br>
A couple of notes:</p>
<ul>
<li>The compilation should be “arm-none-linux-gnueabi -pg -static test.c
 -o test”, I don’t think the bare metal EABI should be used in your 
case.</li>
<li>Are you sure about what you are trying to profile? In the embedded 
world most of the performance problems are caused by memory access, and 
memory access is modeled with zero delay on QEMU. Profiling can be done,
 but the meaning of the results must be understood clearly.</li>
</ul>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-192">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-76eeae24cee7550c539c038074f0a62c-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/76eeae24cee7550c539c038074f0a62c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Fabio<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-192">2010/03/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau. </p>
<p>I wasn’t aware of this constraint of the qemu. What I need to have 
profiled is a video codec, which will be implemented in hardware 
afterwards. Therefore I have to find another simulator. I was thinking 
of skyeye, although it is not clear whether is supports cycle-accurate 
simulation. I found some other options on the web, but must of them are 
very restricted.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-193">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-193">2010/03/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Unfortunately I never searched for free cycle-accurate 
simulators. The proprietary RVISS/ARMulator could give a very precise 
(but not 100% cycle accurate: see <a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0207d/Chdecfae.html" rel="nofollow">its manual</a>)
 estimate of the code performance if it is configured as the real 
system, because it can model memory with configurable delay as well as 
caches and Tightly Coupled Memory (ITCM and DTCM).</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-292">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-f614afd95bd63cd03801d19fd1d70c44-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/f614afd95bd63cd03801d19fd1d70c44.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">M.Vivek<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-292">2010/05/28</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau, </p>
<p>In the “Quick Start” chapter of Sourcery G++ Lite, it mentions that 
the EABI configuration is *not* intended for kernel/application 
development.</p>
<p>Did you consider using any other configuration (e.g. the “GNU/Linux” configuration) in your experiments.</p>
<p>Thanks,</p>
<p>Vivek</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-294">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-294">2010/05/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello M.Vivek,</p>
<p>I just tried to compile the linux kernel using:<br>
make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- all<br>
The kernel works just fine.</p>
<p>The version of Sourcery I used (arm-none-eabi-gcc Sourcery G++ Lite 
2008q3-66 4.3.2) did not contain that information in the manuals. I’m 
gonna add this to the post, thanks!</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-304">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-9803d8e10f36c8eb2a0f4a00c85b8fc6-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/9803d8e10f36c8eb2a0f4a00c85b8fc6.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Brian Mahaffy<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-304">2010/06/11</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau &amp; Vivec,</p>
<p>For compiling the Linux kernel, either toolchain will work.  The 
difference between the two toolchains are the libraries provided.  The 
EABI (Enhanced/Extended ARM Binary Interface) version of the tools 
(sometimes called the “Bare Metal” compiler) will generate code 
containing library calls resolved by something like NewLib (<a href="http://sourceware.org/newlib/" rel="nofollow">http://sourceware.org/newlib/</a>).
  The gnueabi tools on the other hand only link in a stub library that 
makes software interrupts to the Linux kernel to satisfy the library 
calls.</p>
<p>For compiling the Linux kernel though, none of this ends up 
mattering, as the Kernel does not use any LibC calls.  Either toolchain 
works.  It is not until you make a Linux userspace program that is is an
 issue.  Conversely, if you are building a bare metal program, you 
either need to provide your own implementations of things found in the 
standard lib, or you need to link to something like NewLib and use the 
EABI tools.</p>
<p>…Brian</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-356">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-bfdec1abeb5b91c1d5a6814700afb5eb-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/bfdec1abeb5b91c1d5a6814700afb5eb.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Johan<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-356">2010/07/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi </p>
<p>In your example all the kernel logs is sent to the graphical window and not to a serial console.</p>
<p>If you start qemu with:<br>
qemu-system-arm -M versatilepb -m 128M -serial stdio -kernel zImage </p>
<p>Then you get “Uncompressing Linux… done, booting the kernel.<br>
” in the terminal but nothing more.</p>
<p>Do you know how to get all the boot logs to be sent there and not to the graphical window?</p>
<p>Thanks<br>
Johan</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-359">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-359">2010/07/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>you need to add “console=ttyAMA0″ to the kernel options. Instead of the command in my post, run:</p>
<p><code>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd 
rootfs -serial stdio -append "console=ttyAMA0 root=/dev/ram 
rdinit=/test"</code></p>
<p>You can also use “-nographic” instead of “-serial stdio” to launch 
QEMU without opening another window, but then to close it you have to 
type Ctrl-A and then “x”.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-360">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-bfdec1abeb5b91c1d5a6814700afb5eb-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/bfdec1abeb5b91c1d5a6814700afb5eb.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Johan<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-360">2010/07/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Thanks the<br>
-serial stdio -append “console=ttyAMA0″<br>
works quite nice.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-425">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-27000720c0b14ff79738b77ea4ec37f5-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/27000720c0b14ff79738b77ea4ec37f5.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Robert Smith<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-425">2010/09/13</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi, Thank you for very interesting posts.</p>
<p>I’ve built kernel  v2.6.33.2 (using tool-chain 
arm-unknown-linux-uclibcgnueabi produced by Crosstool-NG 1.7.0) and 
successfuly simulated VersatilePB board on Qemu following your post. I 
run qemu under Ubuntu 9.10.</p>
<p>However when I tried to repeat the same for realview arm board I got the very strange behaviour:</p>
<p>make ARCH=arm realview_defconfig<br>
make ARCH=arm CROSS_COMPILE=arm-linux-<br>
qemu-system-arm -M realview -kernel zImage.2.6.33.2.realview -initrd<br>
initramfs.cpio.gz</p>
<p>I got blank Qemu screen on the target system. If I open Qemu serial console (Ctrl + Alt + 3) then I see:<br>
serial0 console<br>
Uncompressing Linux…Uncompressing Linux…</p>
<p>Not a gzip file<br>
– System halted</p>
<p>This is very strange, because, as I said above VersatilePB kernel 
created with the same tool-chain worked fine. Could you advise how to 
deal with and investigate such kind of problems?</p>
<p>Thanks</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-428">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-4" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-428">2010/09/13</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Unfortunately I have no experience on the RealView boards. I 
tried to compile the kernel (both 2.6.33 and 2.6.34) like you did, only 
with CodeSourcery toolchain, and had the same results you had. I noticed
 that, giving the option <code>-cpu arm1136</code>, it prints “<code>Uncompressing Linux... done, booting the kernel.</code>” then stops.<br>
You could do the following:</p>
<p>- Recompile the kernel with debugging symbols (the configuration 
should be in “kernel hacking” section inside the kernel menuconfig)</p>
<p>- Launch QEMU with debugging enabled (“-s -S” to launch it stopped and waiting for GDB) </p>
<p>- Launch GDB with something like this (If you have ddd installed and your toolchain comes with gdb):</p>
<p>$ <code>ddd --debugger arm-unknown-linux-uclibcgnueabi-gdb -- vmlinux</code></p>
<p>- Inside GDB:</p>
<p><code>(gdb) target remote localhost:1234<br>
(gdb) b start_kernel<br>
(gdb) c</code></p>
<p>- Try to debug step-by-step the kernel and understand what’s doing nasty things.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-503">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-383c373259d7a2d30ebe940083e6f097-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/383c373259d7a2d30ebe940083e6f097.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Vinicius do Vale<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-503">2010/10/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau. Very interesting this post.<br>
I run Qemu under Ubuntu 10.04 and I followed step-by-step but I’m 
suceeded not emulated the VersatilePB on Qemu. The QEMU window shows the
 boot messages, but the Kernel Panic Message is showed. </p>
<p>“No filesystem could mount root, tried: ext2 cramfs minix romfs<br>
Kernel Panic – not syncing: VFS: Unable to mount root fs on unknown-block(1,0)</p>
<p>Could you help-me?</p>
<p>Regards.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-504">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-5" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-504">2010/10/26</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>It could mean the <code>rootfs</code> is not recognized or does not contain the program you specify with <code>rdinit</code> kernel option.<br>
Check that:<br>
- the <code>rootfs</code> is a little bigger than the <code>test</code> file. It’s an indication that the filesystem contains your file.<br>
- the beginning of the <code>rootfs</code> file is something like “070701″ in ASCII (30 37 30 37 30 31 in hexadecimal).<br>
- you use the <code>rdinit</code> kernel option using the correct filename.<br>
Try also to run the following command instead, to create the filesystem:<br>
<code>echo ./test | cpio -o --format=newc &gt; rootfs</code></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-528">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-79119970243e91c7f55ae293e7eeb991-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/79119970243e91c7f55ae293e7eeb991.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://www.eccam.com/" rel="external nofollow" class="url">Míla</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-528">2010/11/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
I’ve followed all steps, I even downloaded the same linux kernel sources
 and toolchain, but still not able to run ARM kernel in QEMU. I got an 
error:<br>
“Kernel panic – not syncing: Attempted to kill init!”<br>
when passed correct filename to rdinit. My rootfs is surely ok, test is 
build using same toolchain as kernel (GNU/Linux toolchain from 
CodeSourcery). When I use incorrect filename in rdinit, I get same error
 as Vinicius do Vale:<br>
“No filesystem could mount root, tried: ext2 cramfs minix romfs<br>
Kernel Panic – not syncing: VFS: Unable to mount root fs on unknown-block(1,0)”<br>
So I suppose that my test in rootfs is run, but something else is wrong. Any idea?<br>
Could you please provide yours kerenel zImage and rootfs? I would like 
to check if I’m able to run it under my QEMU. Or can be something wrong 
with my qemu-system-arm? (I don’t suppose it, because it seeems that 
kernel is currently running)<br>
I’m working on Ubuntu 10.04 and my command is<br>
<code>qemu-system-arm -m 128M -M versatilepb -kernel zImage -initrd rootfs -append "root=/dev/ram rdinit=/test"</code></p>
<p>When running in cosole:<br>
$ qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrrootfs 
-serial stdio -append “console=ttyAMA0 root=/dev/ram rdinit=/test”<br>
Uncompressing Linux… done, booting the kernel.<br>
Linux version 2.6.33.7 (mkriz@DELLo) (gcc version 4.5.1 (Sourcery G++ Lite 2010.09-50) ) #1 Fri Nov 19 16:28:22 CET 2010<br>
CPU: ARM926EJ-S [41069265] revision 5 (ARMv5TEJ), cr=00093177<br>
CPU: VIVT data cache, VIVT instruction cache<br>
Machine: ARM-Versatile PB<br>
Memory policy: ECC disabled, Data cache writeback<br>
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512<br>
Kernel command line: console=ttyAMA0 root=/dev/ram rdinit=/test<br>
PID hash table entries: 512 (order: -1, 2048 bytes)<br>
Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br>
Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br>
Memory: 128MB = 128MB total<br>
Memory: 125852KB available (2916K code, 228K data, 116K init, 0K highmem)<br>
Hierarchical RCU implementation.<br>
RCU-based detection of stalled CPUs is enabled.<br>
NR_IRQS:192<br>
VIC @f1140000: id 0×00041190, vendor 0×41<br>
Console: colour dummy device 80×30<br>
Calibrating delay loop… 445.64 BogoMIPS (lpj=2228224)<br>
Mount-cache hash table entries: 512<br>
CPU: Testing write buffer coherency: ok<br>
NET: Registered protocol family 16<br>
Serial: AMBA PL011 UART driver<br>
dev:f1: ttyAMA0 at MMIO 0x101f1000 (irq = 12) is a AMBA/PL011<br>
console [ttyAMA0] enabled<br>
dev:f2: ttyAMA1 at MMIO 0x101f2000 (irq = 13) is a AMBA/PL011<br>
dev:f3: ttyAMA2 at MMIO 0x101f3000 (irq = 14) is a AMBA/PL011<br>
fpga:09: ttyAMA3 at MMIO 0×10009000 (irq = 38) is a AMBA/PL011<br>
bio: create slab  at 0<br>
SCSI subsystem initialized<br>
Switching to clocksource timer3<br>
NET: Registered protocol family 2<br>
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br>
TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br>
TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br>
TCP: Hash tables configured (established 4096 bind 4096)<br>
TCP reno registered<br>
UDP hash table entries: 256 (order: 0, 4096 bytes)<br>
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br>
NET: Registered protocol family 1<br>
RPC: Registered udp transport module.<br>
RPC: Registered tcp transport module.<br>
RPC: Registered tcp NFSv4.1 backchannel transport module.<br>
Trying to unpack rootfs image as initramfs…<br>
Freeing initrd memory: 632K<br>
NetWinder Floating Point Emulator V0.97 (double precision)<br>
Installing knfsd (copyright (C) 1996 <a href="mailto:okir@monad.swb.de">okir@monad.swb.de</a>).<br>
JFFS2 version 2.2. (NAND) © 2001-2006 Red Hat, Inc.<br>
ROMFS MTD (C) 2007 Red Hat, Inc.<br>
msgmni has been set to 247<br>
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)<br>
io scheduler noop registered<br>
io scheduler deadline registered<br>
io scheduler cfq registered (default)<br>
CLCD: unknown LCD panel ID 0×00001000, using VGA<br>
CLCD: Versatile hardware, VGA display<br>
Console: switching to colour frame buffer device 80×60<br>
brd: module loaded<br>
Uniform Multi-Platform E-IDE driver<br>
ide-gd driver 1.18<br>
smc91x.c: v1.1, sep 22 2004 by Nicolas Pitre<br>
eth0: SMC91C11xFD (rev 1) at c8800000 IRQ 25 [nowait]<br>
eth0: Ethernet addr: 52:54:00:12:34:56<br>
mice: PS/2 mouse device common for all mice<br>
TCP cubic registered<br>
NET: Registered protocol family 17<br>
VFP support v0.3: implementor 41 architecture 1 part 10 variant 9 rev 0<br>
Freeing init memory: 116K<br>
Kernel panic – not syncing: Attempted to kill init!<br>
Backtrace:<br>
[] (dump_backtrace+0×0/0×110) from [] (dump_stack+0×18/0x1c)<br>
 r6:c7815c40 r5:00000004 r4:c0319044<br>
[] (dump_stack+0×0/0x1c) from [] (panic+0×48/0×124)<br>
[] (panic+0×0/0×124) from [] (do_exit+0×68/0x5c8)<br>
 r3:c03059d0 r2:c781fe40 r1:00000001 r0:c02c0bdd<br>
[] (do_exit+0×0/0x5c8) from [] (do_group_exit+0×94/0xc8)<br>
 r7:c781ffb0<br>
[] (do_group_exit+0×0/0xc8) from [] (get_signal_to_deliver+0×328/0×360)<br>
 r4:0830009f<br>
[] (get_signal_to_deliver+0×0/0×360) from [] (do_signal+0×70/0x5dc)<br>
[] (do_signal+0×0/0x5dc) from [] (do_notify_resume+0×20/0×54)<br>
[] (do_notify_resume+0×0/0×54) from [] (work_pending+0x1c/0×20)<br>
 r4:00000000</p>
<p>Thanks!</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-529">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-6" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-529">2010/11/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>If the message is “Kernel panic – not syncing: Attempted to kill 
init!” then it seems that your test program is exiting in some way.<br>
- It could be that the while(1) loop is optimized out (unlikely) and the
 program exits. You can check the generated assembler to see if there is
 a loop in the main function. Then compile without optimization (“-O0″)<br>
- Have you enabled EABI support in the kernel menuconfig? (CONFIG_AEABI=y should be inside the config file)<br>
- Maybe there’s something in the system calls of the new toolchain you 
use that is incompatible with the one I used. I used the 2009-q3-67 one:
 <a href="http://www.codesourcery.com/sgpp/lite/arm/portal/release1039" rel="nofollow">http://www.codesourcery.com/sgpp/lite/arm/portal/release1039</a></p>
<p>I will send you the rootfs together with the kernel, if it does not work then the problem could be QEMU.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-530">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-79119970243e91c7f55ae293e7eeb991-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/79119970243e91c7f55ae293e7eeb991.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://www.eccam.com/" rel="external nofollow" class="url">Míla</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-530">2010/11/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi,<br>
I’m sorry for wasting your time. I didn’t understand what’s EABI and I 
couldn’t find the option before. Now I have read something about ABI / 
EABI and I understand my error.<br>
Thanks a lot for yours tutorials, they are very useful and educational.<br>
Best regards.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-531">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-7" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-531">2010/11/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>No problem! We’re all here to learn.<br>
Check out this Debian page that contains some information about the ABI/EABI mess: <a href="http://wiki.debian.org/ArmEabiPort" rel="nofollow">http://wiki.debian.org/ArmEabiPort</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-534">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-c7d6eacbcf71523af823ceeaaa35b7a6-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/c7d6eacbcf71523af823ceeaaa35b7a6.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Puente<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-534">2010/11/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello, sorry by my English, I talk Spain,<br>
First, thanks you by the post, is very good, but I need emulate 
s3c2410_defconfig kernel configuration, “make  s3c2410_defconfig” “make 
 menuconfig” and “make all” using ARCH and CROSS_COMPILE variable is 
fine. Now, when I try emulate with qemu, show a black screen and no 
more, without mistakes.<br>
If you have any answer for this, I will be thank to you.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-535">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-8" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-535">2010/11/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello!<br>
QEMU does not support the board you’re trying to emulate. Unless you are
 running a modified version of QEMU that emulates the s3c2410, I don’t 
think that you can do what you are trying to do.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-536">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-c7d6eacbcf71523af823ceeaaa35b7a6-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/c7d6eacbcf71523af823ceeaaa35b7a6.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Puente<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-536">2010/11/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I’m trying to build a System with the arm920t CPU, but I don’t 
have the real (physical) target, this is the reason for that, I need 
emulate this System on a x86, but if qemu don’t can, I don’t know how 
doing that.</p>
<p>Thanks.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-652">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-41447511b3c69c34bb89c2a947e38bb4-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/41447511b3c69c34bb89c2a947e38bb4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Adithya<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-652">2011/01/27</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I have a very silly doubt, plz dont mind.<br>
In the below command:</p>
<p><b>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram rdinit=/test”</b></p>
<p>The linux kernel is in zImage, but where is the bootloader. I suppose
 that in your previous post regarding hello world for bare metal arm, 
the booting and necessary memory map were built into the test.bin. And 
the U-boot should be doing this for a linux kernel. But i dint 
understand where is the bootloader in the above command.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-653">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-9" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-653">2011/01/27</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Don’t worry, it’s not a silly doubt because the answer is hidden in QEMU internal working <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"><br>
In fact, QEMU acts as a bootloader in the sense that it puts zImage in a
 fixed location in the emulated RAM, then prepares the environment of 
the emulated machine, such as setting the registers, preparing the ATAGs
 structures according to QEMU options (“initrd”, “append”, …), and then 
jumps to the kernel start address to begin execution.<br>
I discovered it by starting QEMU with the “-s -S” options to make it 
freeze on start, and then attaching to it with a debugger such as 
arm-none-eabi-gdb.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-669">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-41447511b3c69c34bb89c2a947e38bb4-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/41447511b3c69c34bb89c2a947e38bb4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Adithya<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-669">2011/02/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hai</p>
<p>I m not very used to gdb, can u tell me the exact commands i need to type to see the booting process.</p>
<p>I have tried doing gdb over zImage but it says format not recognised.</p>
<p>Thanks in Advance !</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-670">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-10" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-670">2011/02/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>One problem is that QEMU installed from Ubuntu does not support 
debugging. You have to compile and install it from source or, better, 
use <a href="https://launchpad.net/%7Elinaro-maintainers/+archive/tools/" rel="nofollow">Linaro Tools PPA</a> to install the package qemu-linaro.</p>
<p>Before you compile the kernel with “make … all” I suggest you enable 
the “compile with debug info” configuration that is present in the “make
 … menuconfig” screen in section “kernel hacking”.<br>
The kernel compilation produces “arch/arm/boot/zImage” as a compressed 
kernel image, but also “vmlinux” as an executable, and “vmlinux” is the 
file to point to GDB, not zImage.<br>
To debug the kernel I run this command:</p>
<p><code>$ qemu-system-arm -M versatilepb -m 128M -kernel arch/arm/boot/zImage -s -S</code></p>
<p>QEMU will start in a freezed state, waiting from a GDB connection to 
port 1234. Then, from another window, I run DDD with this command:</p>
<p><code>$ ddd --debugger arm-none-eabi-gdb vmlinux</code></p>
<p>When the terminal opens, I run the commands:</p>
<p><code>target remote localhost:1234<br>
break start_kernel<br>
continue<br>
</code></p>
<p>And then you can debug step by step or make your own breakpoints.</p>
<p>You can also check out these slides: <a href="http://files.meetup.com/1590495/debugging-with-qemu.pdf" rel="nofollow">Debugging with QEMU</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-675">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-35b87dbba18af0b2b71846509a5998f4-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/35b87dbba18af0b2b71846509a5998f4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">dwnlds<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-675">2011/02/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>QEMU supports mini2440 board?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-678">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-11" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-678">2011/02/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>It does not support it officially, but it seems that there are people providing patches for it.<br>
See these instructions: <a href="http://gnufiish.org/trac/wiki/Qemu" rel="nofollow">http://gnufiish.org/trac/wiki/Qemu</a><br>
The projects involved are this: <a href="http://code.google.com/p/mini2440/" rel="nofollow">http://code.google.com/p/mini2440/</a> and this: <a href="http://repo.or.cz/w/qemu/mini2440.git" rel="nofollow">http://repo.or.cz/w/qemu/mini2440.git</a><br>
I can’t guarantee if they work and if they are stable, but it’s a start!</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-684">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">naveed ahmad<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-684">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi,</p>
<p>i am facing an issue, can you help be bro, i cross compiled for ARM, but now i am struck at  hello program,</p>
<p>i need your help,  i am unable to compile c program using code sourcery toolchain, tell me what i can do,</p>
<p>plz</p>
<p>naveed ahmad<br>
<a href="mailto:naviduett@gmail.com">naviduett@gmail.com</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-685">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-12" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-685">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>First of all don’t panic, and then tell us:</p>
<ul>
<li>what command did you run</li>
<li>what error messages are printed, or what are the unexpected results</li>
</ul>
<p>without this information it’s hard to solve your problem.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-686">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://help/" rel="external nofollow" class="url">naveed ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-686">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>thanks sir for reply<br>
———————–<br>
i followed your steps that you mentioned for “Compiling Linux kernel for QEMU ARM emulator”.</p>
<p>cross compilation is done,<br>
i run this command in respective dir ,qemu-system-arm -M versatilepb -m 128M -kernel zImage</p>
<p>and  i am getting roof file system error and many other error,</p>
<p>then according to your article i make hello program and try to 
compile it with  “Code Sourcery tool chain ”  but i am getting error </p>
<p>“/root/CodeSourcery/Sourcery_G++_Lite/bin/../lib/gcc/arm-none-eabi/4.5.1/../../../../arm-none-eabi/bin/ld:
 warning: cannot find entry symbol _start; defaulting to 00008018″</p>
<p>command is    root@nido:/home/naveed/Desktop# arm-none-eabi-gcc -static    test.c   -o test<br>
………………..</p>
<p>i am stuck here, i dont know what i am missing, i tried to found it on internet but could not.</p>
<p>i will be really thank full  you sir,</p>
<p>regrads<br>
Naveed Ahmad</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-687">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-13" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-687">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The problem is that you are using the “bare metal” toolchain 
“arm-none-eabi” instead of the Linux toolchain “arm-none-linux-gnueabi” 
that can be downloaded <a href="http://www.codesourcery.com/sgpp/lite/arm/portal/subscription3057" rel="nofollow">here</a>.<br>
I’m sorry if it was not so clear in my post!</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-688">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://help/" rel="external nofollow" class="url">naveed ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-688">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>i downloaded  
“arm-2010.09-50-arm-none-linux-gnueabi-i686-pc-linux-gnu.tar.bz2 ”      
from  “http://www.codesourcery.com/sgpp/lite/arm/portal/release1600″,</p>
<p>i will check this and will back to you if i face any issue.</p>
<p>Thanks for help.. <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"><br>
Naveed Ahmad</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-689">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://help/" rel="external nofollow" class="url">naveed ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-689">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>sorry sir again for disturbance,</p>
<p>there is no command arm-none-linux-gnueab after adding PATH in /etc/envir… file.</p>
<p>arm-none-eabi is available, <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_sad.gif" alt=":(" class="wp-smiley">  bad day for me.<br>
i am new in embedded linux so that i am getting  a lot errors,</p>
<p>sorry for this disturbance sir</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-690">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-14" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-690">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Have you tried logging out and logging in again? /etc/environment should be applied when you login.<br>
What you should have is “arm-none-linux-gnueabi-gcc” and all the other tools.<br>
Maybe you misspelled “arm-none-linux-gnueab” without the “i”, because if
 you try to execute “arm-none-linux-gnueab-gcc” it does not exist <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> .</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-691">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-4" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://help/" rel="external nofollow" class="url">naveed ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-691">2011/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>i restart the VM but no effect, well i will try it tomorrow , and then i will update you.</p>
<p>Thanks,</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-692">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-5" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://hisir/" rel="external nofollow" class="url">naveed ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-692">2011/03/02</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi sir,<br>
hope so you will be fine, well first of sorry i was using wrong 
toolchain, but know that command is available, i compile hello program 
using that command,</p>
<p>i move output of  arm-none-linux-gnueabi-gcc -static    test.c   -o test<br>
after applying cpio command to /<br>
———</p>
<p>then i run qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram rdinit=/test”<br>
but it give me the same out put, no hello message in it <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_sad.gif" alt=":(" class="wp-smiley"> </p>
<p>sorry for these ridiculous questions..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-693">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-6" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://issue/" rel="external nofollow" class="url">Naveed Ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-693">2011/03/03</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Dear sir Balau<br>
———————————</p>
<p>hi sir,<br>
hope so you will be fine, well first of sorry i was using wrong 
toolchain, but know that command is available, i compile hello program 
using that command,</p>
<p>i move output of arm-none-linux-gnueabi-gcc -static test.c -o test<br>
after applying cpio command to /<br>
———</p>
<p>then i run qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram rdinit=/test”<br>
but it give me the same out put, no hello message in it <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_sad.gif" alt=":(" class="wp-smiley"> </p>
<p>sorry for these ridiculous questions..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-694">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0aa6bc294145c8da7a928ccd85ee81b9-7" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0aa6bc294145c8da7a928ccd85ee81b9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://issue/" rel="external nofollow" class="url">Naveed Ahmad</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-694">2011/03/03</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>guide me if i am missing some thing plz</p>
<p>Thanks</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-695">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-15" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-695">2011/03/03</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>First of all don’t panic.<br>
Then, what do you mean by moving the output? you don’t have to move anything.<br>
Then you don’t apply cpio command to /, but you run cpio to create a root filesystem image.<br>
When you say “it give me the same output”, can you copy here the last lines? if you can’t copy/paste, run:<br>
<code>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd 
rootfs -serial stdio -append "root=/dev/ram rdinit=/test 
console=ttyAMA0"</code><br>
in this case the output is on the terminal and you can copy/paste.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-704">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-41447511b3c69c34bb89c2a947e38bb4-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/41447511b3c69c34bb89c2a947e38bb4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Adithya<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-704">2011/03/08</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>What is the difference between “arm-none-eabi” “arm-none-linux-gnueabi” ? I mean when should we use each one of them.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-705">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-41447511b3c69c34bb89c2a947e38bb4-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/41447511b3c69c34bb89c2a947e38bb4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Adithya<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-705">2011/03/08</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>What do these kind of error mean ??? I m executing a kernel built
 for realview board. What are the areas i can look into for resolving 
these kind of errors.</p>
<p>Uncompressing Linux…qemu: fatal: Trying to execute code outside RAM or ROM at 0xbe800000</p>
<p>R00=7011070d R01=0000076d R02=411a4c00 R03=e012bce2<br>
R04=00000000 R05=00000028 R06=70110667 R07=80007efd<br>
R08=70111c1c R09=701116f0 R10=7011272c R11=70111604<br>
R12=7001b67b R13=00000000 R14=70010014 R15=be800000<br>
PSR=800001db N— A und32<br>
Aborted (core dumped)</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-706">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-16" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-706">2011/03/08</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>See <a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-304" rel="nofollow">one of the comments above yours</a> for the difference between the two toolchains.</p>
<p>About your error: R15 is the program counter, so a piece of code 
tried to jump to a strange address. R14 is the Link Register that 
usually holds the return address when you call a function. Based on the 
output, the code that generates the error is the one that uncompresses 
the kernel image into another location. I think you can try some of the 
following:<br>
Try to use the “-m” option to set the memory size of QEMU to a bigger or smaller value.<br>
Check the memory map of the realview board to see where ROM and RAM are and what’s at 0xbe800000.<br>
Debug QEMU with GDB (also check the end of <a href="http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/" rel="nofollow">this blog post</a> for some information on debugging QEMU execution) to see what’s the initial situation and when the problem happens.</p>
<p>In my experience these problems are usually related to a mismatch 
between the real memory size and the memory size that the software 
thinks to have available.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-707">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-41447511b3c69c34bb89c2a947e38bb4-4" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/41447511b3c69c34bb89c2a947e38bb4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Adithya<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-707">2011/03/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello, the missing thing was i disabled MMU support for the kernel during the build.</p>
<p>I enabled it and now, i get the output:<br>
“Uncompressing Linux … , booting Linux”<br>
and it probably goes into an infinite loop.</p>
<p>When i gdb into it, I find it stops at:</p>
<p>“__delay() at arch/arm/lib/delay.S”</p>
<p>and now i do bt to find this</p>
<p>#1 panic_blink_one_second<br>
#2 panic(Attempted to kill idle task)<br>
#3 do exit<br>
#4 die<br>
#5 do_kernel_fault<br>
#6 do_page_fault<br>
#7 do_translation_fault<br>
#8 do_DataAbort<br>
#9 __dabt_svc in arch/arm/kernel/entry-armv.S<br>
BT Stoppped: Frame did not save the PC.</p>
<p>Now what is leading the kernel jump to:  __dabt_svc<br>
and How can i resolve it?</p>
<p>Thanx in Advance</p>
<p>Regards<br>
Adithya</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-710">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-41447511b3c69c34bb89c2a947e38bb4-5" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/41447511b3c69c34bb89c2a947e38bb4.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Adithya<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-710">2011/03/10</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hey Balau,</p>
<p>Finally, i sucessfully booted up ARM Realview Pbx A9 with multicore 
on Qemu with Busybox. It would not have been possible without your 
guidance. I thank you a lot for the prompt help and would look for 
further collaboration if i get stuck with some problems in future. 
Please keep up the great articles you write.</p>
<p>Happy Blogging!<br>
Thanks and Regards,<br>
B. Adithya</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-732">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e5216008e0b231a760d20d22b01c4328-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e5216008e0b231a760d20d22b01c4328.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">kaiwan<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-732">2011/03/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Hey, awesome blog! Thanks for all the useful inputs &amp; keep ‘em coming.</p>
<p>Am hoping you/others can help me with a QEMU-initrd related issue:</p>
<p>Am having a consistent issue with attempting to mount a root filesystem using initrd<br>
on the QEMU emulator.</p>
<p>This is on an x86 host w/ Ubuntu 10.10; the qemu guest is also x86 based (am using the 2.6.35-11 kernel).<br>
I built a simple initrd image following the instructions you gave above, basically, doing:<br>
find rootfs/ | cpio -o –format=newc &gt; initrd.img .</p>
<p>Kernel config: made sure the these options were enabled:<br>
CONFIG_BLK_DEV_LOOP<br>
CONFIG_BLK_DEV_RAM<br>
CONFIG_BLK_DEV_NBD<br>
CONFIG_SATA_PMP=y<br>
CONFIG_SATA_AHCI=y<br>
CONFIG_AUTOFS_FS<br>
CONFIG_AUTOFS4_FS<br>
CONFIG_EXT3_FS=y</p>
<p>Then:<br>
$ qemu -kernel arch/x86/boot/bzImage -curses -append “root=/dev/ram rdinit=/bin/busybox” -initrd ./initrd.img<br>
…</p>
<p>For whatever reason, I get the (usual <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley">  panic message “VFS: Unable to mount root fs on unknown-block(1,0)”…</p>
<p>I even poked some instrumentation (printk’s -they start with ‘K:’ below) into the kernel to help debug the situation.<br>
Here’s the dump when it panics:<br>
…<br>
   [    2.377397] K:initrd_load:131:<br>
   [    2.477497] K:prepare_namespace:424:<br>
m-devel@re377970] K:mount_block_root:248: fs_names = ext3 name=/dev/root<br>
   [    2.384533] K:mount_block_root:248: fs_names = ext3 name=/dev/root<br>
   [    2.385757] K:mount_block_root:248: fs_names = ext3 name=/dev/root<br>
              86647] K:mount_block_root:248: fs_names = ext3 name=/dev/root<br>
   [    2.392216] List of all partitions:<br>
   [    2.392605] 0b00         1048575 sr0 driver: sr<br>
   [    2.392751] No filesystem could mount root, tried:  ext3 vfat msdos iso9660<br>
   [    2.393038] Kernel panic – not syncing: VFS: Unable to mount root 
fs on unknown-block(1,0)                                    1<br>
   [    2.393407] Pid: 1, comm: swapper Not tainted 2.6.35.11 #29         s     secs      393511] Call Trace:<br>
   [    2.393767]  [] ? printk+0xf/0×11<br>
   [    2.393948]  [] panic+0x4b/0xb9<br>
   [    2.394128]  [] mount_block_root+0×183/0×192<br>
   [    2.394220]  [] ? T.1053+0×38/0x3e<br>
   [    2.494323]  [] mount_root+0x5a/0×78<br>
   [    2.394400]  [] prepare_namespace+0x1e8/0×260<br>
   [    2.394481]  [] kernel_init+0×252/0x2b2<br>
   [    2.494561]  [] ? kernel_init+0×0/0x2b2<br>
   [    2.494638]  [] kernel_thread_helper+0×6/0×10   </p>
<p>Looking at existing forums, this seems to be a pretty common issue.<br>
Would greatly appreciate a solution / inputs on the same.</p>
<p>TIA,<br>
kaiwan.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-733">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-17" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-733">2011/03/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I tried to reproduce what you did, and I think the problem may be in the creation of the initrd image.<br>
Instead of this:<br>
<code>$ find rootfs/ | cpio -o –format=newc &gt; initrd.img</code><br>
Try to do this:<br>
<code>$ cd rootfs<br>
$ find . | cpio -o –format=newc &gt; ../initrd.img</code></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-735">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e5216008e0b231a760d20d22b01c4328-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e5216008e0b231a760d20d22b01c4328.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">kaiwan<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-735">2011/03/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Balau,</p>
<p>(wrt comment # 733 above):<br>
Yes, it worked!<br>
The pathnames being wrong it wasn’t working, i think… (prefixed w/ rootfs/ ).</p>
<p>Thanks v much!<br>
Best.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-736">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e5216008e0b231a760d20d22b01c4328-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e5216008e0b231a760d20d22b01c4328.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">kaiwan<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-736">2011/03/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>(Continuing wrt comment # 734 above):</p>
<p>Interestingly, one can see the path if the verbose option (-v) to cpio is used:<br>
# find . | cpio -o –format=newc -v &gt; ../initrd.img<br>
.<br>
./dev<br>
./dev/mem<br>
./dev/kmem<br>
./dev/null<br>
./dev/zero<br>
./dev/random<br>
…<br>
# </p>
<p>So i guess it’s a good idea to use this option.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-764">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7d5cb0dcf6e13919e03f6f8a2f88fcb3-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7d5cb0dcf6e13919e03f6f8a2f88fcb3.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">alex<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-764">2011/04/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi All</p>
<p>Could you please tell how to create initrd image from basic file system to use output in qemu.<br>
Every time it is showing panic</p>
<p>What are points are considered,in kernel &amp; file system while compiling<br>
Let me know some inputs</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-765">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-18" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-765">2011/04/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Alex,<br>
if you don’t have already, check my other blog posts about creating and booting a minimal working filesystem:<br>
<a href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/" rel="nofollow">Busybox for ARM on QEMU</a><br>
<a href="http://balau82.wordpress.com/2010/04/12/booting-linux-with-u-boot-on-qemu-arm/" rel="nofollow">Booting Linux with U-Boot on QEMU ARM</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-769">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-695015e9dca51587154bc85f69d2c73c-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/695015e9dca51587154bc85f69d2c73c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Uday Shankar<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-769">2011/04/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello, I am Uday shankar S<br>
I have the following problem<br>
When i execute the following line<br>
make ARCH=arm CROSS_COMPILE=arm-none-eabi-gcc-  all     (i get following error)</p>
<p>make: arm-none-eabi-gcc-gcc: Command not found<br>
  CHK     include/linux/version.h<br>
  CHK     include/generated/utsrelease.h<br>
make[1]: `include/generated/mach-types.h’ is up to date.<br>
  CC      kernel/bounds.s<br>
/bin/sh: arm-none-eabi-gcc-gcc: command not found<br>
make[1]: *** [kernel/bounds.s] Error 127<br>
make: *** [prepare0] Error 2</p>
<p>Have i installed a different tool chain??</p>
<p>Please help me solve this problem</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-770">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-19" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-770">2011/04/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>You have to run the “<code>make</code>” command with “<code>CROSS_COMPILE=arm-none-eabi-</code>” without the “<code>gcc</code>“, because it is appended later inside the Makefile.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-783">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-915d09436b6ac94a94cfa9afa6758553-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/915d09436b6ac94a94cfa9afa6758553.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">enzofang<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-783">2011/05/06</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi,</p>
<p> i just follow the tutorial,compile the kernel and make rootfs,<br>
and everything seems OK,but at the end i can’t see “hello world”</p>
<p>NET: Registered protocol family 1<br>
RPC: Registered udp transport module.<br>
RPC: Registered tcp transport module.<br>
RPC: Registered tcp NFSv4.1 backchannel transport module.<br>
Trying to unpack rootfs image as initramfs…<br>
Freeing initrd memory: 632K<br>
NetWinder Floating Point Emulator V0.97 (double precision)<br>
Installing knfsd (copyright (C) 1996 <a href="mailto:okir@monad.swb.de">okir@monad.swb.de</a>).<br>
JFFS2 version 2.2. (NAND) © 2001-2006 Red Hat, Inc.<br>
ROMFS MTD (C) 2007 Red Hat, Inc.<br>
msgmni has been set to 247<br>
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)<br>
io scheduler noop registered<br>
io scheduler anticipatory registered (default)<br>
io scheduler deadline registered<br>
io scheduler cfq registered<br>
CLCD: unknown LCD panel ID 0×00001000, using VGA<br>
CLCD: Versatile hardware, VGA display<br>
Console: switching to colour frame buffer device 80×60<br>
brd: module loaded<br>
smc91x.c: v1.1, sep 22 2004 by Nicolas Pitre<br>
eth0: SMC91C11xFD (rev 1) at c8800000 IRQ 25 [nowait]<br>
eth0: Ethernet addr: 52:54:00:12:34:56<br>
mice: PS/2 mouse device common for all mice<br>
TCP cubic registered<br>
NET: Registered protocol family 17<br>
VFP support v0.3: implementor 41 architecture 1 part 10 variant 9 rev 0<br>
Freeing init memory: 100K<br>
input: AT Raw Set 2 keyboard as /devices/fpga:06/serio0/input/input0<br>
input: ImExPS/2 Generic Explorer Mouse as /devices/fpga:07/serio1/input/input1</p>
<p>the kernel does not give me panic or error message ,i don’t know what’s wrong,  can you help me solve the problem</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-784">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-20" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-784">2011/05/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Instead of the command that I wrote in the post, try this one:<br>
<code>$ qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd 
rootfs -append "root=/dev/ram rdinit=/test console=ttyAMA0" -serial 
stdio</code><br>
It should print everything on your terminal instead of on the black window.<br>
Also, try to change “test.c” to do nothing and return, it should give 
you a “Kernel panic” message and you will know it is being executed.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-785">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-915d09436b6ac94a94cfa9afa6758553-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/915d09436b6ac94a94cfa9afa6758553.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">enzofang<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-785">2011/05/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau，<br>
thanks for your answer. I found i lost “\n” in the printf statement<br>
So the kernel doesn’t print the hello  message.Now it works fine</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-789">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-ba243ec42e18dc96a66624bd840de6f8-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/ba243ec42e18dc96a66624bd840de6f8.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hienhoang<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-789">2011/05/10</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>First of all, many thanks for your interesting post. Currently, I am 
working on a project about Android. The project is to port Android to 
MIPS platform. Since I don’t have a real kit, I want to use QEMU 
instead. As I know, the procedure of porting Android to MIPS platform is
 quite similar to the way to port Linux to ARM. I have to compile the 
Linux kernel for MIPS platform (in my case, I chose Malta board ) as the
 way to compile Linux kernel for ARM. Also, I have to build  a root file
 system. But when I use the command which is similar to your guide, it 
didn’t work. the message shown “kernel panic….”.  I wonder if QEMU 
supports for emulating Android on MIPS platform or not? if yes, how can I
 port Android to MIPS using QEMU? Wish you can help me. Thank you again.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-790">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-21" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-790">2011/05/12</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Unfortunately I have no experience on MIPS architectures. QEMU 
should emulate the Malta and it should at least find the filesystem, but
 I don’t know if the full Android could work. Without knowing anything 
my guess is that the toolchain (gcc, libc, …) creates binaries that 
can’t be executed by that configuration of Linux kernel.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-793">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-3c199212f8476bc47baede0e208be877-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/3c199212f8476bc47baede0e208be877.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Ramesh Dixit<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-793">2011/05/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Sir,<br>
I’m trying to make menuconfig a kernel, but I get this error:<br>
Code:<br>
basement:/usr/src/linux# make menuconfig<br>
/usr/bin/ld: cannot find -lncurses<br>
collect2: ld returned 1 exit status</p>
<p>&gt;&gt; Unable to find the Ncurses libraries.<br>
&gt;&gt;<br>
&gt;&gt; You must install ncurses-devel in order<br>
&gt;&gt; to use ‘make menuconfig’</p>
<p>make[2]: *** [scripts/lxdialog/ncurses] Error 1<br>
make[1]: *** [menuconfig] Error 2<br>
make: *** [menuconfig] Error 2.<br>
So Pls suggest me How to install ncurses..?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-794">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-22" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-794">2011/05/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>You have to install the “ncurses” development library that is used to display the configuration menus.<br>
if you have Ubuntu the command is “<code>sudo apt-get install libncurses5-dev</code>“, with Debian it should be “<code>aptitude install libncurses5-dev</code>” and it should be similar for other distributions.<br>
Then you run in the Linux source tree “<code>make distclean</code>” to remove all the compilation output, and try to run again “<code>make menuconfig</code>“.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-796">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-3c199212f8476bc47baede0e208be877-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/3c199212f8476bc47baede0e208be877.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Ramesh Dixit<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-796">2011/05/24</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Sir.<br>
Thank you for your help, But now I am facing one more problem, after 
typing the last command that is qemu-system-arm………..-append 
“root=/dev/ram rdinit=/hello” The qemu(black window) window ll appears, 
but it could display anything just a blackwindow, thats all. I have used
 linux kernel version 2.6.39. what might be the problem…? i ve installed
 qemu kvm extras by sudo apt get install,</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-797">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-23" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-797">2011/05/24</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Try to add the “-serial stdio” option to the QEMU command to show the emulated serial port output on the terminal:<br>
<code>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append "root=/dev/ram rdinit=/test" -serial stdio</code><br>
try also to add “console=ttyAMA0″ to redirect the kernel messages to the serial port:<br>
<code>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd 
rootfs -append "root=/dev/ram rdinit=/test console=ttyAMA0" -serial 
stdio</code><br>
If you need the messages to show inside the window, maybe using “console=tty1″ could work.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-801">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-3c199212f8476bc47baede0e208be877-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/3c199212f8476bc47baede0e208be877.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Ramesh Dixit<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-801">2011/05/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Sir,<br>
        I have tried both the options but still I could not see anything on qemu window(just a blank back screen). Pls help…..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-802">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-24" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-802">2011/05/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The options that I gave you don’t display anything in the qemu 
black window, but they display it in the terminal window (the one where 
you run the “<code>qemu-system-arm ...</code>” command). What do you see in the terminal window? Do you see at least  “<code>Uncompressing Linux... done, booting the kernel.</code>” message?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-807">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-3c199212f8476bc47baede0e208be877-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/3c199212f8476bc47baede0e208be877.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Ramesh Dixit<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-807">2011/06/02</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Ya sir, I got that msg….</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-808">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-25" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-808">2011/06/02</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I tried right now to compile kernel 2.6.39 and it worked for me 
(so the version is not the problem), using both CodeSourcery toolchains:
 <code>arm-none-eabi-</code> or <code>arm-none-linux-gnueabi-</code>.<br>
Maybe the “make distclean” I suggested before could be the problem, 
because it didn’t remove something; try to redo everything running also 
“make distclean ARCH=arm”, and then remember to use “ARCH=arm” on all 
“make” commands.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-811">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-dda9a72a42f234392be5c2350e2cd52f-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/dda9a72a42f234392be5c2350e2cd52f.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://spitman.azdaa.com/" rel="external nofollow" class="url">Mehran Spitman</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-811">2011/06/05</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Thanks for your useful post. I’m working on a project which I have to
 compile a series of programs for an ARM based system. I compiled Linux 
kernel, but my question is how can i compile those specified programs 
for this kernel? I see how you compile your test c program for target 
platform. can i use arm-none-linux-gnueabi-gcc for compiling for example
 “lighttpd”? how can I enforce the programs to use 
arm-none-linux-gnueabi-gcc instead of native gcc on my host Linux?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-812">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-26" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-812">2011/06/06</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>You can take a look at this blog post: <a href="http://balau82.wordpress.com/2010/08/17/debugging-arm-programs-inside-qemu/" rel="nofollow">Debugging ARM programs inside QEMU</a>, that cross-compiles a simple hello-world program using “<code>./configure --host=arm-none-linux-gnueabi</code>”
 when compiling. If you need many packages that depends on many 
libraries, I think that the simplest way to do it is by using a 
distribution that already provides binary packages compiled for ARM, 
such as <a href="http://balau82.wordpress.com/2010/10/17/trying-debian-for-arm-on-qemu/" rel="nofollow">Debian</a> or <a href="http://www.linaro.org/downloads/" rel="nofollow">Ubuntu</a>.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-814">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7c4d3e21b549a74437497409ed3c48ed-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7c4d3e21b549a74437497409ed3c48ed.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">cpalm<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-814">2011/06/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I was able to compile and run the kernel image as instructed, i 
was also able to add the rfs as explained in your other article, but 
when i pass the option -cpu cortex-a8 i get an error in the console 
“unrecognized/unsupported processor variant”. when i normally boot 
without this option at the # prompt when type uname -a i see that it has
 emulated armv5. But how can add support for armv7?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-815">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-27" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-815">2011/06/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Newer versions of QEMU have support for the <a href="http://www.arm.com/products/tools/development-boards/versatile.php" rel="nofollow">Versatile Platform Baseboard with Cortex-A8</a> using the option “<code>-M realview-pb-a8</code>” without the “<code>-cpu</code>”
 option. My QEMU is installed from the Ubuntu 10.10 package, and the 
package version is “0.12.5+noroms-0ubuntu7.5″. I think that updating 
your QEMU installation should add support for armv7, and if it doesn’t 
because your distribution has not yet the updated packages, you should 
try compiling from source, <a href="http://wiki.qemu.org/Download" rel="nofollow">downloading the latest release</a>.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-816">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7c4d3e21b549a74437497409ed3c48ed-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7c4d3e21b549a74437497409ed3c48ed.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">cpalm<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-816">2011/06/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello balu,<br>
thanks for your quick response. I have recompiled qemu 0.14 from the 
sources, i also see the option realview-pb-a8 when i type 
qemu-system-arm -M ?. For this to work do i have to recompile the kernel
 with realview_defconfig ? When i executed with this option with the 
kernel i have compiled with your instructions it just displays blank 
screen. Any idea?</p>
<p>thanks in advance<br>
cpalm</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-817">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7c4d3e21b549a74437497409ed3c48ed-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7c4d3e21b549a74437497409ed3c48ed.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">cpalm<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-817">2011/06/16</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hello balau<br>
okay, i did recompile the kernel with realview_defconfig and executed 
the below command (i.e. as mentioned by you) it works (sort of)</p>
<p>qemu-system-arm -M realview-pb-a8 -m 128M -kernel zImage-realview</p>
<p>kernel boots with error messages. Then i run this command </p>
<p>qemu-system-arm -M realview-pb-a8 -m 128M -kernel zImage-realview -initrd rootfs -append “root=/dev/ram rdinit=/test”</p>
<p>then i simply get a blank screen.Any tips here?</p>
<p>thanks in advance<br>
cpalm</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-818">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-28" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-818">2011/06/16</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>It’s strange that adding these options makes the screen go black, because they act only later during the boot process.<br>
You could also try the “-serial stdio” option OR the “-nographic” option (Ctrl-A and x to exit when there’s no window to close).<br>
Anyway it could be also useful to trace what’s happening at the beginning. Try to debug in this way:</p>
<ul>
<li>- run QEMU with both options “-s -S” to make it start in a stopped state waiting for a gdb connection</li>
<li>- launch a debugger such as “ddd –debugger arm-none-eabi-gdb” or the “arm-none-linux-gnueabi-gdb” equivalent</li>
<li>- connect qo QEMU using the “target remote localhost:1234″ command</li>
<li>- then use the “stepi” instruction to check what jumps are made.</li>
</ul>
<p>Maybe something strange will pop up such as a jump to a strange address, an exception or a jump to non-initialized memory.<br>
It could also be that QEMU does not support entirely the realview-pb-a8 
platform and some hardware that is not emulated correctly breaks the 
kernel boot. Check the Linaro QEMU and Kernel releases, they could have 
up-to-date packages that support Cortex-A8 and Cortex-A9.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-825">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-418fbff5b770491960488632896822bf-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/418fbff5b770491960488632896822bf.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">czar x<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-825">2011/06/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi,<br>
   i have tried building the kernel .36 and .39.1 both using the method you have mentioned.<br>
   but no matter what i do it will never display the boot messages<br>
qemu-system-arm -M versatilepb -m 128M -kernel arch/arm/boot/zImage -serial stdio -append “console=ttyAMA0″<br>
Uncompressing Linux… done, booting the kernel.</p>
<p>i have even tried to debug after enabling debug info (make 
menuconfig), it doesn’t break for start_kernel break point as u have 
mentioned in one of  your comments.</p>
<p>Please help me to get the boot messages.</p>
<p>thanks<br>
czar</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-827">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-418fbff5b770491960488632896822bf-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/418fbff5b770491960488632896822bf.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">czar x<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-827">2011/06/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi<br>
    Heres a bit debugging update after i click stepi following is the 
location where the ddd (debugger) stops as u can see the kernel compiled
 is 2.6.39.1<br>
———————-DDD command————————<br>
Program received signal SIGINT, Interrupt.<br>
calibrate_delay_converge () at init/calibrate.c:132<br>
/media/15Gigs/kernel_work/linux-2.6.39.1/init/calibrate.c:132:3960:beg:0xc001deec<br>
(gdb) stepi</p>
<p>——————————————————————-<br>
Source at that particular location is:<br>
130     /* wait for “start of” clock tick */<br>
131     ticks = jiffies;<br>
132     while (ticks == jiffies)   /* czar comment here is where ddd points to */<br>
133         ; /* nothing */<br>
134     /* Go .. */<br>
135     ticks = jiffies;</p>
<p>hope this helps you to resolve my issue.</p>
<p>thanks<br>
czar</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-829">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-29" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-829">2011/06/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I just tried to compile kernel 2.6.39.1 and it works for me, so 
maybe the problem is QEMU. what version do you have? My QEMU is 
installed from the Ubuntu 10.10 package, and the package version is 
“0.12.5+noroms-0ubuntu7.5″.  As an alternative you can try to compile 
QEMU from source and see if something changes.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-830">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-418fbff5b770491960488632896822bf-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/418fbff5b770491960488632896822bf.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">czar x<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-830">2011/06/24</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
    u r expert.<br>
    it seems problem was indeed with qemu itself ubuntu10.04 and qemu version 0.12.3<br>
    i have download qemu both from linaro ( 0.14.50 qemu-linaro 2011.04-1) and qemu.org (0.14.1)</p>
<p>    both worked fine.<br>
   thanks for support</p>
<p>   I would like to know if you can provide some tutorial on testing kernel (ltp) over qemu and some device drivers.<br>
   it would be great addition to this series.</p>
<p>   i will try the u-boot next.</p>
<p>thanx again for gr8 support</p>
<p>czar x</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-831">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-30" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-831">2011/06/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Glad to help! I am not familiar with<a href="http://ltp.sourceforge.net/" rel="nofollow"> Linux Test Project</a>
 if that’s what you meant by “lpt”, so obviously I can’t provide 
tutorials! But I’m going to take a look at it when I find some time. 
About device drivers, I think that QEMU offers emulation of peripherals 
that have already mature drivers in the kernel. It could be used to 
start developing modules that interact with hardware through other 
drivers, but the latest stages of developing and testing must be 
necessarily done on real hardware.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-832">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-418fbff5b770491960488632896822bf-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/418fbff5b770491960488632896822bf.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">czar x<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-832">2011/06/28</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi,<br>
   Yes, i meant Linux Test Project (ltp.sourceforge.net) since most of 
the time we are in scarcity or unavailability of the real hardware. QEMU
 gives an opportunity to test those modules.<br>
In my personal interest to explore kernel i have planned to venture into<br>
a) Linux testing<br>
b) design device driver for existing peripheral following Greg KH’s book (Linux Device Driver) <a href="http://lwn.net/Kernel/LDD3/" rel="nofollow">http://lwn.net/Kernel/LDD3/</a></p>
<p>I had pointers like ltp and kgtp (<a href="http://kgtp.googlecode.com/" rel="nofollow">http://kgtp.googlecode.com/</a>) which can be used for testing linux kernel.<br>
I have little x86 knowledge and comfortable with ARM systems.</p>
<p>Hope u can still answer my few questions in the areas mentioned above.</p>
<p>thanx once again</p>
<p>czar</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-847">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-78f7f32c43a07f38f584e8555a10cc1f-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/78f7f32c43a07f38f584e8555a10cc1f.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://none/" rel="external nofollow" class="url">Piyush Pandey</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-847">2011/07/05</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hello Balau</p>
<p>I was trying to run the cross compiled linux kernel for ARM 
architecture in the Qemu armulator and for that I followed the steps on 
your blog over here and in the same way as you have described.</p>
<p>But when I run the following command :</p>
<p>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd 
/home/piyush/Documents/Embedded/ARM/ARM\ example\ codes/rootfs -append 
“root=/dev/ram rdinit=/test”</p>
<p>I get this error in the console of my Qemu ARM emulator:</p>
<p>info rcu detected cpu0 stall (t=10000 jiffies)<br>
info rcu detected cpu0 stall (t=40000 jiffies)<br>
info rcu detected cpu0 stall (t=80000 jiffies)</p>
<p>and nothing happens at all after that.</p>
<p>Please tell me where is the error and how to resolve it as I am very near to the running kernel of my ARM.</p>
<p>Thank you</p>
<p>Piyush Pandey</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-848">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-31" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-848">2011/07/05</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello,<br>
Could you please check if the output of the following commands is similar to yours?<br>
<code>$ file rootfs<br>
rootfs: ASCII cpio archive (SVR4 with no CRC)<br>
$ cpio -t &lt; rootfs<br>
test<br>
1281 blocks</code><br>
the “1281″ could be different, and also the “SVR4 with no CRC” but roofs should be a cpio archive with “test” as its only file.<br>
If the output you get is different, then rootfs has not been generated correctly.<br>
Also, what version of QEMU are you using?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-851">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-78f7f32c43a07f38f584e8555a10cc1f-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/78f7f32c43a07f38f584e8555a10cc1f.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://none/" rel="external nofollow" class="url">Piyush Pandey</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-851">2011/07/06</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello Balau</p>
<p>I checked what you suggested and the output is as follows:</p>
<p>$ file rootfs<br>
rootfs: ASCII cpio archive (SVR4 with no CRC)<br>
$ cpio -t  rootfs</p>
<p>Also I am using the following Qemu version:</p>
<p>version  0.5.1-20100120_010601-rothera</p>
<p>So Balau where is the problem . Please help me Bro.</p>
<p>Thanks</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-852">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-32" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-852">2011/07/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Your problems are:<br>
- the “<code>rootfs</code>” file has not been created correctly. There’s no “<code>test</code>” file inside it. Please try to redo the “<code>echo test | cpio -o --format=newc &gt; rootfs</code>” command inside the directory that contains “<code>test</code>“.<br>
- your QEMU version is 7 years old. I can’t be sure that my tutorial will work on it.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-854">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-78f7f32c43a07f38f584e8555a10cc1f-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/78f7f32c43a07f38f584e8555a10cc1f.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://none/" rel="external nofollow" class="url">Piyush Pandey</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-854">2011/07/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hello Balau </p>
<p>are you using the ubuntu Linux , if yes than how you installed the latest qemu on the ubuntu linux .</p>
<p>Please tell me about that, because I have searched every where and no where found the qemu latest installation on the ubuntu.</p>
<p>Thank you</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-856">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-33" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-856">2011/07/10</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>If you have a newer Ubuntu version (from 10.4 Lucid Lynx for example) you should have the package you need: <a href="http://packages.ubuntu.com/lucid/qemu-kvm-extras" rel="nofollow">http://packages.ubuntu.com/lucid/qemu-kvm-extras</a><br>
Otherwise you need to download QEMU source code from here: <a href="http://wiki.qemu.org/Download" rel="nofollow">http://wiki.qemu.org/Download</a> , and compile it.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-924">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-88e5888a6bca766743c9bb9e8ec9906c-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/88e5888a6bca766743c9bb9e8ec9906c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Somesh<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-924">2011/08/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>A very useful and concise explanation in the blog.</p>
<p>I tried carrying out the steps given in your blog. Just to reiterate, following is what I did,</p>
<p>- installed Code sourcery tool chain (arm-none-linux-gnueabi- prefixed binaries obtained)</p>
<p>- compiled linux 2.6.33 with the installed tool chain as follows,<br>
  $ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- all</p>
<p>- got zImage from the above compilation</p>
<p>- created a hello world file, cross compiled (with -static and -O0 flag) and created rootfs,<br>
   $ echo test.out | cpio -o –format=newc &gt; rootfs</p>
<p>- ran the following command to check proper creation of rootfs<br>
   $ file test.out<br>
       &amp;<br>
   $ cpio -t &lt; rootfs<br>
   both give proper output as mentioned in a couple of replies of your post</p>
<p>- finally,<br>
  $ qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append "root=/dev/ram rdinit=/test.out"</p>
<p>The booting ends with a kernel panic with kernel unable to mount the 
rootfs along with a back trace. Following is a snippet of message 
towards the end,</p>
<p>"<br>
List of all partitions:<br>
No filesystem could mount root, tried: ext3 vfat msdos iso9660<br>
Kernel panic – not syncing: VFS: Unable to mount root fs on unknown-block(1,0) 1<br>
"</p>
<p>Also I tried emulating test.out with qemu-arm and it gives expected behavior of printing message and waiting in while(1)</p>
<p>If rootfs itself has failed to mount during kernel there would be no 
question of running "test.out". Do you have any inputs on how to solve 
this?</p>
<p>–thanks in advance–</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-925">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-34" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-925">2011/08/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The problem is not in the compilation of test because Linux never goes<br>
as far as executing it: it doesn’t even mount the rootfs. The<br>
filesystem seems OK, so I think the problem is in the kernel<br>
compilation or configuration.</p>
<p>In my case, if I try to give QEMU a bad filesystem as rootfs, I get the message:</p>
<p><code>List of all partitions:<br>
No filesystem could mount root, tried:  ext2 cramfs minix romfs<br>
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(1,0)</code></p>
<p>In your description you didn’t include the kernel configuration (make<br>
menuconfig). Have you configured the kernel in some custom way, such<br>
as for example enabling/disabling some filesystem support?</p>
<p>Remember that if you need to go back to an original state of the<br>
kernel source, you must run “<code>make distclean ARCH=arm</code>”</p>
<p>Hope this helps.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-927">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-88e5888a6bca766743c9bb9e8ec9906c-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/88e5888a6bca766743c9bb9e8ec9906c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Somesh<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-927">2011/08/30</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Missed that point.</p>
<p>After configuring with the versatile defconfig file, I tried booting 
the image with loadable module support disabled. Because I am using 
arm-none-linux-gnueabi-* tool chain I have not selected option for “Use 
ARM EABI to compile kernel” under ‘Kernel Features’ (I tried booting 
with the option selected also in a different run).</p>
<p>The “Initial RAM file system and RAM disk (initramfs/initrd) support”
 is still selected under ‘General Setup’ of menuconfig. Although no 
value is there in “Initramfs source file(s)” under the same heading.</p>
<p>The kernel still fails to mount the rootfs with the test binary.</p>
<p>Would it make a difference in booting if kernel is compiled with 
arm-none-eabi-* tool chain set and arm-none-linux-gnueabi-* tool chain 
set?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-928">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-35" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-928">2011/08/30</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>You have to enable ARM EABI if you want to execute user-space 
programs compiled with toolchains from CodeSourcery, Emdebian or Linaro.<br>
It’s OK that the “initramfs source file(s)” option is empty, because it 
is used to embed the rootfs image inside the zImage, but in our case we 
supply it with QEMU.<br>
The two toolchains you mention should behave in the same way when compiling Linux kernel.</p>
<p>I don’t know where the problem could be. The kernel version is clear,
 and I suppose the toolchain that you are using is quite new. Maybe the 
QEMU version is too old or the Linux distribution changed it and broke 
it. I’m currently using:<br>
<code>$ qemu-system-arm --version<br>
QEMU emulator version 0.14.1 (Debian 0.14.1+dfsg-3), Copyright (c) 2003-2008 Fabrice Bellard</code><br>
You can try to download and compile QEMU from source code, some instructions <a href="http://balau82.wordpress.com/2010/08/17/debugging-arm-programs-inside-qemu/" rel="nofollow">here</a>.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-929">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-88e5888a6bca766743c9bb9e8ec9906c-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/88e5888a6bca766743c9bb9e8ec9906c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Somesh<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-929">2011/08/31</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Finally I could get the setup to work. The mistake was very silly,</p>
<p>(mistake in my original post)<br>
-append “root=/dev/ram initrd=/test”</p>
<p>which should have been,<br>
-append “root=/dev/ram rdinit=/test”</p>
<p>I created a minimal file system using your blog post on busybox and 
changed the rdinit=/bin/sh to rdinit=/test and checked it. Thats when I 
observed the V “diff” V and I don’t know how I missed it.</p>
<p>So, the kernel finally boots and greets back!!</p>
<p>Thanks for patience in your replies. I will definitely be reading other posts in your blog.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-989">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7a7b33b266e38633210b339b0c9031b6-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7a7b33b266e38633210b339b0c9031b6.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://techsparkz.com/" rel="external nofollow" class="url">maximus</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-989">2011/10/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balau<br>
i recently started with linux…<br>
there are few questions i had to ask..<br>
1)this kernel which we compiled , is it common across all the 
distros(ubuntu,suse) for a particular platform(x86,arm)??if yes than 
what is modified between distros??<br>
2)any inputs on how to create own distro?<br>
thnx….</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-990">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-36" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-990">2011/10/08</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>1) The kernel source tree contains code for many platforms (x86, 
arm, mips, powerpc, …) and during the configuration step it selects the 
architectures. Every distribution can modify the kernel and ship it in a
 particular configuration as long as they comply with the GPL. For 
example if you download Debian or Ubuntu source package for the kernel, 
in the “debian” folder there should be the modifications.<br>
2) Any modern distro provides an user friendly installation, a package 
manager, a rich package repository, package upgrades and quick security 
updates. I suggest thinking if you REALLY need to create another distro 
or stick with something that already exists. If you really want to 
create your own distro, derive from Debian, so that much of the work is 
already done.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1030">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/picture_002.gif" class="avatar avatar-48" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://www.facebook.com/profile.php?id=838248683" rel="external nofollow" class="url">Horaira Khan</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1030">2011/11/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi,</p>
<p>i run the compiled cross compiled kernel linux-2.6.33 using command<br>
qemu-system-arm -M versatilepb -m 128M -kernel zImage<br>
i am not getting output as expected “kernel panic”. I am getting below output<br>
INFO: RCU detected CPU 0 Stall  </p>
<p>i have tried with below cross compilers<br>
 CodeSourcery/Sourcery_G++_Lite/arm-2009q3-67/bin/arm-none-linux-gnueabi-<br>
 CodeSourcery/Sourcery_G++_Lite/arm-2009q3-68/bin/arm-none-eabi-</p>
<p>My host system is ubuntu 10.04.2<br>
uname -a<br>
Linux horaira-laptop 2.6.32-28-generic #55-Ubuntu SMP Mon Jan 10 21:21:01 UTC 2011 i686 GNU/Linux</p>
<p>One more thing what is the difference between<br>
arm-none-linux-gnueabi- and arm-none-eabi-</p>
<p>Regards<br>
Horaira</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1032">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-37" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1032">2011/11/03</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I don’t remember having seen that error before. From a rapid search <a href="http://old.nabble.com/RCU-detected-CPU-0-stall-after-panic-on-sparc64-td26756085.html" rel="nofollow">here</a>
 they say it could be OK to have RCU detect a stall after a panic. Are 
you sure the “kernel panic” message isn’t somewhere before the last 
messages? How is the kernel configured?</p>
<p>The difference between arm-none-linux-gnueabi- and arm-none-eabi- is mainly in the libraries, you can check <a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-304" rel="nofollow">this comment here</a> and <a href="https://sourcery.mentor.com/sgpp/lite/arm/portal/kbentry34" rel="nofollow">Mentor’s FAQ on the toolchains</a> for more clarifications.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1035">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/picture.gif" class="avatar avatar-48" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://www.facebook.com/profile.php?id=838248683" rel="external nofollow" class="url">Horaira Khan</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1035">2011/11/04</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Thanks Balau .</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1051">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-936892438887e2eb7c1c8ed8fd22d210-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/936892438887e2eb7c1c8ed8fd22d210.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Abadhesh<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1051">2011/11/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi balau, U r doing great….I hav a problem that i want to porting
 ARM in linux system. So i need all the steps to do it, if u will help 
me, i will be greatful to u. So pls help me all the steps to run a LPC 
2129 (Philips Microcontroller)program in linux environment. Already i 
have executed the program in Keil3. but i would like to execute the 
program in linux with the help off Boot Loader. So i need the guide from
 the starting. So Plz help me.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1053">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-38" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1053">2011/11/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I’m not sure about what you are trying to do.<br>
It seems to me LPC2129 is a microcontroller with an ARM7TDMI inside; it 
means that Linux can’t be run inside that chip, but maybe uCLinux can.</p>
<p>I don’t think I can help you, but you can find more help here: <a href="http://www.lpclinux.com/LPC2000/WebHome" rel="nofollow">http://www.lpclinux.com/LPC2000/WebHome</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1056">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-74ae9f2ab3e3e72161fce28858f4fa3c-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/74ae9f2ab3e3e72161fce28858f4fa3c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Fridolin<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1056">2011/11/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi!</p>
<p>Great stuff, but I’m having some problems mounting a ext3 rootfs.</p>
<p>Compiled kernel 2.6.38.8 using the versatile_defconfig.<br>
Build a filesystem using debootstrap –foreign –arch armel lucid rootfs.</p>
<p>Started qemu using the following command:</p>
<p>qemu-system-arm -M versatilepb -kernel 
linux-2.6.38.8/arch/arm/boot/zImage -serial stdio -hda rootfs.etxt3 
-append “console=ttyAMA0 root=/dev/sda init=/bin/bash rootfstype=ext3″</p>
<p>I can see all the kernel messages but than a kernel panic occurs due to the fact, that the root device cannot be opened.</p>
<p>…<br>
Root-NFS: no NFS server address<br>
VFS: Unable to mount root fs via NFS, trying floppy.<br>
VFS: Cannot open root device “sda” or unknown-block(2,0)<br>
Please append a correct “root=” boot option; here are the available partitions:<br>
Kernel panic – not syncing: VFS: Unable to mount root fs on unknown-block(2,0)<br>
…</p>
<p>Any idea how to get the system running using the versatile board and the ext3 filesystem?</p>
<p>Regards,<br>
Fridolin</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1057">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-39" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1057">2011/11/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I think your problem is not ext3 in particular, but more that you
 are trying to boot with an hard disk; the kernel doesn’t even reach the
 point where it tries different filesystems.<br>
You could try with “root=/dev/sda1″, but I suspect it won’t work because the list of available partition seems empty.<br>
I am not familiar with debootstrap, and I don’t know in what format is rootfs.ext3.<br>
I suspect that your system needs some sort of initrd to populate the 
devices and see the hard disk. I don’t know how zImage has been created 
so I don’t know if an initrd (or initramfs) is already included inside 
it.</p>
<p>Check these sites, they show a setup that works:<br>
<a href="http://www.aurel32.net/info/debian_arm_qemu.php" rel="nofollow">http://www.aurel32.net/info/debian_arm_qemu.php</a><br>
<a href="http://people.debian.org/%7Eaurel32/qemu/armel/" rel="nofollow">http://people.debian.org/~aurel32/qemu/armel/</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1083">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1083">2011/12/13</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>i follow the tutorial,compile the kernel and make rootfs,<br>
and everything seems OK,but at the end i can’t see “hello world”.</p>
<p>————————<br>
qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram rdinit=/test”<br>
———————–<br>
VNC server running on `127.0.0.1:5900′</p>
<p>and stopped.</p>
<p>===============<br>
qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs 
-serial stdio -append “console=ttyAMA0 root=/dev/ram rdinit=/test”<br>
————————<br>
VNC server running on `127.0.0.1:5900′<br>
Uncompressing Linux……………………………………………………………………………………………………………………………………………………………… done, booting the kernel.<br>
Linux version 2.6.30 (corewind @ CoreWind) (gcc version 4.2.0 20070413 
(prerelease) (CodeSourcery Sourcery G++ Lite 2007q1-10)) #1 Tue Dec 13 
17:11:35 IRST 2011<br>
CPU: ARM926EJ-S [41069265] revision 5 (ARMv5TEJ), cr=00093177<br>
CPU: VIVT data cache, VIVT instruction cache<br>
Machine: ARM-Versatile PB<br>
Memory policy: ECC disabled, Data cache writeback<br>
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512<br>
Kernel command line: console=ttyAMA0 root=/dev/ram rdinit=/test<br>
NR_IRQS:64<br>
PID hash table entries: 512 (order: 9, 2048 bytes)<br>
Console: colour dummy device 80×30<br>
Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br>
Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br>
Memory: 128MB = 128MB total<br>
Memory: 123376KB available (5276K code, 290K data, 108K init, 0K highmem)<br>
Calibrating delay loop… 209.71 BogoMIPS (lpj=1048576)<br>
Mount-cache hash table entries: 512<br>
CPU: Testing write buffer coherency: ok<br>
net_namespace: 520 bytes<br>
NET: Registered protocol family 16<br>
bio: create slab  at 0<br>
NET: Registered protocol family 2<br>
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br>
TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br>
TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br>
TCP: Hash tables configured (established 4096 bind 4096)<br>
TCP reno registered<br>
NET: Registered protocol family 1<br>
Trying to unpack rootfs image as initramfs…<br>
rootfs image is not initramfs (junk in compressed archive); looks like an initrd<br>
Freeing initrd memory: 556K<br>
NetWinder Floating Point Emulator V0.97 (double precision)<br>
VFS: Disk quotas dquot_6.5.2<br>
Dquot-cache hash table entries: 1024 (order 0, 4096 bytes)<br>
Installing knfsd (copyright (C) 1996 <a href="mailto:okir@monad.swb.de">okir@monad.swb.de</a>).<br>
JFFS2 version 2.2. (NAND) © 2001-2006 Red Hat, Inc.<br>
ROMFS MTD (C) 2007 Red Hat, Inc.<br>
JFS: nTxBlock = 969, nTxLock = 7756<br>
SGI XFS with ACLs, security attributes, realtime, debug enabled<br>
SGI XFS Quota Management subsystem<br>
OCFS2 1.5.0<br>
ocfs2: Registered cluster interface o2cb<br>
OCFS2 Node Manager 1.5.0<br>
OCFS2 DLM 1.5.0<br>
OCFS2 DLMFS 1.5.0<br>
OCFS2 User DLM kernel interface loaded<br>
Btrfs loaded<br>
yaffs Dec 13 2011 17:09:25 Installing.<br>
msgmni has been set to 242<br>
io scheduler noop registered<br>
io scheduler anticipatory registered (default)<br>
io scheduler deadline registered<br>
io scheduler cfq registered<br>
CLCD: unknown LCD panel ID 0×00001000, using VGA<br>
CLCD: Versatile hardware, VGA display<br>
Console: switching to colour frame buffer device 80×60<br>
Serial: 8250/16550 driver, 4 ports, IRQ sharing enabled<br>
Serial: AMBA PL011 UART driver<br>
dev:f1: ttyAMA0 at MMIO 0x101f1000 (irq = 12) is a AMBA/PL011<br>
console [ttyAMA0] enabled<br>
dev:f2: ttyAMA1 at MMIO 0x101f2000 (irq = 13) is a AMBA/PL011<br>
dev:f3: ttyAMA2 at MMIO 0x101f3000 (irq = 14) is a AMBA/PL011<br>
fpga:09: ttyAMA3 at MMIO 0×10009000 (irq = 38) is a AMBA/PL011<br>
brd: module loaded<br>
smc91x.c: v1.1, sep 22 2004 by Nicolas Pitre<br>
IRQ 25/eth%d: IRQF_DISABLED is not guaranteed on shared IRQs<br>
eth0: SMC91C11xFD (rev 1) at c8968000 IRQ 25 [nowait]<br>
eth0: Ethernet addr: 52:54:00:12:34:56<br>
mice: PS/2 mouse device common for all mice<br>
i2c /dev entries driver<br>
mmc0: MMCI rev 0 cfg 00 at 0×0000000010005000 irq 22,33<br>
mmc1: MMCI rev 0 cfg 00 at 0x000000001000b000 irq 23,34<br>
Advanced Linux Sound Architecture Driver Version 1.0.20.<br>
ALSA device list:<br>
  No soundcards found.<br>
TCP cubic registered<br>
NET: Registered protocol family 17<br>
RPC: Registered udp transport module.<br>
RPC: Registered tcp transport module.<br>
VFP support v0.3: implementor 41 architecture 1 part 10 variant 9 rev 0<br>
input: AT Raw Set 2 keyboard as /class/input/input0<br>
input: ImExPS/2 Generic Explorer Mouse as /class/input/input1<br>
RAMDISK: Couldn’t find valid RAM disk image starting at 0.<br>
EXT4-fs: Update your userspace programs to mount using ext4<br>
EXT4-fs: ext4dev backwards compatibility will go away by 2.6.31<br>
Mount JFS Failure: -22<br>
(1,0):ocfs2_fill_super:989 ERROR: superblock probe failed!<br>
VFS: Cannot open root device “ram” or unknown-block(1,0)<br>
Please append a correct “root=” boot option; here are the available partitions:<br>
Kernel panic – not syncing: VFS: Unable to mount root fs on unknown-block(1,0)<br>
[] (unwind_backtrace+0×0/0xdc) from [] (panic+0×44/0×114)<br>
[] (panic+0×44/0×114) from [] (mount_block_root+0x1c4/0×204)<br>
[] (mount_block_root+0x1c4/0×204) from [] (prepare_namespace+0×160/0x1b8)<br>
[] (prepare_namespace+0×160/0x1b8) from [] (kernel_init+0xac/0xd8)<br>
[] (kernel_init+0xac/0xd8) from [] (do_exit+0×0/0×574)<br>
[] (do_exit+0×0/0×574) from [] (0×3)</p>
<p>Please help me.<br>
My kernel is 2.6.30 for CW9G20 board.( Embedded board with AT91SAM9G20 microcontroller).<br>
I copy the zImage and rootfs to the test directory “/test/” and run these commands.</p>
<p>Please help me</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1085">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-40" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1085">2011/12/13</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The interesting messages are:</p>
<p>“Trying to unpack rootfs image as initramfs…<br>
rootfs image is not initramfs (junk in compressed archive); looks like an initrd”</p>
<p>It seems the rootfs image has not been created correctly or the kernel is not able to read it.<br>
Run the command “cpio -t &lt;rootfs" inside your working directory. It 
displays the list of files in the rootfs cpio archive and a size in 
blocks. If it does not display a line with "test", please review the way
 you are generating rootfs.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1087">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-d9d27721453270861e7d3d1ee310e913-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/d9d27721453270861e7d3d1ee310e913.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1087">2011/12/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
Thank you for your attention,<br>
I Ran the command “cpio -t &lt;rootfs" inside my working directory and it display the "test".<br>
—————–<br>
test<br>
1112 blocks<br>
—————–<br>
I don't know my error?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1089">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1089">2011/12/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>why you delete my comment? You don’t have any solution for this problem?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1090">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-41" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1090">2011/12/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I don’t delete your comments. All comments are held for moderation as I explain in the “<a href="https://balau82.wordpress.com/about-the-blog/" rel="nofollow">About the Blog</a>”
 page. I’m sorry if WordPress.com doesn’t emphasize the fact that your 
comment is in a moderation queue but that’s not something I have power 
to change. I don’t currently have the solution to your problem, but 
that’s not a valid reason for me to delete comments. <a href="http://balau82.wordpress.com/2010/08/17/debugging-arm-programs-inside-qemu/#comment-1045" rel="nofollow">As I have already shown</a>, I’m not afraid to say “I don’t know.”</p>
<p>The output of the cpio command is what I expected, so rootfs should 
not be the problem. Maybe the problem is in the Corewind kernel, which 
is different from the upstream version that I used in my example. Have 
you tried doing the same thing with the upstream kernel? The potential 
problems that I can think of right now are: the Corewind kernel does not
 support cpio archives (unlikely), or Corewind uses the RAM in a way 
that the rootfs image becomes corrupted when it’s time to use it. For 
example if the kernel decompresses itself in some location of the RAM 
and this location overlaps with the location of rootfs, then the boot 
will surely fail. I think you can use QEMU options “-s -S” and connect 
to it with the GDB of your ARM toolchain, then you can check the binary 
data of location 0×800000 (which is the location where QEMU puts the 
initrd file) at the beginning of execution and when the kernel panics, 
and verify that it corresponds to the binary data of rootfs file and 
that it does not change. If the content changes, then the Corewind 
kernel is overwriting it and you should check with them about why and 
how they behave differently from the mainline kernel.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1091">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1091">2011/12/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>No No No, I’m sorry. Excuse me. It was a misunderstanding.</p>
<p>Thank you for your answer. Please mail a rootfs and zImage that you build them for working in qemu.<br>
<a href="mailto:hamzeh.nasajpour@gmail.com">hamzeh.nasajpour@gmail.com</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1092">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-42" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1092">2011/12/14</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>OK no problem.<br>
I’ll send you the two files when I have access to my home computer.<br>
If you want you can also <a href="https://balau82.wordpress.com/about-me/" rel="nofollow">send me</a> your zImage.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1093">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-74ae9f2ab3e3e72161fce28858f4fa3c-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/74ae9f2ab3e3e72161fce28858f4fa3c.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Fridolin<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1093">2011/12/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello Balau!</p>
<p>It take me some time, but now I’m having a solution so it works even with a filesystem build using debootstrap.</p>
<p>The problem in my case was that the standard kernel configuration of 
the versatile board does not work. I had to enable the SCSI driver 
SYM53C8xx and some other functions.<br>
If doing so I can use a virtual disc to boot.</p>
<p>Creating the disc:<br>
qemu-img create disc.img 1G</p>
<p>Partitioning the disc. You have to follow the installation wizard till the partitioner has finished.<br>
qemu -hda disc.img -cdrom debian-XXX-CD.iso -boot d</p>
<p>Mount the disc and copy the filesystem to it:<br>
sudo mount -o loop,offset=32256 disc.img /mnt<br>
sudo cp -pRd TARGET_FS/* /mnt<br>
sudo umount /mnt</p>
<p>Start the system:<br>
qemu-system-arm -M versatilepb -m 256M -kernel arch/arm/boot/zImage 
-serial stdio -hda disc.img -append “console=ttyAMA0,115200n8 
root=/dev/sda1″</p>
<p>Some changes in /etc/securetty, /dev and /etc/inittab of the target 
rootfilesystem must be done so you can login on the ttyAMA0 as root.</p>
<p>Regards,<br>
Fridolin</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1094">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-43" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1094">2011/12/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Glad you did it! It is also possible to create and partition a 
disc.img without using QEMU and the Debian ISO, but disc.img must be a 
raw binary file created with dd, and then it can be mounted as loop 
device and partitioned using parted, fdisk and mkfs.ext3 on it manually 
from the host.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1095">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1095">2011/12/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi,<br>
Thank you very very much.<br>
I could build my kernel with your .config.<br>
Please explain your .config for me.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1096">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-4" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1096">2011/12/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I have a mini2440 board. This board has a ARM9 – ARM920T.<br>
This board has a 7″ LCD with Qt distribution.<br>
Can I emulate the graphical LCD in the qemu?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1098">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-44" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1098">2011/12/15</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<blockquote><p>Please explain your .config for me.</p></blockquote>
<p>I ran “make ARCH=arm versatile_defconfig”, then I changed two options: added “CONFIG_AEABI=y” and removed “CONFIG_MODULES”.<br>
Probably the Versatile board default configuration file is different from the CW9G20 default one.</p>
<blockquote><p>I have a mini2440 board. This board has a ARM9 – ARM920T.<br>
This board has a 7″ LCD with Qt distribution.<br>
Can I emulate the graphical LCD in the qemu?</p></blockquote>
<p>It is possible to emulate an LCD with QEMU (see <a href="http://balau82.wordpress.com/2010/10/17/trying-debian-for-arm-on-qemu/" title="Trying Debian for ARM on&nbsp;QEMU" rel="nofollow">Trying Debian for ARM on QEMU</a>),
 but I don’t know if it can emulate the specific LCD of the mini2440 
board. When you launch qemu-system-arm, the “-M” option indicates the 
architecture and the board, and it includes the memory map, the I/O 
peripherals and graphical display.<br>
In my example I use the Versatile emulation, but I see there’s a project that is working on QEMU and Linux for the mini2440: <a href="http://code.google.com/p/mini2440/" rel="nofollow">http://code.google.com/p/mini2440/</a>. Their version of QEMU should support also the “-M mini2440″ option or something like that.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1101">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-5" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1101">2011/12/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Thank you,<br>
In this page said that we can emulate the mini2440.<br>
<a href="http://gnufiish.org/trac/wiki/Qemu" rel="nofollow">http://gnufiish.org/trac/wiki/Qemu</a><br>
======================================<br>
1     git clone git://repo.or.cz/qemu/mini2440.git<br>
2     cd mini2440<br>
3     git apply &lt; /path/to/qemu_glofiish.diff<br>
4     ./configure –target-list=arm-softmmu<br>
5     make<br>
======================================<br>
when I run line 3, I have errors.<br>
error: patch failed: Makefile.target:655<br>
error: Makefile.target: patch does not apply<br>
error: patch failed: hw/boards.h:131<br>
error: hw/boards.h: patch does not apply<br>
error: hw/glofiish.c: already exists in working directory<br>
error: patch failed: hw/nand.c:357<br>
error: hw/nand.c: patch does not apply<br>
error: patch failed: hw/sd.c:33<br>
error: hw/sd.c: patch does not apply<br>
error: patch failed: target-arm/machine.c:24<br>
error: target-arm/machine.c: patch does not apply<br>
=====================================<br>
Please download the "qemu_glofiish.diff" and give me more information about these errors.<br>
I'm confused that what is these commands and why error was occurred?</p>
<p>Thank you</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1102">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-6" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1102">2011/12/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Please see the following web link:<br>
<a href="http://benoit.vince84.free.fr/mediawiki-1.16.0/index.php5?title=QEmu" rel="nofollow">http://benoit.vince84.free.fr/mediawiki-1.16.0/index.php5?title=QEmu</a></p>
<p>In this link you can download a tar file and extract it and use the following commands<br>
to emulating the mini2440 with graphical LCD.<br>
I ran the following commands but I have an error.<br>
Please download and test it if it is possible for your.<br>
kernel and needed files is in the following link:<br>
<a href="http://kagior.free.fr/fichiers/mini2440/qemu_mini2440_script.tar.gz" rel="nofollow">http://kagior.free.fr/fichiers/mini2440/qemu_mini2440_script.tar.gz</a></p>
<p>run the “mini2440_start.sh”<br>
then run the following commands:<br>
MINI2440 # run set_bootargs_nand<br>
MINI2440 # saveenv<br>
MINI2440 # setenv bootcmd ‘nboot.e kernel ; bootm’<br>
MINI2440 # boot</p>
<p>My error:<br>
=======================================================================<br>
Loading from NAND 64MiB 3,3V 8-bit, offset 0×60000<br>
reading NAND page at offset 0×60000 failed<br>
** Read error<br>
## Booting kernel from Legacy Image at 32000000 …<br>
   Image Name:<br>
   Created:      2011-02-22  17:34:07 UTC<br>
   Image Type:   ARM Linux Kernel Image (uncompressed)<br>
   Data Size:    2799320 Bytes =  2.7 MB<br>
   Load Address: 30008000<br>
   Entry Point:  30008000<br>
   Verifying Checksum … OK<br>
   Loading Kernel Image … OK<br>
OK</p>
<p>Starting kernel …</p>
<p>Uncompressing Linux…………………………………………………………………………………………………………………………………………………………….. done, booting the kernel.<br>
s3c_timers_write: Bad register 0×40<br>
Linux version 2.6.32.2-FriendlyARM (gorka@gorka-EasyNote-TM94) (gcc 
version 4.3.2 (Sourcery G++ Lite 2008q3-72) ) #5 Tue Feb 22 18:29:45 CET
 2011<br>
CPU: ARM920T [41129200] revision 0 (ARMv4T), cr=c0007177<br>
CPU: VIVT data cache, VIVT instruction cache<br>
Machine: FriendlyARM Mini2440 development board<br>
Memory policy: ECC disabled, Data cache writeback<br>
CPU S3C2440A (id 0×32440001)<br>
S3C24XX Clocks, (c) 2004 Simtec Electronics<br>
S3C244X: core 405.000 MHz, memory 101.250 MHz, peripheral 50.625 MHz<br>
CLOCK: Slow mode (1.500 MHz), fast, MPLL on, UPLL on<br>
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256<br>
Kernel command line: console=ttySAC0,115200 noinitrd init=/sbin/init mini2440=0tb<br>
PID hash table entries: 256 (order: -2, 1024 bytes)<br>
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br>
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br>
Memory: 64MB = 64MB total<br>
Memory: 59024KB available (5200K code, 477K data, 168K init, 0K highmem)<br>
SLUB: Genslabs=11, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br>
Hierarchical RCU implementation.<br>
NR_IRQS:85<br>
irq: clearing subpending status 00000003<br>
Console: colour dummy device 80×30<br>
console [ttySAC0] enabled<br>
Calibrating delay loop… 392.39 BogoMIPS (lpj=980992)<br>
Mount-cache hash table entries: 512<br>
CPU: Testing write buffer coherency: ok<br>
NET: Registered protocol family 16<br>
S3C2440: Initialising architecture<br>
S3C2440: IRQ Support<br>
S3C24XX DMA Driver, (c) 2003-2004,2006 Simtec Electronics<br>
DMA channel 0 at c4808000, irq 33<br>
DMA channel 1 at c4808040, irq 34<br>
DMA channel 2 at c4808080, irq 35<br>
DMA channel 3 at c48080c0, irq 36<br>
S3C244X: Clock Support, DVS off<br>
bio: create slab  at 0<br>
SCSI subsystem initialized<br>
usbcore: registered new interface driver usbfs<br>
usbcore: registered new interface driver hub<br>
usbcore: registered new device driver usb<br>
s3c-i2c s3c2440-i2c: slave address 0×10<br>
s3c-i2c s3c2440-i2c: bus frequency set to 98 KHz<br>
s3c-i2c s3c2440-i2c: i2c-0: S3C I2C adapter<br>
cfg80211: Calling CRDA to update world regulatory domain<br>
NET: Registered protocol family 2<br>
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br>
TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br>
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br>
TCP: Hash tables configured (established 2048 bind 2048)<br>
TCP reno registered<br>
NET: Registered protocol family 1<br>
RPC: Registered udp transport module.<br>
RPC: Registered tcp transport module.<br>
RPC: Registered tcp NFSv4.1 backchannel transport module.<br>
NetWinder Floating Point Emulator V0.97 (double precision)<br>
yaffs Feb 21 2011 11:42:53 Installing.<br>
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.<br>
JFS: nTxBlock = 461, nTxLock = 3693<br>
msgmni has been set to 115<br>
alg: No test for stdrng (krng)<br>
io scheduler noop registered (default)<br>
Console: switching to colour frame buffer device 100×30<br>
fb0: s3c2410fb frame buffer device<br>
backlight	initialized<br>
QEMU: mini2440_bl_switch: LCD Backlight now on (1).<br>
leds	initialized<br>
buttons	initialized<br>
pwm	initialized<br>
adc	initialized<br>
s3c2440-uart.0: s3c2410_serial0 at MMIO 0×50000000 (irq = 70) is a S3C2440<br>
s3c2440-uart.1: s3c2410_serial1 at MMIO 0×50004000 (irq = 73) is a S3C2440<br>
s3c2440-uart.2: s3c2410_serial2 at MMIO 0×50008000 (irq = 76) is a S3C2440<br>
loop: module loaded<br>
S3C24XX NAND Driver, (c) 2004 Simtec Electronics<br>
s3c24xx-nand s3c2440-nand: Tacls=3, 29ns Twrph0=7 69ns, Twrph1=3 29ns<br>
s3c24xx-nand s3c2440-nand: NAND soft ECC<br>
NAND device: Manufacturer ID: 0xec, Chip ID: 0×76 (Samsung NAND 64MiB 3,3V 8-bit)<br>
Scanning device for bad blocks<br>
Creating 5 MTD partitions on “NAND 64MiB 3,3V 8-bit”:<br>
0×000000000000-0×000000040000 : “supervivi”<br>
0×000000040000-0×000000060000 : “param”<br>
0×000000060000-0×000000560000 : “Kernel”<br>
0×000000560000-0×000040560000 : “root”<br>
mtd: partition “root” extends beyond the end of device “NAND 64MiB 3,3V 8-bit” — size truncated to 0x3aa0000<br>
0×000000000000-0×000040000000 : “nand”<br>
mtd: partition “nand” extends beyond the end of device “NAND 64MiB 3,3V 8-bit” — size truncated to 0×4000000<br>
dm9000 Ethernet Driver, V1.31<br>
eth0: dm9000e at c48ac300,c48b0304 IRQ 51 MAC: 08:90:90:90:90:90 (chip)<br>
Atmel at76x USB Wireless LAN Driver 0.17 loading<br>
usbcore: registered new interface driver at76c50x-usb<br>
usbcore: registered new interface driver zd1211rw<br>
usbcore: registered new interface driver rtl8187<br>
usbcore: registered new interface driver zd1201<br>
usbcore: registered new interface driver ar9170usb<br>
ohci_hcd: USB 1.1 ‘Open’ Host Controller (OHCI) Driver<br>
s3c2410-ohci s3c2410-ohci: S3C24XX OHCI<br>
s3c2410-ohci s3c2410-ohci: new USB bus registered, assigned bus number 1<br>
s3c2410-ohci s3c2410-ohci: irq 42, io mem 0×49000000<br>
usb usb1: New USB device found, idVendor=1d6b, idProduct=0001<br>
usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1<br>
usb usb1: Product: S3C24XX OHCI<br>
usb usb1: Manufacturer: Linux 2.6.32.2-FriendlyARM ohci_hcd<br>
usb usb1: SerialNumber: s3c24xx<br>
usb usb1: configuration #1 chosen from 1 choice<br>
hub 1-0:1.0: USB hub found<br>
hub 1-0:1.0: 3 ports detected<br>
Initializing USB Mass Storage driver…<br>
usbcore: registered new interface driver usb-storage<br>
USB Mass Storage support registered.<br>
usbcore: registered new interface driver ums-alauda<br>
usbcore: registered new interface driver ums-cypress<br>
usbcore: registered new interface driver ums-datafab<br>
usbcore: registered new interface driver ums-freecom<br>
usbcore: registered new interface driver ums-isd200<br>
usbcore: registered new interface driver ums-jumpshot<br>
usbcore: registered new interface driver ums-karma<br>
usbcore: registered new interface driver ums-onetouch<br>
usbcore: registered new interface driver ums-sddr09<br>
usbcore: registered new interface driver ums-sddr55<br>
usbcore: registered new interface driver ums-usbat<br>
usbcore: registered new interface driver usbserial<br>
USB Serial support registered for generic<br>
usbcore: registered new interface driver usbserial_generic<br>
usbserial: USB Serial Driver core<br>
USB Serial support registered for aircable<br>
usbcore: registered new interface driver aircable<br>
USB Serial support registered for ark3116<br>
usbcore: registered new interface driver ark3116<br>
USB Serial support registered for Belkin / Peracom / GoHubs USB Serial Adapter<br>
usbcore: registered new interface driver belkin<br>
belkin_sa: v1.2:USB Belkin Serial converter driver<br>
USB Serial support registered for ch341-uart<br>
usbcore: registered new interface driver ch341<br>
USB Serial support registered for cp210x<br>
usbcore: registered new interface driver cp210x<br>
cp210x: v0.09:Silicon Labs CP210x RS232 serial adaptor driver<br>
USB Serial support registered for Reiner SCT Cyberjack USB card reader<br>
usbcore: registered new interface driver cyberjack<br>
cyberjack: v1.01 Matthias Bruestle<br>
cyberjack: REINER SCT cyberJack pinpad/e-com USB Chipcard Reader Driver<br>
USB Serial support registered for DeLorme Earthmate USB<br>
USB Serial support registered for HID-&gt;COM RS232 Adapter<br>
USB Serial support registered for Nokia CA-42 V2 Adapter<br>
usbcore: registered new interface driver cypress<br>
cypress_m8: v1.09:Cypress USB to Serial Driver<br>
USB Serial support registered for Digi 2 port USB adapter<br>
USB Serial support registered for Digi 4 port USB adapter<br>
usbcore: registered new interface driver digi_acceleport<br>
digi_acceleport: v1.80.1.2:Digi AccelePort USB-2/USB-4 Serial Converter driver<br>
USB Serial support registered for Edgeport 2 port adapter<br>
USB Serial support registered for Edgeport 4 port adapter<br>
USB Serial support registered for Edgeport 8 port adapter<br>
USB Serial support registered for EPiC device<br>
usbcore: registered new interface driver io_edgeport<br>
io_edgeport: v2.7:Edgeport USB Serial Driver<br>
USB Serial support registered for Edgeport TI 1 port adapter<br>
USB Serial support registered for Edgeport TI 2 port adapter<br>
usbcore: registered new interface driver io_ti<br>
io_ti: v0.7mode043006:Edgeport USB Serial Driver<br>
USB Serial support registered for empeg<br>
usbcore: registered new interface driver empeg<br>
empeg: v1.2:USB Empeg Mark I/II Driver<br>
USB Serial support registered for FTDI USB Serial Device<br>
usbcore: registered new interface driver ftdi_sio<br>
ftdi_sio: v1.5.0:USB FTDI Serial Converters Driver<br>
USB Serial support registered for funsoft<br>
usbcore: registered new interface driver funsoft<br>
USB Serial support registered for Garmin GPS usb/tty<br>
usbcore: registered new interface driver garmin_gps<br>
garmin_gps: v0.33:garmin gps driver<br>
USB Serial support registered for hp4X<br>
usbcore: registered new interface driver hp4X<br>
hp4x: v1.00:HP4x (48/49) Generic Serial driver<br>
USB Serial support registered for PocketPC PDA<br>
usbcore: registered new interface driver ipaq<br>
ipaq: v0.5:USB PocketPC PDA driver<br>
USB Serial support registered for IPWireless converter<br>
usbcore: registered new interface driver ipwtty<br>
ipw: v0.3:IPWireless tty driver<br>
USB Serial support registered for IR Dongle<br>
usbcore: registered new interface driver ir-usb<br>
ir_usb: v0.4:USB IR Dongle driver<br>
USB Serial support registered for iuu_phoenix<br>
usbcore: registered new interface driver iuu_phoenix<br>
iuu_phoenix: v0.11:Infinity USB Unlimited Phoenix driver<br>
USB Serial support registered for Keyspan – (without firmware)<br>
USB Serial support registered for Keyspan 1 port adapter<br>
USB Serial support registered for Keyspan 2 port adapter<br>
USB Serial support registered for Keyspan 4 port adapter<br>
usbcore: registered new interface driver keyspan<br>
keyspan: v1.1.5:Keyspan USB to Serial Converter Driver<br>
USB Serial support registered for Keyspan PDA<br>
USB Serial support registered for Keyspan PDA – (prerenumeration)<br>
USB Serial support registered for Xircom / Entregra PGS – (prerenumeration)<br>
usbcore: registered new interface driver keyspan_pda<br>
keyspan_pda: v1.1:USB Keyspan PDA Converter driver<br>
USB Serial support registered for KL5KUSB105D / PalmConnect<br>
usbcore: registered new interface driver kl5kusb105d<br>
kl5kusb105: v0.3a:KLSI KL5KUSB105 chipset USB-&gt;Serial Converter driver<br>
USB Serial support registered for KOBIL USB smart card terminal<br>
usbcore: registered new interface driver kobil<br>
kobil_sct: 21/05/2004:KOBIL USB Smart Card Terminal Driver (experimental)<br>
USB Serial support registered for MCT U232<br>
usbcore: registered new interface driver mct_u232<br>
mct_u232: z2.1:Magic Control Technology USB-RS232 converter driver<br>
USB Serial support registered for Moschip 2 port adapter<br>
mos7720: 1.0.0.4F:Moschip USB Serial Driver<br>
usbcore: registered new interface driver moschip7720<br>
USB Serial support registered for Moschip 7840/7820 USB Serial Driver<br>
mos7840: 1.3.2:Moschip 7840/7820 USB Serial Driver<br>
usbcore: registered new interface driver mos7840<br>
USB Serial support registered for moto-modem<br>
usbcore: registered new interface driver moto-modem<br>
USB Serial support registered for navman<br>
usbcore: registered new interface driver navman<br>
USB Serial support registered for ZyXEL – omni.net lcd plus usb<br>
usbcore: registered new interface driver omninet<br>
omninet: v1.1:USB ZyXEL omni.net LCD PLUS Driver<br>
USB Serial support registered for opticon<br>
usbcore: registered new interface driver opticon<br>
USB Serial support registered for GSM modem (1-port)<br>
usbcore: registered new interface driver option<br>
option: v0.7.2:USB Driver for GSM modems<br>
USB Serial support registered for oti6858<br>
usbcore: registered new interface driver oti6858<br>
USB Serial support registered for pl2303<br>
usbcore: registered new interface driver pl2303<br>
pl2303: Prolific PL2303 USB to serial adaptor driver<br>
USB Serial support registered for Qualcomm USB modem<br>
usbcore: registered new interface driver qcserial<br>
safe_serial: v0.0b:USB Safe Encapsulated Serial<br>
USB Serial support registered for safe_serial<br>
usbcore: registered new interface driver safe_serial<br>
USB Serial support registered for siemens_mpi<br>
usbcore: registered new interface driver siemens_mpi<br>
Driver for Siemens USB/MPI adapter<br>
Version 0.1 09/26/2005 Thomas <a href="mailto:Hergenhahn@web.de">Hergenhahn@web.de</a> <a href="http://libnodave.sf.net/" rel="nofollow">http://libnodave.sf.net</a><br>
USB Serial support registered for Sierra USB modem<br>
usbcore: registered new interface driver sierra<br>
sierra: v.1.3.8:USB Driver for Sierra Wireless USB modems<br>
USB Serial support registered for SPCP8x5<br>
usbcore: registered new interface driver spcp8x5<br>
spcp8x5: v0.04:SPCP8x5 USB to serial adaptor driver<br>
USB Serial support registered for symbol<br>
usbcore: registered new interface driver symbol<br>
USB Serial support registered for TI USB 3410 1 port adapter<br>
USB Serial support registered for TI USB 5052 2 port adapter<br>
usbcore: registered new interface driver ti_usb_3410_5052<br>
ti_usb_3410_5052: v0.9:TI USB 3410/5052 Serial Driver<br>
USB Serial support registered for Handspring Visor / Palm OS<br>
USB Serial support registered for Sony Clie 3.5<br>
USB Serial support registered for Sony Clie 5.0<br>
usbcore: registered new interface driver visor<br>
visor: USB HandSpring Visor / Palm OS driver<br>
USB Serial support registered for Connect Tech – WhiteHEAT – (prerenumeration)<br>
USB Serial support registered for Connect Tech – WhiteHEAT<br>
usbcore: registered new interface driver whiteheat<br>
whiteheat: v2.0:USB ConnectTech WhiteHEAT driver<br>
mice: PS/2 mouse device common for all mice<br>
s3c2410 TouchScreen successfully loaded<br>
input: s3c2410 TouchScreen as /devices/virtual/input/input0<br>
S3C24XX RTC, (c) 2004,2006 Simtec Electronics<br>
s3c2410-rtc s3c2410-rtc: rtc disabled, re-enabling<br>
s3c2410-rtc s3c2410-rtc: rtc core: registered s3c as rtc0<br>
i2c /dev entries driver<br>
Linux video capture interface: v2.00<br>
gspca: main v2.7.0 registered<br>
usbcore: registered new interface driver conex<br>
conex: registered<br>
usbcore: registered new interface driver etoms<br>
etoms: registered<br>
usbcore: registered new interface driver finepix<br>
finepix: registered<br>
usbcore: registered new interface driver jeilinj<br>
jeilinj: registered<br>
usbcore: registered new interface driver mars<br>
mars: registered<br>
usbcore: registered new interface driver mr97310a<br>
mr97310a: registered<br>
usbcore: registered new interface driver ov519<br>
ov519: registered<br>
usbcore: registered new interface driver ov534<br>
ov534: registered<br>
usbcore: registered new interface driver pac207<br>
pac207: registered<br>
usbcore: registered new interface driver pac7311<br>
pac7311: registered<br>
usbcore: registered new interface driver sn9c20x<br>
sn9c20x: registered<br>
usbcore: registered new interface driver sonixb<br>
sonixb: registered<br>
usbcore: registered new interface driver sonixj<br>
sonixj: registered<br>
usbcore: registered new interface driver spca500<br>
spca500: registered<br>
usbcore: registered new interface driver spca501<br>
spca501: registered<br>
usbcore: registered new interface driver spca505<br>
spca505: registered<br>
usbcore: registered new interface driver spca506<br>
spca506: registered<br>
usbcore: registered new interface driver spca508<br>
spca508: registered<br>
usbcore: registered new interface driver spca561<br>
spca561: registered<br>
usbcore: registered new interface driver sq905<br>
sq905: registered<br>
usbcore: registered new interface driver sq905c<br>
sq905c: registered<br>
usbcore: registered new interface driver sunplus<br>
sunplus: registered<br>
usbcore: registered new interface driver stk014<br>
stk014: registered<br>
usbcore: registered new interface driver t613<br>
t613: registered<br>
usbcore: registered new interface driver tv8532<br>
tv8532: registered<br>
usbcore: registered new interface driver vc032x<br>
vc032x: registered<br>
usbcore: registered new interface driver zc3xx<br>
zc3xx: registered<br>
usbcore: registered new interface driver ALi m5602<br>
ALi m5602: registered<br>
usbcore: registered new interface driver STV06xx<br>
STV06xx: registered<br>
gspca_gl860: driver startup – version 0.9d10<br>
usbcore: registered new interface driver gspca_gl860<br>
gspca_gl860: driver registered<br>
usbcore: registered new interface driver uvcvideo<br>
USB Video Class driver (v0.1.0)<br>
initializing s3c2440 camera interface……<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c_gpio_read: Bad register 0xd0<br>
s3c_gpio_write: Bad register 0xd0<br>
s3c2440 camif init done<br>
Loading OV9650 driver………<br>
SCCB address 0×60, manufacture ID 0xFFFF, expect 0x7FA2<br>
SCCB address 0×60, manufacture ID 0xFFFF, expect 0x7FA2<br>
No OV9650 found!!!<br>
S3C2410 Watchdog Timer, (c) 2004 Simtec Electronics<br>
s3c2410-wdt s3c2410-wdt: watchdog inactive, reset disabled, irq enabled<br>
s3c-sdi s3c2440-sdi: powered down.<br>
s3c-sdi s3c2440-sdi: mmc0 – using pio, sw SDIO IRQ<br>
usbcore: registered new interface driver usbhid<br>
usbhid: v2.6:USB HID core driver<br>
Advanced Linux Sound Architecture Driver Version 1.0.21.<br>
No device for DAI UDA134X<br>
No device for DAI s3c24xx-i2s<br>
S3C24XX_UDA134X SoC Audio driver<br>
UDA134X SoC Audio Codec<br>
asoc: UDA134X  s3c24xx-i2s mapping ok<br>
ALSA device list:<br>
  #0: S3C24XX_UDA134X (UDA134X)<br>
TCP cubic registered<br>
lib80211: common routines for IEEE802.11 drivers<br>
s3c2410-rtc s3c2410-rtc: setting system clock to 2011-12-17 13:36:20 UTC (1324128980)<br>
Root-NFS: No NFS server available, giving up.<br>
VFS: Unable to mount root fs via NFS, trying floppy.<br>
VFS: Cannot open root device “” or unknown-block(2,0)<br>
Please append a correct “root=” boot option; here are the available partitions:<br>
1f00             256 mtdblock0 (driver?)<br>
1f01             128 mtdblock1 (driver?)<br>
1f02            5120 mtdblock2 (driver?)<br>
1f03           60032 mtdblock3 (driver?)<br>
1f04           65536 mtdblock4 (driver?)<br>
Kernel panic – not syncing: VFS: Unable to mount root fs on unknown-block(2,0)<br>
Backtrace:<br>
[] (dump_backtrace+0×0/0x10c) from [] (dump_stack+0×18/0x1c)<br>
 r7:c39b30f7 r6:c0588250 r5:c39b3000 r4:c3823f40<br>
[] (dump_stack+0×0/0x1c) from [] (panic+0x4c/0×134)<br>
[] (panic+0×0/0×134) from [] (mount_block_root+0×178/0×234)<br>
 r3:00000000 r2:c38689ec r1:c3823f40 r0:c04cd138<br>
[] (mount_block_root+0×0/0×234) from [] (mount_root+0xb0/0xf4)<br>
[] (mount_root+0×0/0xf4) from [] (prepare_namespace+0xf8/0×190)<br>
 r7:c0587c20 r6:c0023808 r5:c0023808 r4:c002235c<br>
[] (prepare_namespace+0×0/0×190) from [] (kernel_init+0xf0/0×124)<br>
 r7:00000000 r6:c0021e2c r5:c002235c r4:c002235c<br>
[] (kernel_init+0×0/0×124) from [] (do_exit+0×0/0x62c)<br>
 r7:00000000 r6:00000000 r5:00000000 r4:00000000</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1103">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-45" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1103">2011/12/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The errors when applying the “diff” are probably because the diff
 was created  some time ago, and now the mini2440 QEMU source files have
 changed and the diff is trying to modify files that are different. But I
 don’t think the diff is what you need, it seems to me that it is needed
 to add support for X800 or N800 which should be different architecture 
with respect to your mini2440. If you want to patch, you need to go back
 to a previous version of the source code. There’s a git command for 
that but I don’t remember it now. Anyway I don’t think that patch will 
help you, but maybe I am missing something.</p>
<p>Your errors seem the same errors that are reported in the page you 
linked. I think QEMU does not yet emulate the camera on the mini2440, 
but that’s not a problem in boot. The problem here is that Linux does 
not find a filesystem, because the image passed with the QEMU “drive” 
option is empty. The kernel arguments are these, so it seems the kernel 
expects no ramdisk and so it will try to boot from the drive.</p>
<p><code>Kernel command line: console=ttySAC0,115200 noinitrd init=/sbin/init mini2440=0tb</code></p>
<p>If you want to make it boot completely, I think you need to populate 
the drive image with a filesystem in a similar way as the initramfs. By 
googling quickly I found these instruction that should give you an idea 
of what you can do: <a href="http://www.coreboot.org/QEMU_Build_Tutorial#Creating_a_hard_disk_image" rel="nofollow">Creating a hard disk image</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1104">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-7" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">hamzeh nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1104">2011/12/18</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Thank you for your answer:<br>
In the link that I send to you, a file is available with name of “mini2440_start.sh”.<br>
In this file is a script that run this command in the final.<br>
================================================================<br>
base=”/home/mini2440/qemu/mini2440″</p>
<p>echo Starting in $base</p>
<p>name_nand=”$base/mini2440_nand.bin”<br>
name_snapshots=”$base/mini2440_snapshots.img”</p>
<p>qemu-system-arm \<br>
	-M mini2440 $* \<br>
	-drive file=$name_snapshots,snapshot=on \<br>
	-serial stdio \<br>
	-kernel “$base”/uImage_16k \<br>
	-mtdblock “$name_nand” \<br>
	-show-cursor \<br>
	-usb -usbdevice keyboard -usbdevice mouse”<br>
================================================================<br>
Can you describe these commands and parameters that how to work?plz?<br>
sorry, I’m beginner.<br>
And if is it possible change the script for working without error. I don’t know why error was occurred. Please.</p>
<p>Thank you</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1105">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-46" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1105">2011/12/18</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The “base” variable is the working directory where the binary images are. It should be changed with the directory you use.</p>
<p>mini2440_nand.bin seems to be the binary image that goes in the 
onboard Flash, with the boot loader (U-Boot maybe?). It is passed to 
QEMU with the mtdblock option.</p>
<p>The mini2440_snapshot.img should be the image of the storage 
containing the filesystem, and it is passed with the “drive” option, I 
think it emulates the SD card.</p>
<p>The script also passes the kernel (uImage_16k) to the emulator, with 
the “kernel” option. It is possible that uImage_16k is created with 
mkimage, which is a tool by U-Boot to package binary images so that the 
bootloader understands them (how big they are, what’s inside, …) and can
 be used at boot.</p>
<p>I don’t know how to make the error disappear, as I said the errors 
are the same that are present in the page you linked, so you are getting
 the expected result, which is a kernel panic when it does not find a 
filesystem.<br>
The wiki seems to have more information on how to go on: <a href="http://code.google.com/p/mini2440/w/list" rel="nofollow">http://code.google.com/p/mini2440/w/list</a>
 have you tried to ask them in one of the wiki pages? I am not familiar 
with your board, but they worked on it so they are surely more informed 
than me.</p>
<p>See also <a href="http://wiki.linuxmce.org/index.php/Mini2440" rel="nofollow">this page</a>, it seems interesting.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1106">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1106">2011/12/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Thanks a lot for your post. I need a way to debug the linux kernel in eclipse.</p>
<p>But before I can do that I need to successfully run the linux kernel in qemu.<br>
I tried sequentially as per your steps. </p>
<p>But in the last step, when I ran using the “qemu-system-arm -M 
versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram
 rdinit=/test” ” after creating the filesystem I get the kernel panic 
message “kernel panic-not syncing attempted to kill init” and also there
 is no message from test.c, the output in qemu is same as before 
creating the filesystem(when there was no filesystem and the error was 
displayed)</p>
<p>Please help</p>
<p>Thanks in advance <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
<p>sites referred:<br>
-your site<br>
-http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1107">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-47" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1107">2011/12/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Usually this error is displayed because “<code>test</code>” is not executed because the ARM EABI support is disabled. Try to see if your “<code>.config</code>” file has a line containing “<code>CONFIG_AEABI=y</code>” and if not, add it <del datetime="2011-12-19T15:00:12+00:00">with “<code>make menuconfig</code>“</del> with “<code>make ARCH=arm menuconfig</code>” or by adding it manually.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1108">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1108">2011/12/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>I set the EABI as per your instruction under Kernel Features in 
menuconfig, then built the kernel using the crosscompiler toolchain. </p>
<p>Anyway I would like to check the .config file for “CONFIG_AEABI=y”, </p>
<p>But I dont know where my .config is written to , after the make menuconfig, please say where the .config file is.</p>
<p>Please help</p>
<p>Thanks in advance<br>
Joel</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1109">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-48" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1109">2011/12/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The “<code>.config</code>” file should be in the same directory where you run “<code>make</code>“.<br>
Anyway I made a small mistake in last comment, you should run “<code>make ARCH=arm menuconfig</code>” instead.<br>
It is also a good idea to run “<code>make ARCH=arm distclean</code>” if it still doesn’t work, and then reconfigure and rebuild everything.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1110">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1110">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau</p>
<p>Problem found(I think)! I enabled EAB under kernel features, before 
building, using make ARCH=arm menuconfig, but after the build the when I
 checked the EAB option using make ARCH=arm menuconfig it was 
disabled!!!</p>
<p>So please help me find the .config file to enable EAB by manually adding CONFIG_AEABI=y before building</p>
<p>These are the steps which I did</p>
<p>first setting the paths<br>
export JAVA_HOME=/usr/lib/jvm/java-6-sun<br>
export CROSS_COMPILE=arm-none-linux-gnueabi<br>
export PATH=/home/ctsuser/DS-5-Workspace/arm-2010q1/bin:$PATH</p>
<p>make ARCH=arm menuconfig</p>
<p>enabled EABI support under kernel features</p>
<p>make ARCH=arm versatile_defconfig</p>
<p>make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- all </p>
<p>Build successfull!!!</p>
<p>but when I ran make ARCH=arm menuconfig the EAB option is disabled!!!</p>
<p>Please help me enable the EAB option manually, so It will remain even after the build</p>
<p>I am not able to find the .config file after the make, please specify
 the exact name and path of the .config file, assuming I am performing 
make under the directory /linux-2.6.32 and following the above 
steps(almost same as yours,except for the paths in export)</p>
<p>Please help</p>
<p>Thanks in advance</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1111">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1111">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau</p>
<p>The exact error I am encountering is this,<br>
Freeing init memory: 104k</p>
<p>Kernel panic– not syncing: Attempted to kill init</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1112">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-4" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1112">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>It is working!!! The problem was that I should give make ARCH=arm 
menuconfig just before compiling the kernel, ie. before the make 
ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- all … </p>
<p>it is because make ARCH=arm versatile_defconfig resets the .config values disabling the EABI</p>
<p>Now I am attempting to debug the kernel in eclipse</p>
<p>as per the site <a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a>, </p>
<p>by giving the -s and -S option in the qemu</p>
<p>Thanks a lot for your help <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1113">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-49" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1113">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I don’t understand why you are not finding the .config file, it’s
 usually there… if you are performing make under the directory 
/linux-2.6.32, then the .config file is “/linux-2.6.32/.config”. Maybe 
you thought that it was called something like “versatilepb.config” and 
you searched for “/linux-2.6.32/*.config”, which will not return 
anything. It is simply “.config”, with nothing before the dot. In Linux,
 any file whose name begins with a dot is considered “hidden” and some 
commands like “ls” won’t display them by default, you need to explicitly
 use “ls -A” to display also hidden files. Also some file managers to 
navigate the folders (nautilus, konqueror, …) have an option to display 
hidden files, which is disabled by default.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1114">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-5" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1114">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
I need the kernel to boot and run in QEMU continuosly without crashing, all I am getting now is HelloWorld</p>
<p>I tried removing the infinite loop, then I am getting ” kernel panic – not syncing: Attempted to kill init”</p>
<p>Please give me a qemu command, which runs the kernel without kernel 
panic similar to the site: 
“http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/,”,
 and I can step through the source code in eclipse using the -s and -S 
option</p>
<p>I used this site(<a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a>, ) as reference, before I came to your site, It says on howto debug the kernel using QEMU and eclipse</p>
<p>But since I followed your build methodology of root filesystem creation, am not able to use the steps in the site <a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a> (I dont know how to create standard filesystems to run the kernel on) </p>
<p>Please help me debug the kernel code in eclipse by giving a QEMU 
command which runs the kernel alone, allowing me to step through the 
kernel </p>
<p>Thanks a lot for your help <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1115">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-6" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1115">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>In your command</p>
<p>“qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram rdinit=/test” ” </p>
<p>is there a way to mount the rootfs without running the test.c??</p>
<p>Because when I give qemu-system-arm -M versatilepb -m 128M -kernel 
zImage -initrd rootfs -append “root=/dev/ram” it throws the error </p>
<p>No filesystem could mount, root tried:ext2 cramfs minix romfs</p>
<p>Please help,<br>
Thanks in advance</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1116">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2c9a416d30fa004dca026ce3af1fc5f9-8" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2c9a416d30fa004dca026ce3af1fc5f9.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Hamzeh Nasajpour<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1116">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
I could emulate the linux for mini2440 (Qtopia, Angstrom, Embeddian) in graphic and nographic mode.<br>
Do hava any article for kernel porting? I want to create an embedded board with ARM9<br>
and develop a kernel and RFS for it.<br>
please help me.<br>
Regards,</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1117">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-7" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1117">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>sorry for the many posts, but I need this to work desperately, please be patient with my many posts</p>
<p>I came across this site “http://fs.devloop.org.uk/”, can you tell me a
 way to use the downloaded filesystem instead of your file system, in 
your final QEMU command…</p>
<p>It also says in the site<br>
***********************************************************************************************************<br>
All are in raw disk format which can be loop mounted, or used directly 
as a raw disk with KVM (or QEMU), User Mode Linux and many others.  See 
below for some examples.<br>
Note: there is no bootloader! Use your own kernel or install a bootloader via a chroot.<br>
***********************************************************************************************************</p>
<p>The site says QEMU can be used, so please tell how to download and use the downloaded file system in your final QEMU command </p>
<p>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append “root=/dev/ram rdinit=/test”</p>
<p>also please explain the following parameters in your QEMU command</p>
<p>-initrd rootfs<br>
-append “root=/dev/ram rdinit=/test”<br>
-M versatilepb<br>
-m 128M</p>
<p>Thanks a ton for your help <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1119">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-50" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1119">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>@joel</p>
<p>Even if you don’t have a filesystem, you CAN debug the boot phase of 
the kernel. Then when the kernel tries to find a filesystem it will 
panic, but you can debug anything before that point. Be aware that some 
QEMU versions, such as the one shipped in some versions of Ubuntu, have a
 bug where even if you run “-s -S”, the emulation will not stop at the 
beginning, but it will continue and then panic, so you can’t debug the 
boot. To solve this problem you need to recompile QEMU or use a 
different distribution.</p>
<p>You don’t need a bootloader because QEMU does everything you need with the “-kernel” option.</p>
<p>If you need a filesystem, a simple way to have it is to use a ramdisk with Busybox on it, as I explain in <a href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/" title="Busybox for ARM on&nbsp;QEMU" rel="nofollow">Busybox for ARM on QEMU</a></p>
<p>The “-M versatilepb -m 128M” options in QEMU are used to emulate the 
ARM Versatile Platform Baseboard, with 128MiB of RAM. It’s an old 
architecture (with an ARM926EJ-S core) that has been supported on Linux 
mainline kernel, QEMU and U-Boot.<br>
The “-initrd rootfs” option tells QEMU to load the file “rootfs” into 
memory at a certain address, and pass that address to the Linux kernel.<br>
The “-append ‘root=/dev/ram rdinit=/test’” option adds some parameters 
to pass to Linux kernel, and in particular they tell the kernel that the
 root filesystem is in ram, and the first program that has to be called 
from the ramdisk is the “/test” we created, instead of the default 
“/sbin/init”.<br>
You can have more information on QEMU commands from “qemu-system-arm –help”, or “man qemu-system-arm” or <a href="http://qemu.weilnetz.de/qemu-doc.html" rel="nofollow">this documentation</a>.</p>
<p>It seems to me that both the sites that you pointed have nothing to 
do with ARM, so you can’t download and use those images. when you run 
“qemu” or “qemu-system-x86_64″ it emulates an x86 machine, if you run 
“qemu-system-arm” it emulates an ARM machine, they are VERY different 
and a kernel+filesystem for one can’t work on another.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1120">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-51" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1120">2011/12/20</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>@Hamzeh</p>
<p>I know this guide: <a href="http://www.eetimes.com/design/embedded/4023297/Linux-Porting-Guide" rel="nofollow">Linux Porting Guide</a>.<br>
But I think that if you use a core that Linux already supports (some 
OMAP chips for example), you have less work to do. I never ported Linux 
on anything, but I think it involves taking care mainly of the boot 
process (boot loader, storage for boot loader, kernel and ramdisk), the 
root filesystem storage (SD card? USB drive?). Most of the root 
filesystem will already work, it should be sufficient that is compiled 
for the same architecture.</p>
<p>I’m sorry but I can’t help you with this because I never did it.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1127">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-8" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1127">2011/12/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Thanks a lot for your help.</p>
<p>By following your blog <a href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/" rel="nofollow">http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/</a>,<br>
I was able to successfully setup the root filesystem and boot my kernel 
linux-2.6.32.2. Now I have a working kernel with a shell bash, that I 
can run basic commands such as ls and cd on. </p>
<p>But when I try to connect it with my eclipse gdb server using the -s 
and -S option, I am getting warning ” warning: Architecture rejected 
target-supplied description ” and am not able to step through the source
 code, it is giving, “no source available at 0×0″</p>
<p>The steps are given in this site, <a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a> but when I try to follow all the steps, the qemu is not booting the kernel, an array of colours are coming instead.</p>
<p>Can you please go through the site <a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a> and suggest me a way to debug the linux kernel in eclipse. </p>
<p>I feel the eclipse is not supporting the qemu-system-arm, but might support qemu alone.<br>
Please give a way of compiling an image which is not arm and workable under linux</p>
<p>There is the command qemu -no-kvm -s -S  -kernel 
/mnt/build/linux-2.6/arch/x86/boot/bzImage -hda /mnt/sid.ext3 -append 
“root=/dev/sda” in the site <a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt</a></p>
<p>Please help me to configure the above QEMU command based on the filesystem downloaded from <a href="http://fs.devloop.org.uk/" rel="nofollow">http://fs.devloop.org.uk</a> </p>
<p>Thanks again for your help <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1128">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-52" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1128">2011/12/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The error message you get about “Architecture rejected” is 
probably because you are trying to debug an ARM architecture with an x86
 GDB. You need to use the GDB for ARM. It seems to me the option is 
configured in this screen:<br>
<a href="http://www.minoraddition.com/wp-content/uploads/2011/02/step012.png" rel="nofollow">http://www.minoraddition.com/wp-content/uploads/2011/02/step012.png</a><br>
you need to put in the “GDB debugger” field the gdb of the ARM 
toolchain, such as “arm-none-eabi-gdb” or “arm-none-linux-gnueabi-gdb”, 
in particular it is what you used in the kernel compilation.</p>
<p>If you need to use <a href="http://fs.devloop.org.uk/" rel="nofollow">http://fs.devloop.org.uk/</a>
 images, you can’t use qemu-system-arm or an ARM kernel, you need to use
 qemu and a x86 kernel. You need to unzip the file and pass it with the 
-hda option, for example:<br>
<code>wget <a href="http://fs.devloop.org.uk/filesystems/Debian-Squeeze/Debian-Squeeze-x86-root_fs.bz2" rel="nofollow">http://fs.devloop.org.uk/filesystems/Debian-Squeeze/Debian-Squeeze-x86-root_fs.bz2</a><br>
tar xjf Debian-Squeeze-x86-root_fs.bz2<br>
qemu -no-kvm -s -S -kernel /mnt/build/linux-2.6/arch/x86/boot/bzImage -hda Debian-Squeeze-x86-root_fs -append “root=/dev/sda”</code></p>
<p>It’s still not clear to me if your objective is to debug Linux on an 
ARM architecture or what. The only thing you said about your objective 
is:</p>
<blockquote><p>I need a way to debug the linux kernel in eclipse</p></blockquote>
<p>There’s no mention of ARM. If you don’t need to debug specifically on
 ARM, then I strongly suggest you to keep everything for x86, because 
all the tools are more mature and there’s more stuff about it on the 
Internet.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1129">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-9" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1129">2011/12/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Am sorry for not being clear, and thanks a lot for your patience. </p>
<p>I need to debug the linux kernel in eclipse regardless of the 
architecture x86 or ARM. But since the eclipse seems to support only x86
 as you mentioned, can you give me</p>
<p>The detailed build procedure of the kernel for x86, and obtain the zImage for the kernel</p>
<p>Which x86 toolchain to use, where to download and how to use in build</p>
<p>Setting the necessary things in menuconfig.</p>
<p>Finally the QEMU command</p>
<p>I am new to this field, therefore please help me by giving step by 
step guidelines or guide me to sites which gives step by step 
guidelines.</p>
<p>Thanks a lot for your help <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
<p>PS: I tried searching the internet for the error “Architecture 
rejected target-supplied description” but could find no solution, but 
you found the problem to be the x86 architecture, thanks a ton for your 
help <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1130">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-10" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1130">2011/12/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>you said</p>
<p>“”you need to put in the “GDB debugger” field the gdb of the ARM 
toolchain, such as “arm-none-eabi-gdb” or “arm-none-linux-gnueabi-gdb”, 
in particular it is what you used in the kernel compilation.”"</p>
<p>If I do the build as per your instructions in this blog for ARM 
architecture, can you tell me the changes I have to make in eclipse? I 
tried to change the gdb for arm tool chain, but was unable to find where
 to change, please give step by step instruction on how to change the 
gdb field to arm toolchain in eclipse.</p>
<p>Thanks <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1131">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-53" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1131">2011/12/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Forget ARM. Really, forget it. As I said, it’s easier to do 
everything in x86. The toolchain is simply gcc, the QEMU command is 
simply qemu, the root filesystem is simply what you can find here: <a href="http://fs.devloop.org.uk/" rel="nofollow">http://fs.devloop.org.uk/</a>, and if you stick to x86, then everything you need to do to compile and debug Linux is written in that site: <a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a></p>
<p>I just suggest two differences with respect to that tutorial:</p>
<p>1. Instead of getting the kernel from git, you can download a stable version:<br>
<a href="http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.1.6.tar.bz2" rel="nofollow">http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.1.6.tar.bz2</a></p>
<p>2. Instead of creating and using /mnt/sid.ext3 you can pass the filesystem you download and uncompress from <a href="http://fs.devloop.org.uk/" rel="nofollow">http://fs.devloop.org.uk/</a>, as I said in the previous comments. For example you could use the Debian Squeeze 32 bit version.</p>
<p>I believe you were not able to follow the instruction of <a href="http://www.minoraddition.com/" rel="nofollow">http://www.minoraddition.com</a> because you mixed his tutorial with mine, and they are incompatible.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1132">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-11" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1132">2011/12/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau</p>
<p>I am not able to perform the build as per the site. </p>
<p><a href="http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/" rel="nofollow">http://www.minoraddition.com/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/</a></p>
<p>When I do all of the steps I am getting error</p>
<p>**** Build of configuration Default for project linux-2.6.32.1_k ****</p>
<p>make O=/mnt/build/linux-2.6.32.1_k all<br>
make -C /home/ctsuser/DS-5-Workspace/linux-2.6.32.1_k O=/mnt/build/linux-2.6.32.1_k/.<br>
ln: cannot remove `source’: Permission denied<br>
make[3]: *** [outputmakefile] Error 1<br>
make[2]: *** No rule to make target `include/config/auto.conf’, needed by `include/config/kernel.release’.  Stop.<br>
make[1]: *** [sub-make] Error 2<br>
make: *** [all] Error 2</p>
<p>**** Build Finished ****<br>
Please help</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1133">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-12" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1133">2011/12/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Since I am unable to build the kernel for x86 architecture using eclipse…</p>
<p>Please suggest a site which gives step by step instruction on how to build a kernel for x86 architecture</p>
<p>Thanks a lot<br>
 <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1135">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-54" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1135">2011/12/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Ideally, you should just do:<br>
<code> cd ~<br>
wget <a href="http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.1.6.tar.bz2" rel="nofollow">http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.1.6.tar.bz2</a><br>
tar xjf linux-3.1.6.tar.bz2<br>
cd linux-3.1.6<br>
make defconfig<br>
make menuconfig # And add debug info and frame pointers<br>
make</code></p>
<p>I think your problem could be three things:<br>
1. you are trying to build the kernel on directories where you don’t 
have complete access (it gives “Permission denied”). I suggest doing 
everything under your home directory or below.<br>
2. you are not working on a clean linux tree. maybe something from 
previous compilation remained. Run “make distclean” and re-configure the
 kernel with “make defconfig” or using a pre-generated .config.<br>
3. the kernel is not configured (run “make defconfig”)</p>
<p>I can give you a couple of sites for kernel compilation:</p>
<p><a href="http://free-electrons.com/docs/elfs/" rel="nofollow">http://free-electrons.com/docs/elfs/</a><br>
<a href="http://alien.slackbook.org/dokuwiki/doku.php?id=linux:kernelbuilding" rel="nofollow">http://alien.slackbook.org/dokuwiki/doku.php?id=linux:kernelbuilding</a><br>
<a href="http://www.mulix.org/lectures/tau_linux_workshop/kernel_compilation.pdf" rel="nofollow">http://www.mulix.org/lectures/tau_linux_workshop/kernel_compilation.pdf</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1138">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-13" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1138">2011/12/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balu</p>
<p>In one of your old comments you talked about using the ddd debugger as follows<br>
___________________________________________________________________</p>
<p>Recompile the kernel with debugging symbols (the configuration should
 be in “kernel hacking” section inside the kernel menuconfig)</p>
<p>- Launch QEMU with debugging enabled (“-s -S” to launch it stopped and waiting for GDB)</p>
<p>- Launch GDB with something like this (If you have ddd installed and your toolchain comes with gdb):</p>
<p>$ ddd –debugger arm-unknown-linux-uclibcgnueabi-gdb — vmlinux</p>
<p>- Inside GDB:</p>
<p>(gdb) target remote localhost:1234<br>
(gdb) b start_kernel<br>
(gdb) c</p>
<p>- Try to debug step-by-step the kernel and understand what’s doing nasty things.</p>
<p>ddd –debugger arm-none-linux-gnueabi-gdb — vmlinux<br>
_______________________________________________________________________________________________________________________________________________________</p>
<p>But I am getting error, the toolchain am using is 
arm-none-linux-gnueabi, please also specify under which path I have to 
give the command  $ddd –debugger arm-unknown-linux-uclibcgnueabi-gdb — 
vmlinux</p>
<p>error</p>
<p>GDB could not be started<br>
ddd requires some inferior debugger to run,</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1139">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-14" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1139">2011/12/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>I was able to build successfully for the x86 architecture in terminal, but in eclipse I am getting this error<br>
*** Error during update of the kernel configuration.</p>
<p>make[2]: *** [silentoldconfig] Error 1<br>
make[1]: *** [silentoldconfig] Error 2<br>
make: *** No rule to make target `include/config/auto.conf’, needed by `include/config/kernel.release’.  Stop.</p>
<p>**** Build Finished ****</p>
<p>But since I built successfully in terminal I can proceed to the next step of creating a rootfilesystem to mount my kernel.</p>
<p>As you suggested in your previous blog<br>
wget <a href="http://fs.devloop.org.uk/filesystems/Debian-Squeeze/Debian-Squeeze-x86-root_fs.bz2" rel="nofollow">http://fs.devloop.org.uk/filesystems/Debian-Squeeze/Debian-Squeeze-x86-root_fs.bz2</a><br>
tar xjf Debian-Squeeze-x86-root_fs.bz2</p>
<p>qemu -no-kvm -s -S -kernel /mnt/build/linux-2.6/arch/x86/boot/bzImage -hda Debian-Squeeze-x86-root_fs -append “root=/dev/sda”</p>
<p>can you specify in detail under which directory should I give the above qemu command</p>
<p>Thanks <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1140">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-15" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1140">2011/12/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau</p>
<p>I followed ur steps but am getting error</p>
<p>built the kernel for x86 using</p>
<p>make defconfig<br>
make menuconfig(enabled compile with kernel debug info, compile with frame pointers)</p>
<p>then<br>
did the following<br>
went into /linux2.6.32.2/arch/x86/boot (my bzImage located here)</p>
<p>extracted the Debian-Squeeze-x86-root_fs</p>
<p>qemu -no-kvm -s -S -kernel /mnt/build/linux-2.6/arch/x86/boot/bzImage -hda Debian-Squeeze-x86-root_fs -append “root=/dev/sda”</p>
<p>now am getting kernel panic here is the error</p>
<p>Please append a correct “root=” boot option here are the available partitions</p>
<p>sda driver: sd<br>
sr0 driver: sr</p>
<p>kernel panic not syncing : VFS : unable to mount rootfs on unknown block(8,1)</p>
<p>Please help</p>
<p>Thanks</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1141">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-16" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1141">2011/12/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>I just want to wish you a merry christmas and happy new year.</p>
<p>Thanks a lot for your help, I wouldnt have gotten this far without your aid.</p>
<p>Thanks, and enjoy your vacation <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1144">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-55" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1144">2011/12/24</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I tried to do the same things you did and it works for me, but I 
did something different to extract the Debian root filesystem. I said a 
wrong thing before, to uncompress <code>Debian-Squeeze-x86-root_fs.bz2</code> I thought it was compressed with “tar” so I said the command was “<code>tar xjf Debian-Squeeze-x86-root_fs.bz2</code>” instead the correct command is:</p>
<p><code>bunzip2 -k Debian-Squeeze-x86-root_fs.bz2</code></p>
<p>It will extract the file called Debian-Squeeze-x86-root_fs which is the one QEMU should use to emulate the hard disk.</p>
<p>Another useful thing: to display kernel messages in the command window instead of the graphical window, run QEMU with:</p>
<p><code>qemu -no-kvm -s -S -kernel 
/mnt/build/linux-2.6/arch/x86/boot/bzImage -hda 
Debian-Squeeze-x86-root_fs -append "root=/dev/sda console=ttyS0" -serial
 stdio</code></p>
<p>So it’s easier to copy/paste the errors.</p>
<p>Happy holidays to you, too!</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1145">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-17" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1145">2011/12/24</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Thanks a lot for trying it out for me, anyway I got it working with a different filesystem. </p>
<p>My main objective is this: Debug the linux kernel(with source code 
stepping) in eclipse or using the ddd debugger or through any means 
possible.</p>
<p>I followed a very old comment of yours<br>
___________________________________________________________________________</p>
<p>Recompile the kernel with debugging symbols (the configuration should
 be in “kernel hacking” section inside the kernel menuconfig)<br>
- Launch QEMU with debugging enabled (“-s -S” to launch it stopped and waiting for GDB)<br>
- Launch GDB with something like this (If you have ddd installed and your toolchain comes with gdb):<br>
$ ddd –debugger arm-unknown-linux-uclibcgnueabi-gdb — vmlinux<br>
- Inside GDB:<br>
(gdb) target remote localhost:1234<br>
(gdb) b start_kernel<br>
(gdb) c<br>
- Try to debug step-by-step the kernel and understand what’s doing nasty things.<br>
ddd –debugger arm-none-linux-gnueabi-gdb — vmlinux<br>
___________________________________________________________________________</p>
<p>But I am getting error, the toolchain am using is 
arm-none-linux-gnueabi, please also specify under which path I have to 
give the command $ddd –debugger arm-unknown-linux-uclibcgnueabi-gdb — 
vmlinux<br>
Also please give a step by step instruction on how to build the linux kernel to use the ddd debugger after building the kernel</p>
<p>_________________________________________________________________________</p>
<p>error message:</p>
<p>error<br>
GDB could not be started<br>
ddd requires some inferior debugger to run</p>
<p>_________________________________________________________________________</p>
<p>Before I forget … Merry Christmas to you <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1146">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-56" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1146">2011/12/24</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Try to make GDB work without DDD first.</p>
<p>Run QEMU with the usual command “<code>qemu -s -S ...</code>”<br>
In another terminal, go in the build directory with something like “<code>cd /mnt/build/linux-2.6/</code>”<br>
If you are debugging x86 kernel, run “<code>gdb vmlinux</code>“; if you are debugging ARM kernel, prefix gdb with your toolchain, for example “<code>arm-none-linux-gnueabi-gdb vmlinux</code></p>
<p>Then, inside GDB:<br>
<code><br>
target remote localhost:1234<br>
break start_kernel<br>
continue<br>
</code></p>
<p>The result should be:<br>
<code>Reading symbols from /home/francesco/Inbox/linux-2.6.32.2/vmlinux...done.<br>
(gdb) target remote localhost:1234<br>
Remote debugging using localhost:1234<br>
0x0000fff0 in ?? ()<br>
(gdb) b start_kernel<br>
Breakpoint 1 at 0xc16df42d: file init/main.c, line 518.<br>
(gdb) c<br>
Continuing.<br>
Breakpoint 1, start_kernel () at init/main.c:518<br>
518	{<br>
(gdb) quit<br>
A debugging session is active.<br>
	Inferior 1 [Remote target] will be killed.<br>
Quit anyway? (y or n) y</code></p>
<p>When this works, you can use DDD as a graphical front-end to gdb.<br>
Run QEMU with the usual command “<code>qemu -s -S ...</code>”<br>
In another terminal, go in the build directory with something like “<code>cd /mnt/build/linux-2.6/</code>”<br>
If you are debugging x86 kernel, run “<code>ddd vmlinux</code>“; if you are debugging ARM kernel with arm-none-linux-gnueabi toolchain, run “<code>ddd --debugger arm-none-linux-gnueabi-gdb -- vmlinux</code></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1148">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-18" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1148">2011/12/26</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>This time there were no errors, but at the same time I was not able 
to perform any debugging. It said (no debug symbols found) This is the 
log I encountered </p>
<p>_________________________________________________</p>
<p>arm-none-linux-gnueabi-gdb vmlinux<br>
GNU gdb (Sourcery G++ Lite 2010q1-202) 7.0.50.20100218-cvs<br>
Copyright (C) 2010 Free Software Foundation, Inc.<br>
License GPLv3+: GNU GPL version 3 or later<br>
This is free software: you are free to change and redistribute it.<br>
There is NO WARRANTY, to the extent permitted by law.  Type “show copying”<br>
and “show warranty” for details.<br>
This GDB was configured as “–host=i686-pc-linux-gnu –target=arm-none-linux-gnueabi”.<br>
For bug reporting instructions, please see:<br>
…<br>
Reading symbols from /home/ctsuser/DS-5-Workspace/linux-2.6.32.2_k/vmlinux…(no debugging symbols found)…done.<br>
(gdb) target remote localhost:1234<br>
Remote debugging using localhost:1234<br>
0×00000000 in ?? ()<br>
(gdb) b start_kernel<br>
Breakpoint 1 at 0xc0008824<br>
(gdb) c<br>
Continuing.</p>
<p>Breakpoint 1, 0xc0008824 in start_kernel ()<br>
(gdb) quit<br>
A debugging session is active.</p>
<p>	Inferior 1 [Remote target] will be killed.</p>
<p>Quit anyway? (y or n) y</p>
<p>______________________________________________________________________</p>
<p>Note that I am not able to find the source code lines like ***file init/main.c, line 518.***** as suggested in yours</p>
<p>************************************************<br>
gdb) b start_kernel<br>
Breakpoint 1 at 0xc16df42d: file init/main.c, line 518.<br>
(gdb) c<br>
Continuing.<br>
Breakpoint 1, start_kernel () at init/main.c:518<br>
518 {<br>
*****************************************</p>
<p>I think I didnt enable compile with debug info, I will try and enable that and build again,</p>
<p>But please suggest if there might be some other problem</p>
<p>Thanks <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1149">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-19" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1149">2011/12/26</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>In your old post you said </p>
<p>“Recompile the kernel with debugging symbols (the configuration 
should be in “kernel hacking” section inside the kernel menuconfig)”</p>
<p>Can you please say exactly which option I should enable</p>
<p>I gave make ARCH=arm menuconfig</p>
<p>Under Kernel hacking I enabled, “compile kernel with debug info” but was unable to find “compile kernel with frame pointers”</p>
<p>Is the above option enough to use gdb to debug or should I enable frame pointers as well??</p>
<p>I gave the above option and am waiting for the build to complete </p>
<p>I got this message while I was using gdb “no debugging symbols found” – as mentioned in my previous comment</p>
<p>and the ddd debugger didnt have any source files to step through</p>
<p>Please help</p>
<p>Thanks <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1150">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-4c2fe01559c3c87e74ade3e8af5ee277-20" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/4c2fe01559c3c87e74ade3e8af5ee277.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">joel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1150">2011/12/26</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>IT WORKED!!!!</p>
<p>My errors were this</p>
<p>1) Had not compiled with debug symbols enabled<br>
2) Did not set the path for the none-linux-gnueabi</p>
<p>THANK YOU LOADS, </p>
<p>Can you please suggest to me sites for learning the ddd interface, I 
need to explain all the things I can do with this, ddd debugger on the 
linux kernel</p>
<p>Thanks <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1153">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-57" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1153">2011/12/28</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>There’s a nice and easy video tutorial here: <a href="http://www.youtube.com/watch?v=4aLaHTg45Sw" rel="nofollow">http://www.youtube.com/watch?v=4aLaHTg45Sw</a><br>
Here is a more in-depth tutorial: <a href="http://heather.cs.ucdavis.edu/%7Ematloff/Debug/Debug.pdf" rel="nofollow">http://heather.cs.ucdavis.edu/~matloff/Debug/Debug.pdf</a><br>
Here is the reference manual for everything else: <a href="http://www.gnu.org/software/ddd/manual/html_mono/ddd.html" rel="nofollow">http://www.gnu.org/software/ddd/manual/html_mono/ddd.html</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1154">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0fd001520995e0a50a4804f32248c802-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0fd001520995e0a50a4804f32248c802.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Nobel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1154">2011/12/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau.. can u please tell how to build kernel-qemu for android emulator, which runs on linux os.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1155">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-58" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1155">2011/12/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The official android emulator is actually derived from QEMU (<a href="https://github.com/android/platform_external_qemu" rel="nofollow">see here the source</a>).<br>
If you are using the official way to develop and emulate (which is this <a href="http://developer.android.com/sdk/index.html" rel="nofollow">SDK</a>), then you are already using QEMU and the Android ARM kernel, under the hood. I don’t know if the kernel is compiled, but <a href="http://source.android.com/source/downloading.html" rel="nofollow">here is the page</a> with instructions on how to download the source code.<br>
I don’t think the official QEMU can emulate Android, so you must use the emulator from Android repositories.</p>
<p>I never tried to run Android on QEMU myself, so I can’t help you more than this.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1164">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-0fd001520995e0a50a4804f32248c802-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/0fd001520995e0a50a4804f32248c802.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">nobel<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1164">2012/01/02</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Thanks balau .. and i wish u very happy new year <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1179">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1179">2012/01/05</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balu,<br>
actually my project is based on qemu. bt nw we are in trouble. we want 
to add a c program into qemu and run the program using qemu. we can add 
and run simple c program by the following steps..</p>
<p>Run QEMU’s user space emulator.<br>
cd i386-linux-user</p>
<p>echo ‘int main() { printf(“hello qemu\n”); }’ &gt; hello.c</p>
<p>cc -m32 hello.c -o hello</p>
<p>./qemu-i386 hello</p>
<p>but we are not able to run our program in qemu. we are using multithread( pthread )<br>
when we run the program the error comes like this<br>
qemu:unsupported syscall 240</p>
<p>plz help….. <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_sad.gif" alt=":-(" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1183">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1183">2012/01/05</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balau,<br>
   which is qemu’s main code where we can edit to add new lines of code? please reply fast</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1184">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-59" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1184">2012/01/05</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I could reproduce your problem with a simple multi-threaded program (using qemu-i386 version 0.15.1 (Debian 0.15.1+dfsg-3)).<br>
I never used QEMU userspace emulator for i386, but googling I quickly found this:<br>
<a href="http://talk.maemo.org/showthread.php?t=43480" rel="nofollow">http://talk.maemo.org/showthread.php?t=43480</a></p>
<p>So the problem seems to be the missing support of NPTL, which is also noted in this bug:<br>
<a href="https://bugs.launchpad.net/ubuntu/+source/qemu-linaro/+bug/758424" rel="nofollow">https://bugs.launchpad.net/ubuntu/+source/qemu-linaro/+bug/758424</a></p>
<p>There’s an old patch around that seems to try to add NPTL support, but I don’t know if it works:<br>
<a href="http://patchwork.ozlabs.org/patch/45206/" rel="nofollow">http://patchwork.ozlabs.org/patch/45206/</a></p>
<p>I tried to disable NPTL using the LD_ASSUME_KERNEL variable like some sites suggest (<a href="http://www.wiredrevolution.com/system-administration/select-threading-implementation-using-ld_assume_kernel" rel="nofollow">http://www.wiredrevolution.com/system-administration/select-threading-implementation-using-ld_assume_kernel</a>) but it doesn’t work on my machine probably because it’s too new.</p>
<p>It seems a complex problem, I think the right place to ask is the QEMU mailing lists: <a href="http://wiki.qemu.org/MailingLists" rel="nofollow">http://wiki.qemu.org/MailingLists</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1188">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-f9a7b718adf6958f5429e993740f572d-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/f9a7b718adf6958f5429e993740f572d.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Mike<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1188">2012/01/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,</p>
<p>Thx for such deep articles. I follow the article but when after 
compiling I run 1	qemu-system-arm -M versatilepb -m 128M -kernel zImage 
in arch/arm/boot dir  I do not see anything other than :<br>
VNC server running on `127.0.0.1:5900′</p>
<p>Please help.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1189">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-60" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1189">2012/01/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Maybe qemu is compiled without graphic support,  or you may have a
 problem with the display on the terminal where you are launching it. 
Anyway if you try to connect with a vnc client to the provided address 
you should be able to see the window.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1191">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1191">2012/01/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balau,<br>
which is the main program in qemu. we found many main.c programs inthe 
folder. but we don’t know which one is the main program. plz help…</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1192">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-61" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1192">2012/01/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Should be <code>vl.c</code></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1193">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1193">2012/01/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balue,<br>
we have client-server program in c.<br>
our task is, when we run qemu, client-server communication should begin.
 ie we need to emulate those two programs to qemu. we tried that hello 
world program for arm using qemu which is in your blog. we install 
codesourcery toolchain. and we set path also. but we are not able the 
program. error is arm-none-eabi-as: command not found<br>
we think there is an error in path setting… is there any other method to
 emulate the code in qemu? actually we save our program in a project 
folder in the desktop. and we set the path as 
/home/athira/Desktop/project . is there any error … <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_sad.gif" alt=":-(" class="wp-smiley">  plz help…:-(</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1195">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-62" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1195">2012/01/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>It is not needed to add to the path your project folder, but you 
must add to the path the folder containing the codesourcery toolchain 
(the programs starting with arm-none-eabi-)</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1197">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-4" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1197">2012/01/10</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balau,<br>
we try to compile the hello world program.<br>
but when we perform the 3rd step error comes like this..</p>
<p>athira@athira-lap:~/usr/local/CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_GNU_Linux/bin$
 arm-none-linux-gnueabi-ld -T test.ld test.o startup.o -o test.elf<br>
test.o:(.ARM.exidx+0×0): undefined reference to `__aeabi_unwind_cpp_pr0′<br>
test.o:(.ARM.exidx+0×8): undefined reference to `__aeabi_unwind_cpp_pr1′</p>
<p>how to correct this error…? <img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/icon_sad.gif" alt=":-(" class="wp-smiley"> </p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1200">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-63" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1200">2012/01/10</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The unwind functions should be called when an exception occurs, 
for example a division by zero. If you don’t care about that for now, 
you can define empty functions such as:</p>
<p>void __aeabi_unwind_cpp_pr0 (void) {}</p>
<p>I don’t think changing vl.c or any part of qemu is what you want to 
do, because if you do that, you are not running an ARM program.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1206">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-5" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1206">2012/01/12</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balau,<br>
which is the cpu emulator program in qemu..? ie. which program perform the cpu emulation in qemu..? plz reply…</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1210">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-64" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1210">2012/01/12</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I don’t think there is specific code that does just the CPU 
emulator. QEMU translates the machine code from one architecture to the 
other, so the translator is probably the most similar thing to what you 
want to search. But I don’t know exactly where the translator is.</p>
<p>I think you can find better answers in QEMU mailing list or in QEMU IRC channels.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1230">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e09d9d769e736b6c0c33dad0482268a7-6" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e09d9d769e736b6c0c33dad0482268a7.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://fisat.ac.in/" rel="external nofollow" class="url">fisat</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1230">2012/02/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hi balau,<br>
when we run an OS in qemu which program will send the machine 
instruction to the processor. our project head told us that it is 
related to kvm. plz tell the name of the program in qemu source code.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1231">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-65" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1231">2012/02/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>In QEMU there are two “worlds”: the host and the guest. The host 
is the computer that runs QEMU. The guest is the computer that QEMU 
emulates.<br>
I am assuming you are asking how the guest machine code is sent to the host processor.<br>
Normally (without KVM) when QEMU executes guest code, it translates (for
 example in “target-i386/translate.c”) from guest machine code to 
intermediate code, which is then executed with “tcg_qemu_tb_exec” in 
“tci.c”. With KVM virtualization, this translation is greatly minimized,
 but I don’t know much about the details.<br>
KVM is a kernel module running on the host that, if the host 
architecture and the guest architecture are the same (x86 host emulating
 an x86 guest), speeds up emulation by using hardware virtualization 
(like Intel VT-x).</p>
<p>See this paper for information and references about KVM and virtualization: <a href="http://www.fujitsu.com/downloads/MAG/vol47-3/paper18.pdf" rel="nofollow">Kernel-based Virtual Machine Technology</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1249">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-a11d6ebce5c8310ed09213a30891f824-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a11d6ebce5c8310ed09213a30891f824.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Amit<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1249">2012/02/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
                  What would be the command after append.<br>
-append “?” would it be /dev/nfs or /dev/ram0</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1250">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-66" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1250">2012/02/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Maybe the page is not showing correctly, the complete command is on one line:<br>
<code>qemu-system-arm -M versatilepb -m 128M -kernel zImage -initrd rootfs -append "root=/dev/ram rdinit=/test"</code></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1251">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-a11d6ebce5c8310ed09213a30891f824-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a11d6ebce5c8310ed09213a30891f824.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Amit<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1251">2012/02/09</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Thanks for your quick response.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1304">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-694aa341f565ee53f792e39cd8ecc797-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/694aa341f565ee53f792e39cd8ecc797.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://gravatar.com/satishsjadhav" rel="external nofollow" class="url">satishsjadhav</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1304">2012/02/18</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
I tried your this article on linux-2.6.33 &amp; linux-3.2.6 versions.<br>
For linux-2.6.33 version, i got “Hello World!” on the QEMU window along with boot messages.<br>
But linux-3.2.6 version couldn’t showed me the same. Also, it reports that-<br>
No filesystem_could mount root, tried :  ext2 cramfs minix vfat romfs<br>
 What could be the reason for this message? Please help me..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1306">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-67" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1306">2012/02/18</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I just tried with linux-3.2.6 and it works without problems.<br>
Are you sure you are doing exactly the same thing with the two versions?
 Are you using the same rootfs file and the same command line options 
for QEMU?</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1307">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-02c04b4749a0195649a2a38351cd496a-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/02c04b4749a0195649a2a38351cd496a.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">chandan<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1307">2012/02/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>getting error while I run </p>
<p>qemu-system-arm -M versatilepb -m 128M -kernel ./arch/arm/boot/zImage</p>
<p>output:<br>
VNC server running on `127.0.0.1:5900′</p>
<p>taking long time and giving no response.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1311">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-68" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1311">2012/02/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I answered <a href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/comment-page-2/#comment-1310" rel="nofollow">here</a>.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1318">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-3100322e34139b06d647fe10d42fcf23-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/3100322e34139b06d647fe10d42fcf23.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Luis<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1318">2012/02/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau, thanks for all your work.<br>
I have been trying for a while to get the correct combination of 
toolchain and kernel settings that would allow me to simulate a 
versatilepb board. I followed your tutorial almost to the letter (where I
 differed is: I used sb2, my version of the toolchain is 
arm-none-linux-gnueabi-gcc (Sourcery G++ Lite 2009q3-67) 4.4.1, and I 
attempted to build kernel 2.6.39.4 instead of 2.6.33).  As described in 
you tutorial, I disabled load modules and enabled eabi support. </p>
<p>The kernel built fine, however when I run:<br>
 qemu-system-arm -M versatilepb -m 128M -kernel zImage </p>
<p>All I get is a blank black window no additional output ( using 3 ) to
 look at the console, shows: “Uncompressing Linux… done, booting 
kernel.”<br>
but in I should be seeing “Kernel panic – not suncing: VFS:….”  in the 
main window ( 1), as I see when attempting the same qemu command with 
other (pre-compiled) kernels. I need to build by own kernel so using 
precompiled images is not feasible. </p>
<p>I googled the problem and see inconclusive results, have you seen 
this problem with later versions of qemu (i am using 10.5 from the 
repository) and newer kernels<br>
(later than 2.6.33)?</p>
<p>Thanks,<br>
Luis</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1319">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-3100322e34139b06d647fe10d42fcf23-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/3100322e34139b06d647fe10d42fcf23.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Luis<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1319">2012/02/21</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Balau, I figured out what the problem appears to be. The kernel 
works but intermittently. This appears to be related to the nature of 
the host running qemu-system-arm. When this is ran from a VM 1 in 10 
times works however when run on a real machine, the kernel seems to come
 up every time. It appears to be related to the virtual settings of my 
VM.  </p>
<p>At least now have a hint as to how to attack the problem. Thank You, and sorry for the noise. </p>
<p>Luis</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1335">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e45bd8d17c542874f0f00900b9aaff40-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e45bd8d17c542874f0f00900b9aaff40.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Dave M<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1335">2012/02/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau, I’m trying to find the “enable EABI” option in the 
configuration menu, but the only binary formats I can find under 
“Userspace binary formats” are<br>
[*] ELF Support<br>
[ ] ELF Core Dumps<br>
[ ] a.out and ECOFF support<br>
[ ] MISC Binary support<br>
[ ] RISC OS Personality</p>
<p>The only mention of EABI I see is in “Kernel Features” – the option 
is called “Use the ARM EABI to compile the kernel”. That’s not what 
you’re talking about, right?</p>
<p>Sorry, I’m new to this, so maybe I’m not seeing the obvious? </p>
<p>Thanks so much for your help,<br>
Dave</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1336">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e45bd8d17c542874f0f00900b9aaff40-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e45bd8d17c542874f0f00900b9aaff40.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Dave M<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1336">2012/02/29</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Nevermind – I just tried the option in “Kernel Features” and 
noticed the “Old ABI” option popping up. So I guess this is what you 
were talking about.<br>
Dave</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1337">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-149bcd0962b5f0049bde265999938e12-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/149bcd0962b5f0049bde265999938e12.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Elias Gitau<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1337">2012/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi,this is a  very informative hands on tutorial, thank you very much.<br>
However I’m using Linux mint and I install qemu-kvm from the 
repository(apt-get install), I can’t stop/kill/exit the qemu-arm-system 
process once I start it, ctl+a or ctl+c or even ctl+z not working or 
even responding, I’m forced to use top command to kill the process.<br>
Any idea on how to solve this?</p>
<p>Thanks</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1338">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-69" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1338">2012/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>@Dave M: Yeah that was the option I was talking about. I agree 
that it’s confusing, but I think that other than the ELF format it is 
necessary to specify the ABI for the passing of parameters to system 
calls (user-space to kernel-space and back).</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1339">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-70" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1339">2012/03/01</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>@Elias Gitau: Inside the terminal the command should be Ctrl+a, then x. Are you sure you don’t have caps-lock on?<br>
One way to work around it could be, instead of using the “-nographics” 
option, to use the “-serial stdio” option and close QEMU with the X on 
the black window that appears.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1390">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-707102db67fc0374f217f2acf322760b-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/707102db67fc0374f217f2acf322760b.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">ebin<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1390">2012/03/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi balau,<br>
I tried to test the kernel image on qemu using the command<br>
/# qemu-system-arm -M realview-eb-mpcore -m 128M -kernel /linux3.2/linux-3.2.11/arch/arm/boot/uImage<br>
but i am getting a blank screen on qemu and nothing is happening. what could be the problem?<br>
thanks,</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1392">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-71" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1392">2012/03/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Some suggestions :<br>
- How have you compiled the kernel?<br>
- Usually the kernel image you need to use is called zImage, not uImage.<br>
- Try adding the option “-serial stdio” to the execution<br>
- It is not necessary to be root to compile the kernel or test it with QEMU.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1393">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-707102db67fc0374f217f2acf322760b-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/707102db67fc0374f217f2acf322760b.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">ebin<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1393">2012/03/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>yes, i compiled the kernel..but when i tried with zImage and with
 serial stdio command, the qemu still showed blank screen, but in the 
terminal it showed -’uncompressing Linux… done, booting the kernel.’</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1394">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-72" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1394">2012/03/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>I’m sorry, I was actually asking what commands/configurations/kernel version/toolchain did you use to compile the kernel.<br>
You could try to use arm-specific gdb and QEMU options “-s -S” to debug 
step by step what’s happening. Also, if you try “-append earlyprintk” it
 should give you some other information.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-kaiwantech even thread-even depth-1 wrap highlander-comment" id="comment-1395">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-e5216008e0b231a760d20d22b01c4328-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/e5216008e0b231a760d20d22b01c4328.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://www.designergraphix.com/" rel="external nofollow" class="url">Kaiwan</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1395">2012/03/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>@ebin: I think I faced a similar issue…&amp; in my case using the “-nographic” option helped.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1398">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-707102db67fc0374f217f2acf322760b-2" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/707102db67fc0374f217f2acf322760b.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">ebin<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1398">2012/03/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>i used the following commands<br>
make ARCH=arm versatile_defconfig, make ARCH=arm menuconfig, make 
ARCH=arm CROSS_COMPILE=/arm-2008q3/bin/arm-none-linux-gnueabi- all and i
 got the zImage.</p>
<p>the kernel version is-3.2.11, toolchain-gcc version 4.3.2 (Sourcery G++ Lite 2008q3-72)</p>
<p>@kaiwan- i tried using ‘-nographic’command but no change was there..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1399">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-73" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1399">2012/03/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>The problem is that you are compiling for versatile platform but you are trying to emulate the kernel on a realview mpcore.<br>
They have different architectures (ARM926 vs ARM11 multicore) and 
different memory maps, I don’t believe it is possible that a kernel 
compiled for the first works on the second.<br>
I’m not familiar with compiling Linux for realview platforms but this link should help: <a href="http://www.arm.com/community/software-enablement/linux.php?tab=Linux+OS+Downloads" rel="nofollow">Linux Support for the ARM Architecture</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1400">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-707102db67fc0374f217f2acf322760b-3" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/707102db67fc0374f217f2acf322760b.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">ebin<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1400">2012/03/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>i’m sorry.Actually at first, i compiled for realview mpcore board
 and tried to emulate on qemu, but it didn’t work. Later i compiled for 
versatilePB board using the previously mentioned commands and  used the 
command – ‘ qemu-system-arm -M versatilepb -m 128M -serial stdio -kernel
 zImage’  for testing on qemu.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-1402">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-74" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1402">2012/03/19</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>For the Verstile, maybe the compilation has not been done from a clean state.<br>
To start from a clean state you could:<br>
- extract the kernel again on a new directory and redo the configuration and compilation, or<br>
- run “make ARCH=arm distclean” on the directory where you already compiled the kernel, and then redo the steps for Versatile.</p>
<p>I don’t know why the realview compilation did not work.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1410">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-8a0c0bfd0a89621a3705b76aec26d6c6-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/8a0c0bfd0a89621a3705b76aec26d6c6.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Victor<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1410">2012/03/23</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello, </p>
<p>I had the same problem with the linux kernel on qemu-system-arm with 
versatilepb: kernel hangs at “Uncompressing linux kernel … done.”. After
 doing some debugging I found out that it enters in an infinite loop at 
calibrate_delay(). Infinite loop is due to the fact that “jiffies” is 
not updated so timer irqs are not handled. The problem can be reproduced
 on linux-2.6.33.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1721">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/image_normal.jpg" class="avatar avatar-48" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://twitter.com/da_tibmeister" rel="external nofollow" class="url">da_tibmeister (@da_tibmeister)</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1721">2012/07/08</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>So I’ve been trying for several days to get this to work with the
 newest debian based image from RPI, and I am having nothing but issues.
  The reason I am trying to compile a new kernel is to add vFAT support,
 it seems I can’t find a single zImage for 3.1.9 that has this, and 
without it under QEMU the /boot partition is not able to be mounted.<br>
So anyhew, I am using arm-2011.03-42-arm-none-eabi-i686-pc-linux-gnu 
toolchain (having tried the 2009q3 without any luck) and I get this 
damned error I can’t figure out during the make process, which is a 
fatal error.<br>
arm-2011.03/bin/arm-none-eabi-gcc: 1: Syntax error: “(” unexpected<br>
Can someone who’s smarter than I help?  I hope to make a fully 
operational RPI QEMU image that can be used to bench many different 
things then write to an SD card for use on the PI, and I am willing to 
put the zImage and initrd up on my site so that one only has to DL the 
release from RPI and these two files.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-1722">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-75" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1722">2012/07/08</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>It’s a strange error indeed. Could you explain the steps you are following to cross-compile the kernel?<br>
Have you tried toolchains other than CodeSourcery? For example Linaro or EmDebian.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-1991">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2b125e00f8b2c34684364f7da3efa3dd-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2b125e00f8b2c34684364f7da3efa3dd.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Colombian<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-1991">2012/09/25</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hello ebin. </p>
<p>you must recompile your kernel linux.</p>
<p>make ARCH=arm versatile_defconfig<br>
make menuconfig ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- </p>
<p>     (enable the option eabi inside your kernel (kernel feature -&gt;))</p>
<p>make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- uImage all</p>
<p>SUCEESS</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-2324">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-dda084c4973ff031a1f9fab4dbebffee-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/dda084c4973ff031a1f9fab4dbebffee.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">deepu james<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2324">2012/12/06</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello,<br>
I did all the steps u mentined ,But while running “qemu-system-arm -M 
versatilepb -m 128M -kernel zImage ” I am getting the following error.<br>
:qemu-0.13.0/tcg/tcg.c:1314: tcg fatal error”..how to solve it</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-2325">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-76" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2325">2012/12/06</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>It’s a very strange bug. If you can, try to use a newer QEMU 
version or run it on a different (in terms of Linux distribution or CPU 
architecture) <strong>host</strong> machine.<br>
If the latest QEMU version also has the same problem, report the bug to <a href="https://bugs.launchpad.net/qemu/" rel="nofollow">QEMU developers</a>. Otherwise, you should probably report the bug to your Linux distribution bug tracker.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-2327">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-2b125e00f8b2c34684364f7da3efa3dd-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/2b125e00f8b2c34684364f7da3efa3dd.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Willy<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2327">2012/12/07</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>try with this linux versions:</p>
<p><a href="http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.37.tar.bz2" rel="nofollow">http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.37.tar.bz2</a>, 2.6.39 or 2.6.22</p>
<p>SUCCESS</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-2346">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7a7f2935cfc6bb2a17c5b4d5130f9676-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7a7f2935cfc6bb2a17c5b4d5130f9676.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Deepu James<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2346">2012/12/16</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hello,</p>
<p>i installed a new version of qemu  and did the same 
steps.”:qemu-0.13.0/tcg/tcg.c:1314: tcg fatal error “problem is 
solved.Thanks a lot for that.<br>
But now I am getting  the following error .How can i go out of this problem??</p>
<p>jae3cob@deepu:~/study$ qemu-system-arm -M versatilepb -m 128M -kernel
 ../linux-2.6/arch/arm/boot/zImage -initrd rootfs -append “root=/dev/ram
 rdinit=/test”<br>
oss: Could not initialize DAC<br>
oss: Failed to open `/dev/dsp’<br>
oss: Reason: No such file or directory<br>
oss: Could not initialize DAC<br>
oss: Failed to open `/dev/dsp’<br>
oss: Reason: No such file or directory<br>
audio: Failed to create voice `lm4549.out’<br>
VNC server running on `127.0.0.1:5900′<br>
pflash_write: Unimplemented flash cmd sequence (offset 0000000000000000, wcycle 0×0 cmd 0×0 value 0xf000f0)<br>
pflash_write: Unimplemented flash cmd sequence (offset 0000000000000000, wcycle 0×0 cmd 0×0 value 0xf0)..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-2348">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-77" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2348">2012/12/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Did you compile it yourself? If so, there are two <code>./configure</code> issues:</p>
<p>First, add <code>--audio-drv-list="alsa oss"</code> as explained in <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=451234#10" rel="nofollow">this message</a>. This should solve the “oss” problems”.</p>
<p>Then, you must have SDL development libraries installed and add <code>--enable-sdl</code> to <code>./configure</code> command. The output of the configuration should have this line somewhere:</p>
<p><code>SDL support       yes</code></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment even thread-even depth-1 wrap highlander-comment" id="comment-2349">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-7a7f2935cfc6bb2a17c5b4d5130f9676-1" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/7a7f2935cfc6bb2a17c5b4d5130f9676.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">Deepu James<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2349">2012/12/17</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>thanks a lot for your support ..:)….finally qemu worked….</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-2454">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-f41e15227df17ee0ada3122c352b003f-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/f41e15227df17ee0ada3122c352b003f.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">flashman<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2454">2013/01/30</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Hi Balau,<br>
thanks for the post and sorry if I resume an old post<br>
The tutorial was perfect and I started to navigate and to try linaro img from the linaro ws. Also ubuntu and android.<br>
In linaro webpage there is a short overview to run qemu using :<br>
qemu-system-arm -kernel vmlinuz-2.6.37-1003-linaro-vexpress -M 
vexpress-a9 -cpu cortex-a9 -serial stdio -m 1024 -initrd 
initrd.img-2.6.37-1003-linaro-vexpress -append ‘root=/dev/mmcblk0p2 rw 
mem=1024M raid=noautodetect console=ttyAMA0,38400n8 rootwait 
vmalloc=256MB devtmpfs.mount=0′ -sd vexpress.img<br>
As you see the -sd option is used as secure digitale img. Is possible to
 “unpack” the original image of linaro “vexpress.img” and add some new 
file, for example apk file ?<br>
On linaro there the procedure to build from scratch but requires too much space.<br>
Thanks a lot!</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-2457">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-78" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2457">2013/01/30</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>Answered here: <a href="http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/#comment-2456" rel="nofollow">http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/#comment-2456</a></p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment odd alt thread-odd thread-alt depth-1 wrap highlander-comment" id="comment-2626">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-1bb7dd0f5aaad6aa08282605f38a2338-0" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/1bb7dd0f5aaad6aa08282605f38a2338.png" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment">deepu james<br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2626">2013/04/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>hello ,</p>
<p>How can we transfer files between arm qemu system and my ubuntu host system ?.Can I use tftp for this?..</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

        <li class="comment byuser comment-author-balau82 bypostauthor even thread-even depth-1 wrap highlander-comment" id="comment-2630">

		    <div class="meta-left">

				<div class="meta-wrap">

					<img id="grav-641a1371a45c5e27a54691b9c697743a-79" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a_002.jpeg" class="avatar avatar-48 grav-hashed grav-hijack" height="48" width="48"><br>

					<p class="authorcomment"><a href="http://balau82.wordpress.com/" rel="external nofollow" class="url">Balau</a><br></p>

					<p><small><a href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#comment-2630">2013/04/22</a></small></p>

				</div>

			</div>

			<div class="text-right ">

				<p>As you guessed, the easiest way to exchange files is to use the virtual network created by QEMU.<br>
See this as reference: <a href="http://wiki.qemu.org/Documentation/Networking" rel="nofollow">QEMU Networking</a><br>
For example you could open an ftp server on the host(10.0.2.2) and reach it from the guest(10.0.2.15) with an ftp client.<br>
You could also mount remote folders with something like NFS.</p>

				
			</div>


		<span class="comm-reply">

		
		
		</span>

		<div class="fix"></div>

	    </li>

<!-- #comment-## -->

	</ol>


	
	<div class="commh2">
	7 Trackbacks For This Post	</div>

	<ol class="trackbacklist snap_preview">

	
		<li class="alt " id="trackback-196">

			<cite><a href="http://balau82.wordpress.com/2010/03/27/busybox-for-arm-on-qemu/" rel="external nofollow" class="url">Busybox for ARM on QEMU « Balau</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-196" title="">March 27th, 2010 → 19:05</a> </small>

			<p>[...] Posts Hello world for bare metal ARM using QEMUU-boot for 
ARM on QEMUCompiling Linux kernel for QEMU ARM emulatorSimplest bare 
metal program for ARMSimplest serial port terminal in C#Secure remote 
storage with [...]</p>

		</li>

	
	
		<li class=" " id="trackback-222">

			<cite><a href="http://balau82.wordpress.com/2010/04/12/booting-linux-with-u-boot-on-qemu-arm/" rel="external nofollow" class="url">Booting Linux with U-Boot on QEMU ARM « Balau</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-222" title="">April 12th, 2010 → 19:55</a> </small>

			<p>[...] of an ARM Versatile Platform Board, making it run bare metal
 programs, the U-Boot boot-loader and a Linux kernel complete with a 
Busybox-based file system. I tried to put everything together to emulate
 a complete [...]</p>

		</li>

	
	
		<li class="alt " id="trackback-264">

			<cite><a href="http://balau82.wordpress.com/2010/04/27/linux-nfs-root-under-qemu-arm-emulator/" rel="external nofollow" class="url">Linux NFS Root under QEMU ARM emulator « Balau</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-264" title="">April 27th, 2010 → 21:36</a> </small>

			<p>[...] zImage: the Linux kernel created in my previous post here [...]</p>

		</li>

	
	
		<li class=" " id="trackback-466">

			<cite><a href="http://elasticsheep.com/2010/10/linux-arm-emulation-with-qemu/" rel="external nofollow" class="url">Linux ARM emulation with QEMU</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-466" title="">October 4th, 2010 → 18:40</a> </small>

			<p>[...] compiling-linux-kernel-for-qemu-arm-emulator [...]</p>

		</li>

	
	
		<li class="alt " id="trackback-608">

			<cite><a href="http://balau82.wordpress.com/2011/01/02/blog-stats-fo-2010/" rel="external nofollow" class="url">Blog stats for 2010 « Balau</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-608" title="">January 2nd, 2011 → 17:25</a> </small>

			<p>[...] Compiling Linux kernel for QEMU ARM emulator March 2010 25 comments and 1 Like on WordPress.com, 3 [...]</p>

		</li>

	
	
		<li class=" " id="trackback-938">

			<cite><a href="http://cartesianproduct.wordpress.com/2011/09/10/problems-with-oprofile/" rel="external nofollow" class="url">Problems with oprofile | cartesian product</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-938" title="">September 10th, 2011 → 14:26</a> </small>

			<p>[...] imabonehead: Compiling Linux kernel for QEMU ARM emulator ” 
Balau (balau82.wordpress.com)   Advertisement  LD_AddCustomAttr("AdOpt",
 "1"); LD_AddCustomAttr("Origin", "other"); LD_AddCustomAttr("theme_bg",
 "ffffff"); LD_AddCustomAttr("theme_text", "333333"); 
LD_AddCustomAttr("theme_link", "0066cc"); 
LD_AddCustomAttr("theme_border", "f2f7fc"); 
LD_AddCustomAttr("theme_url", "ff4b33"); LD_AddCustomAttr("LangId", 
"1"); LD_AddCustomAttr("Autotag", "technology"); LD_AddCustomAttr("Tag",
 "kvm"); LD_AddCustomAttr("Tag", "linux"); LD_AddCustomAttr("Tag", 
"linux-kernel"); LD_AddCustomAttr("Tag", "oprofile"); 
LD_AddCustomAttr("Tag", "vmlinux"); LD_AddSlot("wpcom_below_post"); 
LD_GetBids();  Rate this:  Share 
this:TwitterPrintFacebookLinkedInEmailDiggRedditStumbleUponLike 
this:LikeBe the first to like this post. [...]</p>

		</li>

	
	
		<li class="alt " id="trackback-1431">

			<cite><a href="http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/" rel="external nofollow" class="url">Compile Linux kernel 3.2 for ARM and emulate with QEMU « Balau</a></cite> →
						<br>

			<small class="commentmetadata"><a href="#trackback-1431" title="">March 31st, 2012 → 11:06</a> </small>

			<p>[...] tutorial is an updated version of this old post, with newer software and less obsolete emulated [...]</p>

		</li>

	
	
	</ol>

	
 


								<div class="js" id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://balau82.wordpress.com/wp-comments-post.php" method="post" id="commentform">
																										


												
<input name="hc_post_as" id="hc_post_as" value="guest" type="hidden">

<div class="comment-form-field comment-textarea">
	
	<div id="comment-form-comment"><textarea tabindex="-1" style="height: 36px; resize: none; overflow-y: hidden; position: absolute; top: 0px; left: -9999px; width: 588px; line-height: 16px; text-decoration: none; letter-spacing: 0px;" placeholder="Enter your comment here..."></textarea><textarea style="height: 36px; resize: none; overflow-y: hidden;" placeholder="Enter your comment here..." id="comment" name="comment"></textarea></div>
</div>

<div style="display: none;" id="comment-form-identity">

	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="#comment-form-guest" id="postas-guest" title="Guest">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:WordPress.com" id="postas-wordpress" title="WordPress.com">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Twitter" id="postas-twitter" title="Twitter">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Facebook" id="postas-facebook" title="Facebook">
					<span></span>
				</a>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/ad516503a11cd5ca435acc9bb6523536.png" alt="Gravatar" class="no-grav" width="25">
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email"></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text"></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="text"></div>
				</div>
			</div>
	
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/wplogo.png" alt="WordPress.com Logo" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="" type="hidden">
				<input name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="" type="hidden">
				<input name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="" type="hidden">
				<p class="comment-form-posting-as pa-wordpress"><strong></strong> You are commenting using your WordPress.com account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'wordpress'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/ad516503a11cd5ca435acc9bb6523536.png" alt="Twitter picture" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="" type="hidden">
				<input name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="" type="hidden">
				<input name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="" type="hidden">
				<p class="comment-form-posting-as pa-twitter"><strong></strong> You are commenting using your Twitter account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'twitter'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/ad516503a11cd5ca435acc9bb6523536.png" alt="Facebook photo" class="no-grav" width="25">
			</div>

				<div class="comment-form-fields">
				<input name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="" type="hidden">
				<input name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="" type="hidden">
				<input name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="" type="hidden">
				<p class="comment-form-posting-as pa-facebook"><strong></strong> You are commenting using your Facebook account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout(%20'facebook'%20);">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

	
</div>

<script type="text/javascript">
jQuery(document).ready(function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
});
</script>

<div style="display: none;" id="comment-form-subscribe">
	<p class="comment-subscription-form"><input name="subscribe" id="subscribe" value="subscribe" style="width: auto;" tabindex="6" type="checkbox"> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of follow-up comments via email.</label></p><p class="post-subscription-form"><input name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto;" tabindex="7" type="checkbox"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog" style="display: inline;">Notify me of new posts via email.</label></p></div>

												<p style="display: none;" class="form-submit">
							<input name="submit" id="comment-submit" value="Post Comment" type="submit">
							<input name="comment_post_ID" value="430" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
						</p>
						
<input name="genseq" value="1367973673" type="hidden">
<p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="566a5ac9a6" type="hidden"></p><script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/form.js"></script>
<p style="display: none;"><input id="ak_js" name="ak_js" value="1367973680344" type="hidden"></p>					</form>
							</div><!-- #respond -->
			<div style="clear: both"></div>			

				</div>

		
	    
</div><!-- Content -->

<div class="sidebar sidebar_right">
	
    	<div id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://balau82.wordpress.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input name="s" id="s" type="text">
					<input id="searchsubmit" value="Search" type="submit">
				</div>
			</form></div><!--/widget--><div id="text-419679833" class="widget widget_text"><h3 class="hl">Subscribe</h3>			<div class="textwidget"><p><a href="http://feeds.feedburner.com/Balau"><img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/rss.png" alt="Entries RSS Feed"> Entries</a></p>
<p><a href="http://balau82.wordpress.com/comments/feed/"><img src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/rss.png" alt="Comments RSS Feed"> Comments</a></p>
</div>
		</div><!--/widget--><div id="gravatar-2" class="widget widget_gravatar"><h3 class="hl">Author</h3><p><a href="http://balau82.wordpress.com/about-me/"><img id="grav-641a1371a45c5e27a54691b9c697743a-80" alt="" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/641a1371a45c5e27a54691b9c697743a.jpeg" class="avatar avatar-64 grav-hashed" style="display: block; margin: 0 auto;" height="64" width="64"></a></p>
</div><!--/widget--><div id="categories-419682781" class="widget widget_categories"><h3 class="hl">Categories</h3>		<ul>
	<li class="cat-item cat-item-79"><a href="http://balau82.wordpress.com/category/hardware/" title="View all posts filed under Hardware">Hardware</a>
</li>
	<li class="cat-item cat-item-2200"><a href="http://balau82.wordpress.com/category/links/" title="View all posts filed under Links">Links</a>
</li>
	<li class="cat-item cat-item-581"><a href="http://balau82.wordpress.com/category/software/" title="View all posts filed under Software">Software</a>
<ul class="children">
	<li class="cat-item cat-item-1275993"><a href="http://balau82.wordpress.com/category/software/embedded-software/" title="View all posts filed under Embedded">Embedded</a>
</li>
	<li class="cat-item cat-item-22"><a href="http://balau82.wordpress.com/category/software/internet/" title="View all posts filed under Internet">Internet</a>
</li>
	<li class="cat-item cat-item-28252"><a href="http://balau82.wordpress.com/category/software/security-software/" title="View all posts filed under Security">Security</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-30025"><a href="http://balau82.wordpress.com/category/working/" title="View all posts filed under Working">Working</a>
</li>
		</ul>
</div><!--/widget--><div id="wp_tag_cloud-2" class="widget wp_widget_tag_cloud"><h3 class="hl">Tags</h3><div style="overflow:hidden"><a href="http://balau82.wordpress.com/tag/android/" class="tag-link-641922" title="11 topics" style="font-size: 11.962264150943pt;">android</a>
<a href="http://balau82.wordpress.com/tag/ansi-c/" class="tag-link-234621" title="6 topics" style="font-size: 8.9245283018868pt;">ansi c</a>
<a href="http://balau82.wordpress.com/tag/arduino/" class="tag-link-134289" title="19 topics" style="font-size: 14.867924528302pt;">arduino</a>
<a href="http://balau82.wordpress.com/tag/arm/" class="tag-link-255243" title="43 topics" style="font-size: 19.358490566038pt;">ARM</a>
<a href="http://balau82.wordpress.com/tag/backup/" class="tag-link-5469" title="5 topics" style="font-size: 8pt;">backup</a>
<a href="http://balau82.wordpress.com/tag/bare-metal/" class="tag-link-7687296" title="9 topics" style="font-size: 10.905660377358pt;">bare metal</a>
<a href="http://balau82.wordpress.com/tag/codesourcery/" class="tag-link-12268065" title="15 topics" style="font-size: 13.547169811321pt;">codesourcery</a>
<a href="http://balau82.wordpress.com/tag/debian/" class="tag-link-428" title="18 topics" style="font-size: 14.603773584906pt;">debian</a>
<a href="http://balau82.wordpress.com/tag/debug/" class="tag-link-28136" title="8 topics" style="font-size: 10.245283018868pt;">debug</a>
<a href="http://balau82.wordpress.com/tag/eda/" class="tag-link-112821" title="6 topics" style="font-size: 8.9245283018868pt;">eda</a>
<a href="http://balau82.wordpress.com/tag/electronics/" class="tag-link-7334" title="9 topics" style="font-size: 10.905660377358pt;">electronics</a>
<a href="http://balau82.wordpress.com/tag/embedded/" class="tag-link-28627" title="15 topics" style="font-size: 13.547169811321pt;">embedded</a>
<a href="http://balau82.wordpress.com/tag/encryption/" class="tag-link-6474" title="10 topics" style="font-size: 11.433962264151pt;">encryption</a>
<a href="http://balau82.wordpress.com/tag/firefox/" class="tag-link-45" title="9 topics" style="font-size: 10.905660377358pt;">firefox</a>
<a href="http://balau82.wordpress.com/tag/fpga/" class="tag-link-28628" title="6 topics" style="font-size: 8.9245283018868pt;">fpga</a>
<a href="http://balau82.wordpress.com/tag/gcc/" class="tag-link-185469" title="16 topics" style="font-size: 13.943396226415pt;">gcc</a>
<a href="http://balau82.wordpress.com/tag/gnu/" class="tag-link-52113" title="19 topics" style="font-size: 14.867924528302pt;">gnu</a>
<a href="http://balau82.wordpress.com/tag/google/" class="tag-link-81" title="12 topics" style="font-size: 12.358490566038pt;">google</a>
<a href="http://balau82.wordpress.com/tag/hacking/" class="tag-link-1816" title="6 topics" style="font-size: 8.9245283018868pt;">hacking</a>
<a href="http://balau82.wordpress.com/tag/hardware/" class="tag-link-79" title="7 topics" style="font-size: 9.5849056603774pt;">Hardware</a>
<a href="http://balau82.wordpress.com/tag/hdl/" class="tag-link-193967" title="10 topics" style="font-size: 11.433962264151pt;">hdl</a>
<a href="http://balau82.wordpress.com/tag/howto/" class="tag-link-1921" title="7 topics" style="font-size: 9.5849056603774pt;">howto</a>
<a href="http://balau82.wordpress.com/tag/ip-xact/" class="tag-link-17688909" title="5 topics" style="font-size: 8pt;">ip-xact</a>
<a href="http://balau82.wordpress.com/tag/jtag/" class="tag-link-344281" title="7 topics" style="font-size: 9.5849056603774pt;">jtag</a>
<a href="http://balau82.wordpress.com/tag/kernel/" class="tag-link-2428" title="17 topics" style="font-size: 14.339622641509pt;">kernel</a>
<a href="http://balau82.wordpress.com/tag/linux/" class="tag-link-610" title="68 topics" style="font-size: 22pt;">linux</a>
<a href="http://balau82.wordpress.com/tag/microcontrollers/" class="tag-link-139916" title="6 topics" style="font-size: 8.9245283018868pt;">microcontrollers</a>
<a href="http://balau82.wordpress.com/tag/opencores/" class="tag-link-28551710" title="6 topics" style="font-size: 8.9245283018868pt;">opencores</a>
<a href="http://balau82.wordpress.com/tag/openrisc/" class="tag-link-13845054" title="6 topics" style="font-size: 8.9245283018868pt;">openrisc</a>
<a href="http://balau82.wordpress.com/tag/open-source/" class="tag-link-25" title="29 topics" style="font-size: 17.245283018868pt;">open source</a>
<a href="http://balau82.wordpress.com/tag/open-source-hardware/" class="tag-link-1234386" title="22 topics" style="font-size: 15.660377358491pt;">open source hardware</a>
<a href="http://balau82.wordpress.com/tag/programming/" class="tag-link-196" title="7 topics" style="font-size: 9.5849056603774pt;">programming</a>
<a href="http://balau82.wordpress.com/tag/python/" class="tag-link-832" title="12 topics" style="font-size: 12.358490566038pt;">python</a>
<a href="http://balau82.wordpress.com/tag/qemu/" class="tag-link-332303" title="23 topics" style="font-size: 15.924528301887pt;">qemu</a>
<a href="http://balau82.wordpress.com/tag/security/" class="tag-link-801" title="16 topics" style="font-size: 13.943396226415pt;">security</a>
<a href="http://balau82.wordpress.com/tag/serial-port/" class="tag-link-2227056" title="6 topics" style="font-size: 8.9245283018868pt;">serial port</a>
<a href="http://balau82.wordpress.com/tag/soc/" class="tag-link-4959" title="6 topics" style="font-size: 8.9245283018868pt;">soc</a>
<a href="http://balau82.wordpress.com/tag/soft-work/" class="tag-link-17199712" title="8 topics" style="font-size: 10.245283018868pt;">soft work</a>
<a href="http://balau82.wordpress.com/tag/ted/" class="tag-link-37208" title="5 topics" style="font-size: 8pt;">ted</a>
<a href="http://balau82.wordpress.com/tag/twitter/" class="tag-link-599182" title="5 topics" style="font-size: 8pt;">twitter</a>
<a href="http://balau82.wordpress.com/tag/uart/" class="tag-link-4497883" title="6 topics" style="font-size: 8.9245283018868pt;">uart</a>
<a href="http://balau82.wordpress.com/tag/ubuntu/" class="tag-link-255" title="23 topics" style="font-size: 15.924528301887pt;">ubuntu</a>
<a href="http://balau82.wordpress.com/tag/usb/" class="tag-link-57231" title="6 topics" style="font-size: 8.9245283018868pt;">usb</a>
<a href="http://balau82.wordpress.com/tag/verilog/" class="tag-link-148709" title="6 topics" style="font-size: 8.9245283018868pt;">verilog</a>
<a href="http://balau82.wordpress.com/tag/wordpress/" class="tag-link-33" title="5 topics" style="font-size: 8pt;">wordpress</a></div></div><!--/widget--><div id="text-419679832" class="widget widget_text"><h3 class="hl">License</h3>			<div class="textwidget"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0;" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/88x31.png"></a><br><span>Balau Blog</span> by <a href="http://balau82.wordpress.com/" rel="cc:attributionURL">Francesco Balducci</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0 License</a>.</div>
		</div><!--/widget-->
</div>

			<div class="footer footer_left">

                <div class="fl"><a href="http://wordpress.com/?ref=footer" rel="generator">Blog at WordPress.com</a>.</div>

				<div class="fr">Theme: <a href="http://theme.wordpress.com/themes/inuit-types/" title="Learn more about this theme">Inuit Types</a> by <a href="http://bizzartic.com/" rel="designer">BizzArtic</a>.</div>

                <div class="fix"><!----></div>

            </div>


    </div>

</div>

<div class="fix"><!----></div>


<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.en,type.wpcom,posttag.arm,posttag.codesourcery,posttag.gcc,posttag.gnu,posttag.initramfs,posttag.kernel,posttag.linux,posttag.open-source,posttag.qemu,as"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom%2Cposttag.arm%2Cposttag.codesourcery%2Cposttag.gcc%2Cposttag.gnu%2Cposttag.initramfs%2Cposttag.kernel%2Cposttag.linux%2Cposttag.open-source%2Cposttag.qemu%2Cas" height="1" width="1" alt="" /></div></noscript>

<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/wpgroho.js"></script>
<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wp-admin-bar-my-account' ); });</script>	<div style="display:none">
	<div class="grofile-hash-map-76eeae24cee7550c539c038074f0a62c">
	</div>
	<div class="grofile-hash-map-641a1371a45c5e27a54691b9c697743a">
	</div>
	<div class="grofile-hash-map-f614afd95bd63cd03801d19fd1d70c44">
	</div>
	<div class="grofile-hash-map-9803d8e10f36c8eb2a0f4a00c85b8fc6">
	</div>
	<div class="grofile-hash-map-bfdec1abeb5b91c1d5a6814700afb5eb">
	</div>
	<div class="grofile-hash-map-27000720c0b14ff79738b77ea4ec37f5">
	</div>
	<div class="grofile-hash-map-383c373259d7a2d30ebe940083e6f097">
	</div>
	<div class="grofile-hash-map-79119970243e91c7f55ae293e7eeb991">
	</div>
	<div class="grofile-hash-map-c7d6eacbcf71523af823ceeaaa35b7a6">
	</div>
	<div class="grofile-hash-map-41447511b3c69c34bb89c2a947e38bb4">
	</div>
	<div class="grofile-hash-map-35b87dbba18af0b2b71846509a5998f4">
	</div>
	<div class="grofile-hash-map-0aa6bc294145c8da7a928ccd85ee81b9">
	</div>
	<div class="grofile-hash-map-e5216008e0b231a760d20d22b01c4328">
	</div>
	<div class="grofile-hash-map-7d5cb0dcf6e13919e03f6f8a2f88fcb3">
	</div>
	<div class="grofile-hash-map-695015e9dca51587154bc85f69d2c73c">
	</div>
	<div class="grofile-hash-map-915d09436b6ac94a94cfa9afa6758553">
	</div>
	<div class="grofile-hash-map-ba243ec42e18dc96a66624bd840de6f8">
	</div>
	<div class="grofile-hash-map-3c199212f8476bc47baede0e208be877">
	</div>
	<div class="grofile-hash-map-dda9a72a42f234392be5c2350e2cd52f">
	</div>
	<div class="grofile-hash-map-7c4d3e21b549a74437497409ed3c48ed">
	</div>
	<div class="grofile-hash-map-418fbff5b770491960488632896822bf">
	</div>
	<div class="grofile-hash-map-78f7f32c43a07f38f584e8555a10cc1f">
	</div>
	<div class="grofile-hash-map-88e5888a6bca766743c9bb9e8ec9906c">
	</div>
	<div class="grofile-hash-map-7a7b33b266e38633210b339b0c9031b6">
	</div>
	<div class="grofile-hash-map-7835164e39c1dd2f77b4e8ef5f3bceff">
	</div>
	<div class="grofile-hash-map-936892438887e2eb7c1c8ed8fd22d210">
	</div>
	<div class="grofile-hash-map-74ae9f2ab3e3e72161fce28858f4fa3c">
	</div>
	<div class="grofile-hash-map-2c9a416d30fa004dca026ce3af1fc5f9">
	</div>
	<div class="grofile-hash-map-d9d27721453270861e7d3d1ee310e913">
	</div>
	<div class="grofile-hash-map-2c9a416d30fa004dca026ce3af1fc5f9">
	</div>
	<div class="grofile-hash-map-4c2fe01559c3c87e74ade3e8af5ee277">
	</div>
	<div class="grofile-hash-map-2c9a416d30fa004dca026ce3af1fc5f9">
	</div>
	<div class="grofile-hash-map-0fd001520995e0a50a4804f32248c802">
	</div>
	<div class="grofile-hash-map-e09d9d769e736b6c0c33dad0482268a7">
	</div>
	<div class="grofile-hash-map-f9a7b718adf6958f5429e993740f572d">
	</div>
	<div class="grofile-hash-map-a11d6ebce5c8310ed09213a30891f824">
	</div>
	<div class="grofile-hash-map-694aa341f565ee53f792e39cd8ecc797">
	</div>
	<div class="grofile-hash-map-02c04b4749a0195649a2a38351cd496a">
	</div>
	<div class="grofile-hash-map-3100322e34139b06d647fe10d42fcf23">
	</div>
	<div class="grofile-hash-map-e45bd8d17c542874f0f00900b9aaff40">
	</div>
	<div class="grofile-hash-map-149bcd0962b5f0049bde265999938e12">
	</div>
	<div class="grofile-hash-map-707102db67fc0374f217f2acf322760b">
	</div>
	<div class="grofile-hash-map-e5216008e0b231a760d20d22b01c4328">
	</div>
	<div class="grofile-hash-map-8a0c0bfd0a89621a3705b76aec26d6c6">
	</div>
	<div class="grofile-hash-map-dabd17bee570b7278325754d389dc663">
	</div>
	<div class="grofile-hash-map-2b125e00f8b2c34684364f7da3efa3dd">
	</div>
	<div class="grofile-hash-map-dda084c4973ff031a1f9fab4dbebffee">
	</div>
	<div class="grofile-hash-map-7a7f2935cfc6bb2a17c5b4d5130f9676">
	</div>
	<div class="grofile-hash-map-f41e15227df17ee0ada3122c352b003f">
	</div>
	<div class="grofile-hash-map-1bb7dd0f5aaad6aa08282605f38a2338">
	</div>
	<div class="grofile-hash-map-641a1371a45c5e27a54691b9c697743a">
	</div>
	</div>
<script type="text/javascript">
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"http:\/\/balau82.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"http:\/\/balau82.wordpress.com\/wp-login.php?action=logout&_wpnonce=34cb3327c6","homeURL":"http:\/\/balau82.wordpress.com\/","postID":"430","gravDefault":"mystery","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"0"};
/* ]]> */
</script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/script.js"></script>

	<div style="bottom: -260px;" id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id="bsub-text">Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow “Balau”</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

						<p class="bit-follow-count">Join 392 other followers</p>
			<p><input name="email" style="width: 95%; padding: 1px 2px" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter email address" : this.value;' id="loggedout-follow-field" type="email"></p>

			<input name="action" value="subscribe" type="hidden">
			<input name="blog_id" value="6718912" type="hidden">
			<input name="source" value="http://balau82.wordpress.com/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/" type="hidden">
			<input name="sub-type" value="loggedout-follow" type="hidden">

			<input id="_wpnonce" name="_wpnonce" value="54e8735f34" type="hidden"><input name="_wp_http_referer" value="/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/" type="hidden">
			<p id="bsub-subscribe-button"><input value="Sign me up" type="submit"></p>
			</form>
					<div id="bsub-credit"><a href="http://wordpress.com/signup/?ref=lof">Powered by WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->

	<script type="text/javascript">
		WPCOM_sharing_counts = {"http:\/\/balau82.wordpress.com\/2010\/03\/22\/compiling-linux-kernel-for-qemu-arm-emulator\/":430}	</script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/sharing.js"></script>
		<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-google-plus-1' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=600,height=600' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
							<script type="text/javascript">
			jQuery(document).on('ready', function(){
				jQuery('body').on('click', 'a.share-pinterest', function(e){
					e.preventDefault();

					// Load Pinterest Bookmarklet code
					var s = document.createElement("script");
					s.type = "text/javascript";
					s.src = window.location.protocol + "//assets.pinterest.com/js/pinmarklet.js?r=" + ( Math.random() * 99999999 );
					var x = document.getElementsByTagName("script")[0];
					x.parentNode.insertBefore(s, x);

					// Trigger Stats
					var s = document.createElement("script");
					s.type = "text/javascript";
					s.src = this + ( this.toString().indexOf( '?' ) ? '&' : '?' ) + 'js_only=1';
					var x = document.getElementsByTagName("script")[0];
					x.parentNode.insertBefore(s, x);
				});
			});
			</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-tumblr' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomtumblr', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-linkedin' ).on( 'click', function() {
				window.open( jQuery(this).attr( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
				return false;
			});
		});
		</script>
			<div id="sharing_email" style="display: none;">
		<form action="/2010/03/22/compiling-linux-kernel-for-qemu-arm-emulator/" method="post">
			<label for="target_email">Send to Email Address</label>
			<input name="target_email" id="target_email" type="text">

			
				<label for="source_name">Your Name</label>
				<input name="source_name" id="source_name" type="text">

				<label for="source_email">Your Email Address</label>
				<input name="source_email" id="source_email" type="text">

			
			<div class="recaptcha" id="sharing_recaptcha"></div><input name="recaptcha_public_key" id="recaptcha_public_key" value="6LcYW8MSAAAAADBAuEH9yaPcF7lWh11Iq62ZKtoo" type="hidden">
			<img style="float: right; display: none" class="loading" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/loading.gif" alt="loading" height="16" width="16">
			<input value="Send Email" class="sharing_send" type="submit">
			<a href="#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div>
		<iframe src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/master.html" id="likes-master" name="likes-master" style="display:none;"></iframe>
		<div id="likes-other-gravatars"><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		<script type="text/javascript">
		//<![CDATA[
			var jetpackLikesWidgetQueue = [];
			var jetpackLikesMasterReady = false;

			function JetpackLikespostMessage( message, target ) {
				if ( "string" === typeof message ){
					try{
						message = JSON.parse( message );
					}
					catch(e) {
						return;
					}
				}

				pm( {
					target: target,
					type: 'likesMessage',
					data: message,
					origin: '*'
				} );
			}

			function JetpackLikesMessageListener( event ) {
				if ( "undefined" == typeof event.event )
					return;

				if ( 'masterReady' == event.event ) {
					jQuery( document ).ready( function() {
						jetpackLikesMasterReady = true;

						var stylesData = {
								event: 'injectStyles'
						};

						if ( jQuery( 'iframe.admin-bar-likes-widget' ).length > 0 ) {
							JetpackLikespostMessage( { event: 'adminBarEnabled' }, window.frames[ 'likes-master' ] );

							stylesData.adminBarStyles = {
								background: jQuery( '#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a' ).css( 'background' )
							};
						}

						if ( !window.addEventListener )
							jQuery( '#wp-admin-bar-admin-bar-likes-widget' ).hide();

						stylesData.textStyles = {
							color: jQuery( '.sd-text-color').css( 'color' ),
							fontFamily: jQuery( '.sd-text-color' ).css( 'font-family' ),
							fontSize: jQuery( '.sd-text-color' ).css( 'font-size' ),
							direction: jQuery( '.sd-text-color' ).css( 'direction' ),
							fontWeight: jQuery( '.sd-text-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-text-color' ).css( 'font-style' ),
							textDecoration: jQuery( '.sd-text-color' ).css('text-decoration')
						};

						stylesData.linkStyles = {
							color: jQuery( '.sd-link-color' ).css('color'),
							fontFamily: jQuery( '.sd-link-color' ).css('font-family'),
							fontSize: jQuery( '.sd-link-color' ).css('font-size'),
							textDecoration: jQuery( '.sd-link-color' ).css('text-decoration'),
							fontWeight: jQuery( '.sd-link-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-link-color' ).css( 'font-style' )
						};

						JetpackLikespostMessage( stylesData, window.frames[ 'likes-master' ] );

						var requests = [];
						jQuery( '.jetpack-likes-widget-wrapper' ).each( function( i ) {
							var regex = /like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/;
							var match = regex.exec( this.id );
							if ( ! match || match.length != 5 )
								return;

							var info = {
								blog_id: match[2],
								width:   this.width
							};

							if ( 'post' == match[1] ) {
								info.post_id = match[3];
							} else if ( 'comment' == match[1] ) {
								info.comment_id = match[3];
							}

							info.obj_id = match[4];

							requests.push( info );
						});

						JetpackLikespostMessage( { event: 'initialBatch', requests: requests }, window.frames['likes-master'] );

						jQuery( document ).on( 'inview', 'div.jetpack-likes-widget-unloaded', function() {
							jetpackLikesWidgetQueue.push( this.id );
						});
					});
				}

				if ( 'showLikeWidget' == event.event ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 10 );
					jQuery( '#' + event.id + ' .post-likes-widget-placeholder'  ).fadeOut( 'fast', function() {
						jQuery( '#' + event.id + ' .post-likes-widget' ).fadeIn( 'fast', function() {
							JetpackLikespostMessage( { event: 'likeWidgetDisplayed', blog_id: event.blog_id, post_id: event.post_id, obj_id: event.obj_id }, window.frames['likes-master'] );
						});
					});
				}

				if ( 'showOtherGravatars' == event.event ) {
					var $container = jQuery( '#likes-other-gravatars' );
					var $list = $container.find( 'ul' );

					$container.hide();
					$list.html( '' );

					$container.find( '.likes-text span' ).text( event.total );

					jQuery.each( event.likers, function( i, liker ) {
						$list.append( '<li class="' + liker.css_class + '"><a href="' + liker.profile_URL + '" class="wpl-liker" rel="nofollow" target="_parent"><img src="' + liker.avatar_URL + '" alt="' + liker.name + '" width="30" height="30" style="padding-right: 3px;" /></a></li>');
					} );

					var offset = jQuery( "[name='" + event.parent + "']" ).offset();

					$container.css( 'left', offset.left + event.position.left - 10 + 'px' );
					$container.css( 'top', offset.top + event.position.top - 33 + 'px' );

					var rowLength = Math.floor( event.width / 37 );
					var height = ( Math.ceil( event.likers.length / rowLength ) * 37 ) + 13;
					if ( height > 204 ) {
						height = 204;
					}

					$container.css( 'height', height + 'px' );
					$container.css( 'width', rowLength * 37 - 7 + 'px' );

					$list.css( 'width', rowLength * 37 + 'px' );

					$container.fadeIn( 'slow' );

					var scrollbarWidth = $list[0].offsetWidth - $list[0].clientWidth;
					if ( scrollbarWidth > 0 ) {
						$container.width( $container.width() + scrollbarWidth );
						$list.width( $list.width() + scrollbarWidth );
					}
				}
			}

			pm.bind( 'likesMessage', function(e) { JetpackLikesMessageListener(e); } );

			jQuery( document ).click( function( e ) {
				var $container = jQuery( '#likes-other-gravatars' );

				if ( $container.has( e.target ).length === 0 ) {
					$container.fadeOut( 'slow' );
				}
			});

			function JetpackLikesWidgetQueueHandler() {
				var wrapperID;
				if ( ! jetpackLikesMasterReady ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				if ( jetpackLikesWidgetQueue.length > 0 ) {
					// We may have a widget that needs creating now
					var found = false;
					while( jetpackLikesWidgetQueue.length > 0 ) {
						// Grab the first member of the queue that isn't already loading.
						wrapperID = jetpackLikesWidgetQueue.splice( 0, 1 )[0];
						if ( jQuery( '#' + wrapperID ).hasClass( 'jetpack-likes-widget-unloaded' ) ) {
							found = true;
							break;
						}
					}
					if ( ! found ) {
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				} else if ( jQuery( 'div.jetpack-likes-widget-unloaded' ).length > 0 ) {
					// Get the next unloaded widget
					wrapperID = jQuery( 'div.jetpack-likes-widget-unloaded' ).first()[0].id;
					if ( ! wrapperID ) {
						// Everything is currently loaded
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				}

				var $wrapper = jQuery( '#' + wrapperID );
				$wrapper.find( 'iframe' ).remove();

				if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='22px' width='68px' frameBorder='0' scrolling='no' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				} else {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='55px' width='100%' frameBorder='0' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				}

				$wrapper.removeClass( 'jetpack-likes-widget-unloaded' ).addClass( 'jetpack-likes-widget-loading' );

				$wrapper.find( 'iframe' ).load( function( e ) {
					var $iframe = jQuery( e.target );
					$wrapper.removeClass( 'jetpack-likes-widget-loading' ).addClass( 'jetpack-likes-widget-loaded' );

					JetpackLikespostMessage( { event: 'loadLikeWidget', name: $iframe.attr( 'name' ), width: $iframe.width() }, window.frames[ 'likes-master' ] );

					if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
						$wrapper.find( 'iframe' ).Jetpack( 'resizeable' );
					}
				});
			}
			setInterval( JetpackLikesWidgetQueueHandler, 250 );
		//]]>
		</script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/a.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?m=1363661091g&amp;ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414g&amp;ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/devicepx.js"></script>
<script type="text/javascript" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/getaffiliatorjs.js"></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/w.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'6718912','v':'wpcom','tz':'2','user_id':'0','post':'430','subd':'balau82'});
ex_go({'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhRW3J8TyVnZTFjeVZjYlcmTitVRjVXcT1zWSZ2SzRwb1dHUVRXekJdLEcvQzdDdHB0dltvQ05GfC1HUEEsYXpXUGJaelI4Zmt1aGpiRSZ8OE83ZjUuek5XL29OUnlvWkNdM2x6WmM/ZTVqanpZdWpuLXQ/SS1qazI9K1JEMW1CWj9weHElcWtMb0NiXU1XMjlwT3J2VC1qeFJCS11rOHd6T05WM2c0VjN1WDYsRkhab1F0RjdQfF9fPWhrfmU1OX5mLTBqUmhDRzFOcn4vR110Uzdhdk5PVzB0eVUvT1A2JU1jYXdCQixMKzhOLnh+RC9hakNlVTdvajJWOFpZTlo/fmdJYzY3cDI/TUJ6'});
addLoadEvent(function(){linktracker_init('6718912',430);});
	</script><img id="wpstats" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/g.gif" alt=""><img id="wpstats2" src="Compiling%20Linux%20kernel%20for%20QEMU%20ARM%20emulator%20%7C%20Balau_files/g_002.gif" alt="" style="display:none">
<noscript><img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>

<!--[if lt IE 7]>
<script src="http://s2.wp.com/wp-content/themes/pub/inuit-types/library/js/IE7.js?m=1315596887g" type="text/javascript"></script>
<![endif]-->


</body></html>